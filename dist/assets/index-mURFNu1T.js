(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}})();function dm(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var jc={exports:{}},Vo={},Dc={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var op;function Xy(){if(op)return Ue;op=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.iterator;function L(j){return j===null||typeof j!="object"?null:(j=N&&j[N]||j["@@iterator"],typeof j=="function"?j:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,q={};function B(j,D,ue){this.props=j,this.context=D,this.refs=q,this.updater=ue||z}B.prototype.isReactComponent={},B.prototype.setState=function(j,D){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,D,"setState")},B.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function te(){}te.prototype=B.prototype;function ie(j,D,ue){this.props=j,this.context=D,this.refs=q,this.updater=ue||z}var he=ie.prototype=new te;he.constructor=ie,W(he,B.prototype),he.isPureReactComponent=!0;var xe=Array.isArray,Ee=Object.prototype.hasOwnProperty,me={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function T(j,D,ue){var ve,Ce={},we=null,Re=null;if(D!=null)for(ve in D.ref!==void 0&&(Re=D.ref),D.key!==void 0&&(we=""+D.key),D)Ee.call(D,ve)&&!A.hasOwnProperty(ve)&&(Ce[ve]=D[ve]);var je=arguments.length-2;if(je===1)Ce.children=ue;else if(1<je){for(var ze=Array(je),et=0;et<je;et++)ze[et]=arguments[et+2];Ce.children=ze}if(j&&j.defaultProps)for(ve in je=j.defaultProps,je)Ce[ve]===void 0&&(Ce[ve]=je[ve]);return{$$typeof:s,type:j,key:we,ref:Re,props:Ce,_owner:me.current}}function I(j,D){return{$$typeof:s,type:j.type,key:D,ref:j.ref,props:j.props,_owner:j._owner}}function b(j){return typeof j=="object"&&j!==null&&j.$$typeof===s}function R(j){var D={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ue){return D[ue]})}var V=/\/+/g;function E(j,D){return typeof j=="object"&&j!==null&&j.key!=null?R(""+j.key):D.toString(36)}function ae(j,D,ue,ve,Ce){var we=typeof j;(we==="undefined"||we==="boolean")&&(j=null);var Re=!1;if(j===null)Re=!0;else switch(we){case"string":case"number":Re=!0;break;case"object":switch(j.$$typeof){case s:case e:Re=!0}}if(Re)return Re=j,Ce=Ce(Re),j=ve===""?"."+E(Re,0):ve,xe(Ce)?(ue="",j!=null&&(ue=j.replace(V,"$&/")+"/"),ae(Ce,D,ue,"",function(et){return et})):Ce!=null&&(b(Ce)&&(Ce=I(Ce,ue+(!Ce.key||Re&&Re.key===Ce.key?"":(""+Ce.key).replace(V,"$&/")+"/")+j)),D.push(Ce)),1;if(Re=0,ve=ve===""?".":ve+":",xe(j))for(var je=0;je<j.length;je++){we=j[je];var ze=ve+E(we,je);Re+=ae(we,D,ue,ze,Ce)}else if(ze=L(j),typeof ze=="function")for(j=ze.call(j),je=0;!(we=j.next()).done;)we=we.value,ze=ve+E(we,je++),Re+=ae(we,D,ue,ze,Ce);else if(we==="object")throw D=String(j),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return Re}function be(j,D,ue){if(j==null)return j;var ve=[],Ce=0;return ae(j,ve,"","",function(we){return D.call(ue,we,Ce++)}),ve}function Le(j){if(j._status===-1){var D=j._result;D=D(),D.then(function(ue){(j._status===0||j._status===-1)&&(j._status=1,j._result=ue)},function(ue){(j._status===0||j._status===-1)&&(j._status=2,j._result=ue)}),j._status===-1&&(j._status=0,j._result=D)}if(j._status===1)return j._result.default;throw j._result}var Fe={current:null},Y={transition:null},fe={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:Y,ReactCurrentOwner:me};function le(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:be,forEach:function(j,D,ue){be(j,function(){D.apply(this,arguments)},ue)},count:function(j){var D=0;return be(j,function(){D++}),D},toArray:function(j){return be(j,function(D){return D})||[]},only:function(j){if(!b(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ue.Component=B,Ue.Fragment=r,Ue.Profiler=a,Ue.PureComponent=ie,Ue.StrictMode=i,Ue.Suspense=v,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,Ue.act=le,Ue.cloneElement=function(j,D,ue){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var ve=W({},j.props),Ce=j.key,we=j.ref,Re=j._owner;if(D!=null){if(D.ref!==void 0&&(we=D.ref,Re=me.current),D.key!==void 0&&(Ce=""+D.key),j.type&&j.type.defaultProps)var je=j.type.defaultProps;for(ze in D)Ee.call(D,ze)&&!A.hasOwnProperty(ze)&&(ve[ze]=D[ze]===void 0&&je!==void 0?je[ze]:D[ze])}var ze=arguments.length-2;if(ze===1)ve.children=ue;else if(1<ze){je=Array(ze);for(var et=0;et<ze;et++)je[et]=arguments[et+2];ve.children=je}return{$$typeof:s,type:j.type,key:Ce,ref:we,props:ve,_owner:Re}},Ue.createContext=function(j){return j={$$typeof:d,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:c,_context:j},j.Consumer=j},Ue.createElement=T,Ue.createFactory=function(j){var D=T.bind(null,j);return D.type=j,D},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(j){return{$$typeof:g,render:j}},Ue.isValidElement=b,Ue.lazy=function(j){return{$$typeof:S,_payload:{_status:-1,_result:j},_init:Le}},Ue.memo=function(j,D){return{$$typeof:x,type:j,compare:D===void 0?null:D}},Ue.startTransition=function(j){var D=Y.transition;Y.transition={};try{j()}finally{Y.transition=D}},Ue.unstable_act=le,Ue.useCallback=function(j,D){return Fe.current.useCallback(j,D)},Ue.useContext=function(j){return Fe.current.useContext(j)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(j){return Fe.current.useDeferredValue(j)},Ue.useEffect=function(j,D){return Fe.current.useEffect(j,D)},Ue.useId=function(){return Fe.current.useId()},Ue.useImperativeHandle=function(j,D,ue){return Fe.current.useImperativeHandle(j,D,ue)},Ue.useInsertionEffect=function(j,D){return Fe.current.useInsertionEffect(j,D)},Ue.useLayoutEffect=function(j,D){return Fe.current.useLayoutEffect(j,D)},Ue.useMemo=function(j,D){return Fe.current.useMemo(j,D)},Ue.useReducer=function(j,D,ue){return Fe.current.useReducer(j,D,ue)},Ue.useRef=function(j){return Fe.current.useRef(j)},Ue.useState=function(j){return Fe.current.useState(j)},Ue.useSyncExternalStore=function(j,D,ue){return Fe.current.useSyncExternalStore(j,D,ue)},Ue.useTransition=function(){return Fe.current.useTransition()},Ue.version="18.3.1",Ue}var ap;function wh(){return ap||(ap=1,Dc.exports=Xy()),Dc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp;function Jy(){if(lp)return Vo;lp=1;var s=wh(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(g,v,x){var S,N={},L=null,z=null;x!==void 0&&(L=""+x),v.key!==void 0&&(L=""+v.key),v.ref!==void 0&&(z=v.ref);for(S in v)i.call(v,S)&&!c.hasOwnProperty(S)&&(N[S]=v[S]);if(g&&g.defaultProps)for(S in v=g.defaultProps,v)N[S]===void 0&&(N[S]=v[S]);return{$$typeof:e,type:g,key:L,ref:z,props:N,_owner:a.current}}return Vo.Fragment=r,Vo.jsx=d,Vo.jsxs=d,Vo}var up;function Zy(){return up||(up=1,jc.exports=Jy()),jc.exports}var m=Zy(),H=wh();const e0=dm(H);var Il={},Vc={exports:{}},sn={},Lc={exports:{}},Mc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cp;function t0(){return cp||(cp=1,(function(s){function e(Y,fe){var le=Y.length;Y.push(fe);e:for(;0<le;){var j=le-1>>>1,D=Y[j];if(0<a(D,fe))Y[j]=fe,Y[le]=D,le=j;else break e}}function r(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var fe=Y[0],le=Y.pop();if(le!==fe){Y[0]=le;e:for(var j=0,D=Y.length,ue=D>>>1;j<ue;){var ve=2*(j+1)-1,Ce=Y[ve],we=ve+1,Re=Y[we];if(0>a(Ce,le))we<D&&0>a(Re,Ce)?(Y[j]=Re,Y[we]=le,j=we):(Y[j]=Ce,Y[ve]=le,j=ve);else if(we<D&&0>a(Re,le))Y[j]=Re,Y[we]=le,j=we;else break e}}return fe}function a(Y,fe){var le=Y.sortIndex-fe.sortIndex;return le!==0?le:Y.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var v=[],x=[],S=1,N=null,L=3,z=!1,W=!1,q=!1,B=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function he(Y){for(var fe=r(x);fe!==null;){if(fe.callback===null)i(x);else if(fe.startTime<=Y)i(x),fe.sortIndex=fe.expirationTime,e(v,fe);else break;fe=r(x)}}function xe(Y){if(q=!1,he(Y),!W)if(r(v)!==null)W=!0,Le(Ee);else{var fe=r(x);fe!==null&&Fe(xe,fe.startTime-Y)}}function Ee(Y,fe){W=!1,q&&(q=!1,te(T),T=-1),z=!0;var le=L;try{for(he(fe),N=r(v);N!==null&&(!(N.expirationTime>fe)||Y&&!R());){var j=N.callback;if(typeof j=="function"){N.callback=null,L=N.priorityLevel;var D=j(N.expirationTime<=fe);fe=s.unstable_now(),typeof D=="function"?N.callback=D:N===r(v)&&i(v),he(fe)}else i(v);N=r(v)}if(N!==null)var ue=!0;else{var ve=r(x);ve!==null&&Fe(xe,ve.startTime-fe),ue=!1}return ue}finally{N=null,L=le,z=!1}}var me=!1,A=null,T=-1,I=5,b=-1;function R(){return!(s.unstable_now()-b<I)}function V(){if(A!==null){var Y=s.unstable_now();b=Y;var fe=!0;try{fe=A(!0,Y)}finally{fe?E():(me=!1,A=null)}}else me=!1}var E;if(typeof ie=="function")E=function(){ie(V)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,be=ae.port2;ae.port1.onmessage=V,E=function(){be.postMessage(null)}}else E=function(){B(V,0)};function Le(Y){A=Y,me||(me=!0,E())}function Fe(Y,fe){T=B(function(){Y(s.unstable_now())},fe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_continueExecution=function(){W||z||(W=!0,Le(Ee))},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return L},s.unstable_getFirstCallbackNode=function(){return r(v)},s.unstable_next=function(Y){switch(L){case 1:case 2:case 3:var fe=3;break;default:fe=L}var le=L;L=fe;try{return Y()}finally{L=le}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(Y,fe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var le=L;L=Y;try{return fe()}finally{L=le}},s.unstable_scheduleCallback=function(Y,fe,le){var j=s.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?j+le:j):le=j,Y){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=le+D,Y={id:S++,callback:fe,priorityLevel:Y,startTime:le,expirationTime:D,sortIndex:-1},le>j?(Y.sortIndex=le,e(x,Y),r(v)===null&&Y===r(x)&&(q?(te(T),T=-1):q=!0,Fe(xe,le-j))):(Y.sortIndex=D,e(v,Y),W||z||(W=!0,Le(Ee))),Y},s.unstable_shouldYield=R,s.unstable_wrapCallback=function(Y){var fe=L;return function(){var le=L;L=fe;try{return Y.apply(this,arguments)}finally{L=le}}}})(Mc)),Mc}var hp;function n0(){return hp||(hp=1,Lc.exports=t0()),Lc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dp;function r0(){if(dp)return sn;dp=1;var s=wh(),e=n0();function r(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function c(t,n){d(t,n),d(t+"Capture",n)}function d(t,n){for(a[t]=n,t=0;t<n.length;t++)i.add(n[t])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},N={};function L(t){return v.call(N,t)?!0:v.call(S,t)?!1:x.test(t)?N[t]=!0:(S[t]=!0,!1)}function z(t,n,o,u){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function W(t,n,o,u){if(n===null||typeof n>"u"||z(t,n,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function q(t,n,o,u,h,p,_){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=n,this.sanitizeURL=p,this.removeEmptyString=_}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){B[t]=new q(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];B[n]=new q(n,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){B[t]=new q(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){B[t]=new q(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){B[t]=new q(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){B[t]=new q(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){B[t]=new q(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){B[t]=new q(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){B[t]=new q(t,5,!1,t.toLowerCase(),null,!1,!1)});var te=/[\-:]([a-z])/g;function ie(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(te,ie);B[n]=new q(n,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(te,ie);B[n]=new q(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(te,ie);B[n]=new q(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){B[t]=new q(t,1,!1,t.toLowerCase(),null,!1,!1)}),B.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){B[t]=new q(t,1,!1,t.toLowerCase(),null,!0,!0)});function he(t,n,o,u){var h=B.hasOwnProperty(n)?B[n]:null;(h!==null?h.type!==0:u||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(W(n,o,h,u)&&(o=null),u||h===null?L(n)&&(o===null?t.removeAttribute(n):t.setAttribute(n,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(n=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(n):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,n,o):t.setAttribute(n,o))))}var xe=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ee=Symbol.for("react.element"),me=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),R=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),Fe=Symbol.for("react.offscreen"),Y=Symbol.iterator;function fe(t){return t===null||typeof t!="object"?null:(t=Y&&t[Y]||t["@@iterator"],typeof t=="function"?t:null)}var le=Object.assign,j;function D(t){if(j===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);j=n&&n[1]||""}return`
`+j+t}var ue=!1;function ve(t,n){if(!t||ue)return"";ue=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(U){var u=U}Reflect.construct(t,[],n)}else{try{n.call()}catch(U){u=U}t.call(n.prototype)}else{try{throw Error()}catch(U){u=U}t()}}catch(U){if(U&&u&&typeof U.stack=="string"){for(var h=U.stack.split(`
`),p=u.stack.split(`
`),_=h.length-1,k=p.length-1;1<=_&&0<=k&&h[_]!==p[k];)k--;for(;1<=_&&0<=k;_--,k--)if(h[_]!==p[k]){if(_!==1||k!==1)do if(_--,k--,0>k||h[_]!==p[k]){var C=`
`+h[_].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=_&&0<=k);break}}}finally{ue=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?D(t):""}function Ce(t){switch(t.tag){case 5:return D(t.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return t=ve(t.type,!1),t;case 11:return t=ve(t.type.render,!1),t;case 1:return t=ve(t.type,!0),t;default:return""}}function we(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case A:return"Fragment";case me:return"Portal";case I:return"Profiler";case T:return"StrictMode";case E:return"Suspense";case ae:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case R:return(t.displayName||"Context")+".Consumer";case b:return(t._context.displayName||"Context")+".Provider";case V:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case be:return n=t.displayName||null,n!==null?n:we(t.type)||"Memo";case Le:n=t._payload,t=t._init;try{return we(t(n))}catch{}}return null}function Re(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(n);case 8:return n===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function je(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ze(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function et(t){var n=ze(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),u=""+t[n];if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(_){u=""+_,p.call(this,_)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function on(t){t._valueTracker||(t._valueTracker=et(t))}function yn(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var o=n.getValue(),u="";return t&&(u=ze(t)?t.checked?"true":"false":t.value),t=u,t!==o?(n.setValue(t),!0):!1}function Ht(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function an(t,n){var o=n.checked;return le({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Rn(t,n){var o=n.defaultValue==null?"":n.defaultValue,u=n.checked!=null?n.checked:n.defaultChecked;o=je(n.value!=null?n.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function vn(t,n){n=n.checked,n!=null&&he(t,"checked",n,!1)}function cr(t,n){vn(t,n);var o=je(n.value),u=n.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?Pn(t,n.type,o):n.hasOwnProperty("defaultValue")&&Pn(t,n.type,je(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function Rr(t,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var u=n.type;if(!(u!=="submit"&&u!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,o||n===t.value||(t.value=n),t.defaultValue=n}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Pn(t,n,o){(n!=="number"||Ht(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var re=Array.isArray;function Oe(t,n,o,u){if(t=t.options,n){n={};for(var h=0;h<o.length;h++)n["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=n.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+je(o),n=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Me(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return le({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yt(t,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(r(92));if(re(o)){if(1<o.length)throw Error(r(93));o=o[0]}n=o}n==null&&(n=""),o=n}t._wrapperState={initialValue:je(o)}}function hr(t,n){var o=je(n.value),u=je(n.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),n.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function ee(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function oe(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Q(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?oe(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ae,We=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(n,o,u,h)})}:t})(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(Ae=Ae||document.createElement("div"),Ae.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Ae.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function Xe(t,n){if(n){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=n;return}}t.textContent=n}var ln={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dr=["Webkit","ms","Moz","O"];Object.keys(ln).forEach(function(t){dr.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),ln[n]=ln[t]})});function $s(t,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||ln.hasOwnProperty(t)&&ln[t]?(""+n).trim():n+"px"}function Ct(t,n){t=t.style;for(var o in n)if(n.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=$s(o,n[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var Pr=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ki(t,n){if(n){if(Pr[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function Gi(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cs=null;function qs(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hs=null,_n=null,Gn=null;function Ws(t){if(t=xo(t)){if(typeof Hs!="function")throw Error(r(280));var n=t.stateNode;n&&(n=za(n),Hs(t.stateNode,t.type,n))}}function Yn(t){_n?Gn?Gn.push(t):Gn=[t]:_n=t}function Yi(){if(_n){var t=_n,n=Gn;if(Gn=_n=null,Ws(t),n)for(t=0;t<n.length;t++)Ws(n[t])}}function hs(t,n){return t(n)}function Xi(){}var fr=!1;function Ji(t,n,o){if(fr)return t(n,o);fr=!0;try{return hs(t,n,o)}finally{fr=!1,(_n!==null||Gn!==null)&&(Xi(),Yi())}}function ft(t,n){var o=t.stateNode;if(o===null)return null;var u=za(o);if(u===null)return null;o=u[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(r(231,n,typeof o));return o}var Qs=!1;if(g)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){Qs=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{Qs=!1}function ds(t,n,o,u,h,p,_,k,C){var U=Array.prototype.slice.call(arguments,3);try{n.apply(o,U)}catch(G){this.onError(G)}}var fs=!1,Ks=null,Dn=!1,Zi=null,au={onError:function(t){fs=!0,Ks=t}};function Gs(t,n,o,u,h,p,_,k,C){fs=!1,Ks=null,ds.apply(au,arguments)}function da(t,n,o,u,h,p,_,k,C){if(Gs.apply(this,arguments),fs){if(fs){var U=Ks;fs=!1,Ks=null}else throw Error(r(198));Dn||(Dn=!0,Zi=U)}}function Vn(t){var n=t,o=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(o=n.return),t=n.return;while(t)}return n.tag===3?o:null}function ps(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function Ln(t){if(Vn(t)!==t)throw Error(r(188))}function fa(t){var n=t.alternate;if(!n){if(n=Vn(t),n===null)throw Error(r(188));return n!==t?null:t}for(var o=t,u=n;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return Ln(h),t;if(p===u)return Ln(h),n;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=h,u=p;else{for(var _=!1,k=h.child;k;){if(k===o){_=!0,o=h,u=p;break}if(k===u){_=!0,u=h,o=p;break}k=k.sibling}if(!_){for(k=p.child;k;){if(k===o){_=!0,o=p,u=h;break}if(k===u){_=!0,u=p,o=h;break}k=k.sibling}if(!_)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?t:n}function eo(t){return t=fa(t),t!==null?Ys(t):null}function Ys(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=Ys(t);if(n!==null)return n;t=t.sibling}return null}var Xs=e.unstable_scheduleCallback,to=e.unstable_cancelCallback,pa=e.unstable_shouldYield,lu=e.unstable_requestPaint,nt=e.unstable_now,ma=e.unstable_getCurrentPriorityLevel,ms=e.unstable_ImmediatePriority,jr=e.unstable_UserBlockingPriority,xn=e.unstable_NormalPriority,no=e.unstable_LowPriority,ga=e.unstable_IdlePriority,gs=null,un=null;function ya(t){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(gs,t,void 0,(t.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:_a,ro=Math.log,va=Math.LN2;function _a(t){return t>>>=0,t===0?32:31-(ro(t)/va|0)|0}var Js=64,Zs=4194304;function Dr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ys(t,n){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,_=o&268435455;if(_!==0){var k=_&~h;k!==0?u=Dr(k):(p&=_,p!==0&&(u=Dr(p)))}else _=o&~h,_!==0?u=Dr(_):p!==0&&(u=Dr(p));if(u===0)return 0;if(n!==0&&n!==u&&(n&h)===0&&(h=u&-u,p=n&-n,h>=p||h===16&&(p&4194240)!==0))return n;if((u&4)!==0&&(u|=o&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=u;0<n;)o=31-Wt(n),h=1<<o,u|=t[o],n&=~h;return u}function uu(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pr(t,n){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-Wt(p),k=1<<_,C=h[_];C===-1?((k&o)===0||(k&u)!==0)&&(h[_]=uu(k,n)):C<=n&&(t.expiredLanes|=k),p&=~k}}function cn(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vs(){var t=Js;return Js<<=1,(Js&4194240)===0&&(Js=64),t}function Vr(t){for(var n=[],o=0;31>o;o++)n.push(t);return n}function Lr(t,n,o){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Wt(n),t[n]=o}function tt(t,n){var o=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-Wt(o),p=1<<h;n[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function Mr(t,n){var o=t.entangledLanes|=n;for(t=t.entanglements;o;){var u=31-Wt(o),h=1<<u;h&n|t[u]&n&&(t[u]|=n),o&=~h}}var $e=0;function Or(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var xa,ei,wa,Ea,Ta,so=!1,Xn=[],Nt=null,Mn=null,On=null,Fr=new Map,wn=new Map,Jn=[],cu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sa(t,n){switch(t){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":Fr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":wn.delete(n.pointerId)}}function Xt(t,n,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:n,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},n!==null&&(n=xo(n),n!==null&&ei(n)),t):(t.eventSystemFlags|=u,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function hu(t,n,o,u,h){switch(n){case"focusin":return Nt=Xt(Nt,t,n,o,u,h),!0;case"dragenter":return Mn=Xt(Mn,t,n,o,u,h),!0;case"mouseover":return On=Xt(On,t,n,o,u,h),!0;case"pointerover":var p=h.pointerId;return Fr.set(p,Xt(Fr.get(p)||null,t,n,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,wn.set(p,Xt(wn.get(p)||null,t,n,o,u,h)),!0}return!1}function ka(t){var n=Ts(t.target);if(n!==null){var o=Vn(n);if(o!==null){if(n=o.tag,n===13){if(n=ps(o),n!==null){t.blockedOn=n,Ta(t.priority,function(){wa(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mr(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var o=ti(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);cs=u,o.target.dispatchEvent(u),cs=null}else return n=xo(o),n!==null&&ei(n),t.blockedOn=o,!1;n.shift()}return!0}function _s(t,n,o){mr(t)&&o.delete(n)}function Ia(){so=!1,Nt!==null&&mr(Nt)&&(Nt=null),Mn!==null&&mr(Mn)&&(Mn=null),On!==null&&mr(On)&&(On=null),Fr.forEach(_s),wn.forEach(_s)}function Fn(t,n){t.blockedOn===n&&(t.blockedOn=null,so||(so=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ia)))}function Un(t){function n(h){return Fn(h,t)}if(0<Xn.length){Fn(Xn[0],t);for(var o=1;o<Xn.length;o++){var u=Xn[o];u.blockedOn===t&&(u.blockedOn=null)}}for(Nt!==null&&Fn(Nt,t),Mn!==null&&Fn(Mn,t),On!==null&&Fn(On,t),Fr.forEach(n),wn.forEach(n),o=0;o<Jn.length;o++)u=Jn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Jn.length&&(o=Jn[0],o.blockedOn===null);)ka(o),o.blockedOn===null&&Jn.shift()}var gr=xe.ReactCurrentBatchConfig,Ur=!0;function ot(t,n,o,u){var h=$e,p=gr.transition;gr.transition=null;try{$e=1,io(t,n,o,u)}finally{$e=h,gr.transition=p}}function du(t,n,o,u){var h=$e,p=gr.transition;gr.transition=null;try{$e=4,io(t,n,o,u)}finally{$e=h,gr.transition=p}}function io(t,n,o,u){if(Ur){var h=ti(t,n,o,u);if(h===null)Tu(t,n,u,xs,o),Sa(t,u);else if(hu(h,t,n,o,u))u.stopPropagation();else if(Sa(t,u),n&4&&-1<cu.indexOf(t)){for(;h!==null;){var p=xo(h);if(p!==null&&xa(p),p=ti(t,n,o,u),p===null&&Tu(t,n,u,xs,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Tu(t,n,u,null,o)}}var xs=null;function ti(t,n,o,u){if(xs=null,t=qs(u),t=Ts(t),t!==null)if(n=Vn(t),n===null)t=null;else if(o=n.tag,o===13){if(t=ps(n),t!==null)return t;t=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return xs=t,null}function oo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ma()){case ms:return 1;case jr:return 4;case xn:case no:return 16;case ga:return 536870912;default:return 16}default:return 16}}var hn=null,ni=null,Jt=null;function ao(){if(Jt)return Jt;var t,n=ni,o=n.length,u,h="value"in hn?hn.value:hn.textContent,p=h.length;for(t=0;t<o&&n[t]===h[t];t++);var _=o-t;for(u=1;u<=_&&n[o-u]===h[p-u];u++);return Jt=h.slice(t,1<u?1-u:void 0)}function ri(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Zn(){return!0}function lo(){return!1}function Rt(t){function n(o,u,h,p,_){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var k in t)t.hasOwnProperty(k)&&(o=t[k],this[k]=o?o(p):p[k]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Zn:lo,this.isPropagationStopped=lo,this}return le(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),n}var zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},si=Rt(zn),er=le({},zn,{view:0,detail:0}),fu=Rt(er),ii,yr,zr,ws=le({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zr&&(zr&&t.type==="mousemove"?(ii=t.screenX-zr.screenX,yr=t.screenY-zr.screenY):yr=ii=0,zr=t),ii)},movementY:function(t){return"movementY"in t?t.movementY:yr}}),oi=Rt(ws),uo=le({},ws,{dataTransfer:0}),ba=Rt(uo),ai=le({},er,{relatedTarget:0}),li=Rt(ai),Aa=le({},zn,{animationName:0,elapsedTime:0,pseudoElement:0}),vr=Rt(Aa),Ca=le({},zn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Na=Rt(Ca),Ra=le({},zn,{data:0}),co=Rt(Ra),ui={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ja(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Pa[t])?!!n[t]:!1}function tr(){return ja}var l=le({},er,{key:function(t){if(t.key){var n=ui[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=ri(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tr,charCode:function(t){return t.type==="keypress"?ri(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ri(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),f=Rt(l),y=le({},ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=Rt(y),M=le({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tr}),$=Rt(M),se=le({},zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Je=Rt(se),_t=le({},ws,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qe=Rt(_t),St=[9,13,27,32],gt=g&&"CompositionEvent"in window,En=null;g&&"documentMode"in document&&(En=document.documentMode);var dn=g&&"TextEvent"in window&&!En,Es=g&&(!gt||En&&8<En&&11>=En),ci=" ",Zh=!1;function ed(t,n){switch(t){case"keyup":return St.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function td(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hi=!1;function Kg(t,n){switch(t){case"compositionend":return td(n);case"keypress":return n.which!==32?null:(Zh=!0,ci);case"textInput":return t=n.data,t===ci&&Zh?null:t;default:return null}}function Gg(t,n){if(hi)return t==="compositionend"||!gt&&ed(t,n)?(t=ao(),Jt=ni=hn=null,hi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Es&&n.locale!=="ko"?null:n.data;default:return null}}var Yg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Yg[t.type]:n==="textarea"}function rd(t,n,o,u){Yn(u),n=Oa(n,"onChange"),0<n.length&&(o=new si("onChange","change",null,o,u),t.push({event:o,listeners:n}))}var ho=null,fo=null;function Xg(t){wd(t,0)}function Da(t){var n=gi(t);if(yn(n))return t}function Jg(t,n){if(t==="change")return n}var sd=!1;if(g){var pu;if(g){var mu="oninput"in document;if(!mu){var id=document.createElement("div");id.setAttribute("oninput","return;"),mu=typeof id.oninput=="function"}pu=mu}else pu=!1;sd=pu&&(!document.documentMode||9<document.documentMode)}function od(){ho&&(ho.detachEvent("onpropertychange",ad),fo=ho=null)}function ad(t){if(t.propertyName==="value"&&Da(fo)){var n=[];rd(n,fo,t,qs(t)),Ji(Xg,n)}}function Zg(t,n,o){t==="focusin"?(od(),ho=n,fo=o,ho.attachEvent("onpropertychange",ad)):t==="focusout"&&od()}function ey(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Da(fo)}function ty(t,n){if(t==="click")return Da(n)}function ny(t,n){if(t==="input"||t==="change")return Da(n)}function ry(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Bn=typeof Object.is=="function"?Object.is:ry;function po(t,n){if(Bn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var o=Object.keys(t),u=Object.keys(n);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!v.call(n,h)||!Bn(t[h],n[h]))return!1}return!0}function ld(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ud(t,n){var o=ld(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=n&&u>=n)return{node:o,offset:n-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ld(o)}}function cd(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?cd(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function hd(){for(var t=window,n=Ht();n instanceof t.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)t=n.contentWindow;else break;n=Ht(t.document)}return n}function gu(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function sy(t){var n=hd(),o=t.focusedElem,u=t.selectionRange;if(n!==o&&o&&o.ownerDocument&&cd(o.ownerDocument.documentElement,o)){if(u!==null&&gu(o)){if(n=u.start,t=u.end,t===void 0&&(t=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(t,o.value.length);else if(t=(n=o.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=ud(o,p);var _=ud(o,u);h&&_&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(n=n.createRange(),n.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(n),t.extend(_.node,_.offset)):(n.setEnd(_.node,_.offset),t.addRange(n)))}}for(n=[],t=o;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)t=n[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iy=g&&"documentMode"in document&&11>=document.documentMode,di=null,yu=null,mo=null,vu=!1;function dd(t,n,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;vu||di==null||di!==Ht(u)||(u=di,"selectionStart"in u&&gu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),mo&&po(mo,u)||(mo=u,u=Oa(yu,"onSelect"),0<u.length&&(n=new si("onSelect","select",null,n,o),t.push({event:n,listeners:u}),n.target=di)))}function Va(t,n){var o={};return o[t.toLowerCase()]=n.toLowerCase(),o["Webkit"+t]="webkit"+n,o["Moz"+t]="moz"+n,o}var fi={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionend:Va("Transition","TransitionEnd")},_u={},fd={};g&&(fd=document.createElement("div").style,"AnimationEvent"in window||(delete fi.animationend.animation,delete fi.animationiteration.animation,delete fi.animationstart.animation),"TransitionEvent"in window||delete fi.transitionend.transition);function La(t){if(_u[t])return _u[t];if(!fi[t])return t;var n=fi[t],o;for(o in n)if(n.hasOwnProperty(o)&&o in fd)return _u[t]=n[o];return t}var pd=La("animationend"),md=La("animationiteration"),gd=La("animationstart"),yd=La("transitionend"),vd=new Map,_d="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(t,n){vd.set(t,n),c(n,[t])}for(var xu=0;xu<_d.length;xu++){var wu=_d[xu],oy=wu.toLowerCase(),ay=wu[0].toUpperCase()+wu.slice(1);Br(oy,"on"+ay)}Br(pd,"onAnimationEnd"),Br(md,"onAnimationIteration"),Br(gd,"onAnimationStart"),Br("dblclick","onDoubleClick"),Br("focusin","onFocus"),Br("focusout","onBlur"),Br(yd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ly=new Set("cancel close invalid load scroll toggle".split(" ").concat(go));function xd(t,n,o){var u=t.type||"unknown-event";t.currentTarget=o,da(u,n,void 0,t),t.currentTarget=null}function wd(t,n){n=(n&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(n)for(var _=u.length-1;0<=_;_--){var k=u[_],C=k.instance,U=k.currentTarget;if(k=k.listener,C!==p&&h.isPropagationStopped())break e;xd(h,k,U),p=C}else for(_=0;_<u.length;_++){if(k=u[_],C=k.instance,U=k.currentTarget,k=k.listener,C!==p&&h.isPropagationStopped())break e;xd(h,k,U),p=C}}}if(Dn)throw t=Zi,Dn=!1,Zi=null,t}function st(t,n){var o=n[Cu];o===void 0&&(o=n[Cu]=new Set);var u=t+"__bubble";o.has(u)||(Ed(n,t,2,!1),o.add(u))}function Eu(t,n,o){var u=0;n&&(u|=4),Ed(o,t,u,n)}var Ma="_reactListening"+Math.random().toString(36).slice(2);function yo(t){if(!t[Ma]){t[Ma]=!0,i.forEach(function(o){o!=="selectionchange"&&(ly.has(o)||Eu(o,!1,t),Eu(o,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ma]||(n[Ma]=!0,Eu("selectionchange",!1,n))}}function Ed(t,n,o,u){switch(oo(n)){case 1:var h=ot;break;case 4:h=du;break;default:h=io}o=h.bind(null,n,o,t),h=void 0,!Qs||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(n,o,{capture:!0,passive:h}):t.addEventListener(n,o,!0):h!==void 0?t.addEventListener(n,o,{passive:h}):t.addEventListener(n,o,!1)}function Tu(t,n,o,u,h){var p=u;if((n&1)===0&&(n&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var k=u.stateNode.containerInfo;if(k===h||k.nodeType===8&&k.parentNode===h)break;if(_===4)for(_=u.return;_!==null;){var C=_.tag;if((C===3||C===4)&&(C=_.stateNode.containerInfo,C===h||C.nodeType===8&&C.parentNode===h))return;_=_.return}for(;k!==null;){if(_=Ts(k),_===null)return;if(C=_.tag,C===5||C===6){u=p=_;continue e}k=k.parentNode}}u=u.return}Ji(function(){var U=p,G=qs(o),J=[];e:{var K=vd.get(t);if(K!==void 0){var ce=si,pe=t;switch(t){case"keypress":if(ri(o)===0)break e;case"keydown":case"keyup":ce=f;break;case"focusin":pe="focus",ce=li;break;case"focusout":pe="blur",ce=li;break;case"beforeblur":case"afterblur":ce=li;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=oi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=ba;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=$;break;case pd:case md:case gd:ce=vr;break;case yd:ce=Je;break;case"scroll":ce=fu;break;case"wheel":ce=qe;break;case"copy":case"cut":case"paste":ce=Na;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=w}var ge=(n&4)!==0,pt=!ge&&t==="scroll",O=ge?K!==null?K+"Capture":null:K;ge=[];for(var P=U,F;P!==null;){F=P;var ne=F.stateNode;if(F.tag===5&&ne!==null&&(F=ne,O!==null&&(ne=ft(P,O),ne!=null&&ge.push(vo(P,ne,F)))),pt)break;P=P.return}0<ge.length&&(K=new ce(K,pe,null,o,G),J.push({event:K,listeners:ge}))}}if((n&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",ce=t==="mouseout"||t==="pointerout",K&&o!==cs&&(pe=o.relatedTarget||o.fromElement)&&(Ts(pe)||pe[_r]))break e;if((ce||K)&&(K=G.window===G?G:(K=G.ownerDocument)?K.defaultView||K.parentWindow:window,ce?(pe=o.relatedTarget||o.toElement,ce=U,pe=pe?Ts(pe):null,pe!==null&&(pt=Vn(pe),pe!==pt||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(ce=null,pe=U),ce!==pe)){if(ge=oi,ne="onMouseLeave",O="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(ge=w,ne="onPointerLeave",O="onPointerEnter",P="pointer"),pt=ce==null?K:gi(ce),F=pe==null?K:gi(pe),K=new ge(ne,P+"leave",ce,o,G),K.target=pt,K.relatedTarget=F,ne=null,Ts(G)===U&&(ge=new ge(O,P+"enter",pe,o,G),ge.target=F,ge.relatedTarget=pt,ne=ge),pt=ne,ce&&pe)t:{for(ge=ce,O=pe,P=0,F=ge;F;F=pi(F))P++;for(F=0,ne=O;ne;ne=pi(ne))F++;for(;0<P-F;)ge=pi(ge),P--;for(;0<F-P;)O=pi(O),F--;for(;P--;){if(ge===O||O!==null&&ge===O.alternate)break t;ge=pi(ge),O=pi(O)}ge=null}else ge=null;ce!==null&&Td(J,K,ce,ge,!1),pe!==null&&pt!==null&&Td(J,pt,pe,ge,!0)}}e:{if(K=U?gi(U):window,ce=K.nodeName&&K.nodeName.toLowerCase(),ce==="select"||ce==="input"&&K.type==="file")var _e=Jg;else if(nd(K))if(sd)_e=ny;else{_e=ey;var Se=Zg}else(ce=K.nodeName)&&ce.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(_e=ty);if(_e&&(_e=_e(t,U))){rd(J,_e,o,G);break e}Se&&Se(t,K,U),t==="focusout"&&(Se=K._wrapperState)&&Se.controlled&&K.type==="number"&&Pn(K,"number",K.value)}switch(Se=U?gi(U):window,t){case"focusin":(nd(Se)||Se.contentEditable==="true")&&(di=Se,yu=U,mo=null);break;case"focusout":mo=yu=di=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,dd(J,o,G);break;case"selectionchange":if(iy)break;case"keydown":case"keyup":dd(J,o,G)}var ke;if(gt)e:{switch(t){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else hi?ed(t,o)&&(Ne="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Ne="onCompositionStart");Ne&&(Es&&o.locale!=="ko"&&(hi||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&hi&&(ke=ao()):(hn=G,ni="value"in hn?hn.value:hn.textContent,hi=!0)),Se=Oa(U,Ne),0<Se.length&&(Ne=new co(Ne,t,null,o,G),J.push({event:Ne,listeners:Se}),ke?Ne.data=ke:(ke=td(o),ke!==null&&(Ne.data=ke)))),(ke=dn?Kg(t,o):Gg(t,o))&&(U=Oa(U,"onBeforeInput"),0<U.length&&(G=new co("onBeforeInput","beforeinput",null,o,G),J.push({event:G,listeners:U}),G.data=ke))}wd(J,n)})}function vo(t,n,o){return{instance:t,listener:n,currentTarget:o}}function Oa(t,n){for(var o=n+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=ft(t,o),p!=null&&u.unshift(vo(t,p,h)),p=ft(t,n),p!=null&&u.push(vo(t,p,h))),t=t.return}return u}function pi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Td(t,n,o,u,h){for(var p=n._reactName,_=[];o!==null&&o!==u;){var k=o,C=k.alternate,U=k.stateNode;if(C!==null&&C===u)break;k.tag===5&&U!==null&&(k=U,h?(C=ft(o,p),C!=null&&_.unshift(vo(o,C,k))):h||(C=ft(o,p),C!=null&&_.push(vo(o,C,k)))),o=o.return}_.length!==0&&t.push({event:n,listeners:_})}var uy=/\r\n?/g,cy=/\u0000|\uFFFD/g;function Sd(t){return(typeof t=="string"?t:""+t).replace(uy,`
`).replace(cy,"")}function Fa(t,n,o){if(n=Sd(n),Sd(t)!==n&&o)throw Error(r(425))}function Ua(){}var Su=null,ku=null;function Iu(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var bu=typeof setTimeout=="function"?setTimeout:void 0,hy=typeof clearTimeout=="function"?clearTimeout:void 0,kd=typeof Promise=="function"?Promise:void 0,dy=typeof queueMicrotask=="function"?queueMicrotask:typeof kd<"u"?function(t){return kd.resolve(null).then(t).catch(fy)}:bu;function fy(t){setTimeout(function(){throw t})}function Au(t,n){var o=n,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),Un(n);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);Un(n)}function $r(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function Id(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return t;n--}else o==="/$"&&n++}t=t.previousSibling}return null}var mi=Math.random().toString(36).slice(2),nr="__reactFiber$"+mi,_o="__reactProps$"+mi,_r="__reactContainer$"+mi,Cu="__reactEvents$"+mi,py="__reactListeners$"+mi,my="__reactHandles$"+mi;function Ts(t){var n=t[nr];if(n)return n;for(var o=t.parentNode;o;){if(n=o[_r]||o[nr]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(t=Id(t);t!==null;){if(o=t[nr])return o;t=Id(t)}return n}t=o,o=t.parentNode}return null}function xo(t){return t=t[nr]||t[_r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function za(t){return t[_o]||null}var Nu=[],yi=-1;function qr(t){return{current:t}}function it(t){0>yi||(t.current=Nu[yi],Nu[yi]=null,yi--)}function rt(t,n){yi++,Nu[yi]=t.current,t.current=n}var Hr={},Ot=qr(Hr),Zt=qr(!1),Ss=Hr;function vi(t,n){var o=t.type.contextTypes;if(!o)return Hr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===n)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=n[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=h),h}function en(t){return t=t.childContextTypes,t!=null}function Ba(){it(Zt),it(Ot)}function bd(t,n,o){if(Ot.current!==Hr)throw Error(r(168));rt(Ot,n),rt(Zt,o)}function Ad(t,n,o){var u=t.stateNode;if(n=n.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in n))throw Error(r(108,Re(t)||"Unknown",h));return le({},o,u)}function $a(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hr,Ss=Ot.current,rt(Ot,t),rt(Zt,Zt.current),!0}function Cd(t,n,o){var u=t.stateNode;if(!u)throw Error(r(169));o?(t=Ad(t,n,Ss),u.__reactInternalMemoizedMergedChildContext=t,it(Zt),it(Ot),rt(Ot,t)):it(Zt),rt(Zt,o)}var xr=null,qa=!1,Ru=!1;function Nd(t){xr===null?xr=[t]:xr.push(t)}function gy(t){qa=!0,Nd(t)}function Wr(){if(!Ru&&xr!==null){Ru=!0;var t=0,n=$e;try{var o=xr;for($e=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}xr=null,qa=!1}catch(h){throw xr!==null&&(xr=xr.slice(t+1)),Xs(ms,Wr),h}finally{$e=n,Ru=!1}}return null}var _i=[],xi=0,Ha=null,Wa=0,Tn=[],Sn=0,ks=null,wr=1,Er="";function Is(t,n){_i[xi++]=Wa,_i[xi++]=Ha,Ha=t,Wa=n}function Rd(t,n,o){Tn[Sn++]=wr,Tn[Sn++]=Er,Tn[Sn++]=ks,ks=t;var u=wr;t=Er;var h=32-Wt(u)-1;u&=~(1<<h),o+=1;var p=32-Wt(n)+h;if(30<p){var _=h-h%5;p=(u&(1<<_)-1).toString(32),u>>=_,h-=_,wr=1<<32-Wt(n)+h|o<<h|u,Er=p+t}else wr=1<<p|o<<h|u,Er=t}function Pu(t){t.return!==null&&(Is(t,1),Rd(t,1,0))}function ju(t){for(;t===Ha;)Ha=_i[--xi],_i[xi]=null,Wa=_i[--xi],_i[xi]=null;for(;t===ks;)ks=Tn[--Sn],Tn[Sn]=null,Er=Tn[--Sn],Tn[Sn]=null,wr=Tn[--Sn],Tn[Sn]=null}var fn=null,pn=null,at=!1,$n=null;function Pd(t,n){var o=An(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=t,n=t.deletions,n===null?(t.deletions=[o],t.flags|=16):n.push(o)}function jd(t,n){switch(t.tag){case 5:var o=t.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,fn=t,pn=$r(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,fn=t,pn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=ks!==null?{id:wr,overflow:Er}:null,t.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=An(18,null,null,0),o.stateNode=n,o.return=t,t.child=o,fn=t,pn=null,!0):!1;default:return!1}}function Du(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vu(t){if(at){var n=pn;if(n){var o=n;if(!jd(t,n)){if(Du(t))throw Error(r(418));n=$r(o.nextSibling);var u=fn;n&&jd(t,n)?Pd(u,o):(t.flags=t.flags&-4097|2,at=!1,fn=t)}}else{if(Du(t))throw Error(r(418));t.flags=t.flags&-4097|2,at=!1,fn=t}}}function Dd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fn=t}function Qa(t){if(t!==fn)return!1;if(!at)return Dd(t),at=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!Iu(t.type,t.memoizedProps)),n&&(n=pn)){if(Du(t))throw Vd(),Error(r(418));for(;n;)Pd(t,n),n=$r(n.nextSibling)}if(Dd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(n===0){pn=$r(t.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}t=t.nextSibling}pn=null}}else pn=fn?$r(t.stateNode.nextSibling):null;return!0}function Vd(){for(var t=pn;t;)t=$r(t.nextSibling)}function wi(){pn=fn=null,at=!1}function Lu(t){$n===null?$n=[t]:$n.push(t)}var yy=xe.ReactCurrentBatchConfig;function wo(t,n,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(r(309));var u=o.stateNode}if(!u)throw Error(r(147,t));var h=u,p=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===p?n.ref:(n=function(_){var k=h.refs;_===null?delete k[p]:k[p]=_},n._stringRef=p,n)}if(typeof t!="string")throw Error(r(284));if(!o._owner)throw Error(r(290,t))}return t}function Ka(t,n){throw t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function Ld(t){var n=t._init;return n(t._payload)}function Md(t){function n(O,P){if(t){var F=O.deletions;F===null?(O.deletions=[P],O.flags|=16):F.push(P)}}function o(O,P){if(!t)return null;for(;P!==null;)n(O,P),P=P.sibling;return null}function u(O,P){for(O=new Map;P!==null;)P.key!==null?O.set(P.key,P):O.set(P.index,P),P=P.sibling;return O}function h(O,P){return O=es(O,P),O.index=0,O.sibling=null,O}function p(O,P,F){return O.index=F,t?(F=O.alternate,F!==null?(F=F.index,F<P?(O.flags|=2,P):F):(O.flags|=2,P)):(O.flags|=1048576,P)}function _(O){return t&&O.alternate===null&&(O.flags|=2),O}function k(O,P,F,ne){return P===null||P.tag!==6?(P=bc(F,O.mode,ne),P.return=O,P):(P=h(P,F),P.return=O,P)}function C(O,P,F,ne){var _e=F.type;return _e===A?G(O,P,F.props.children,ne,F.key):P!==null&&(P.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Le&&Ld(_e)===P.type)?(ne=h(P,F.props),ne.ref=wo(O,P,F),ne.return=O,ne):(ne=vl(F.type,F.key,F.props,null,O.mode,ne),ne.ref=wo(O,P,F),ne.return=O,ne)}function U(O,P,F,ne){return P===null||P.tag!==4||P.stateNode.containerInfo!==F.containerInfo||P.stateNode.implementation!==F.implementation?(P=Ac(F,O.mode,ne),P.return=O,P):(P=h(P,F.children||[]),P.return=O,P)}function G(O,P,F,ne,_e){return P===null||P.tag!==7?(P=Ds(F,O.mode,ne,_e),P.return=O,P):(P=h(P,F),P.return=O,P)}function J(O,P,F){if(typeof P=="string"&&P!==""||typeof P=="number")return P=bc(""+P,O.mode,F),P.return=O,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ee:return F=vl(P.type,P.key,P.props,null,O.mode,F),F.ref=wo(O,null,P),F.return=O,F;case me:return P=Ac(P,O.mode,F),P.return=O,P;case Le:var ne=P._init;return J(O,ne(P._payload),F)}if(re(P)||fe(P))return P=Ds(P,O.mode,F,null),P.return=O,P;Ka(O,P)}return null}function K(O,P,F,ne){var _e=P!==null?P.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return _e!==null?null:k(O,P,""+F,ne);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Ee:return F.key===_e?C(O,P,F,ne):null;case me:return F.key===_e?U(O,P,F,ne):null;case Le:return _e=F._init,K(O,P,_e(F._payload),ne)}if(re(F)||fe(F))return _e!==null?null:G(O,P,F,ne,null);Ka(O,F)}return null}function ce(O,P,F,ne,_e){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return O=O.get(F)||null,k(P,O,""+ne,_e);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Ee:return O=O.get(ne.key===null?F:ne.key)||null,C(P,O,ne,_e);case me:return O=O.get(ne.key===null?F:ne.key)||null,U(P,O,ne,_e);case Le:var Se=ne._init;return ce(O,P,F,Se(ne._payload),_e)}if(re(ne)||fe(ne))return O=O.get(F)||null,G(P,O,ne,_e,null);Ka(P,ne)}return null}function pe(O,P,F,ne){for(var _e=null,Se=null,ke=P,Ne=P=0,bt=null;ke!==null&&Ne<F.length;Ne++){ke.index>Ne?(bt=ke,ke=null):bt=ke.sibling;var Ge=K(O,ke,F[Ne],ne);if(Ge===null){ke===null&&(ke=bt);break}t&&ke&&Ge.alternate===null&&n(O,ke),P=p(Ge,P,Ne),Se===null?_e=Ge:Se.sibling=Ge,Se=Ge,ke=bt}if(Ne===F.length)return o(O,ke),at&&Is(O,Ne),_e;if(ke===null){for(;Ne<F.length;Ne++)ke=J(O,F[Ne],ne),ke!==null&&(P=p(ke,P,Ne),Se===null?_e=ke:Se.sibling=ke,Se=ke);return at&&Is(O,Ne),_e}for(ke=u(O,ke);Ne<F.length;Ne++)bt=ce(ke,O,Ne,F[Ne],ne),bt!==null&&(t&&bt.alternate!==null&&ke.delete(bt.key===null?Ne:bt.key),P=p(bt,P,Ne),Se===null?_e=bt:Se.sibling=bt,Se=bt);return t&&ke.forEach(function(ts){return n(O,ts)}),at&&Is(O,Ne),_e}function ge(O,P,F,ne){var _e=fe(F);if(typeof _e!="function")throw Error(r(150));if(F=_e.call(F),F==null)throw Error(r(151));for(var Se=_e=null,ke=P,Ne=P=0,bt=null,Ge=F.next();ke!==null&&!Ge.done;Ne++,Ge=F.next()){ke.index>Ne?(bt=ke,ke=null):bt=ke.sibling;var ts=K(O,ke,Ge.value,ne);if(ts===null){ke===null&&(ke=bt);break}t&&ke&&ts.alternate===null&&n(O,ke),P=p(ts,P,Ne),Se===null?_e=ts:Se.sibling=ts,Se=ts,ke=bt}if(Ge.done)return o(O,ke),at&&Is(O,Ne),_e;if(ke===null){for(;!Ge.done;Ne++,Ge=F.next())Ge=J(O,Ge.value,ne),Ge!==null&&(P=p(Ge,P,Ne),Se===null?_e=Ge:Se.sibling=Ge,Se=Ge);return at&&Is(O,Ne),_e}for(ke=u(O,ke);!Ge.done;Ne++,Ge=F.next())Ge=ce(ke,O,Ne,Ge.value,ne),Ge!==null&&(t&&Ge.alternate!==null&&ke.delete(Ge.key===null?Ne:Ge.key),P=p(Ge,P,Ne),Se===null?_e=Ge:Se.sibling=Ge,Se=Ge);return t&&ke.forEach(function(Yy){return n(O,Yy)}),at&&Is(O,Ne),_e}function pt(O,P,F,ne){if(typeof F=="object"&&F!==null&&F.type===A&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Ee:e:{for(var _e=F.key,Se=P;Se!==null;){if(Se.key===_e){if(_e=F.type,_e===A){if(Se.tag===7){o(O,Se.sibling),P=h(Se,F.props.children),P.return=O,O=P;break e}}else if(Se.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Le&&Ld(_e)===Se.type){o(O,Se.sibling),P=h(Se,F.props),P.ref=wo(O,Se,F),P.return=O,O=P;break e}o(O,Se);break}else n(O,Se);Se=Se.sibling}F.type===A?(P=Ds(F.props.children,O.mode,ne,F.key),P.return=O,O=P):(ne=vl(F.type,F.key,F.props,null,O.mode,ne),ne.ref=wo(O,P,F),ne.return=O,O=ne)}return _(O);case me:e:{for(Se=F.key;P!==null;){if(P.key===Se)if(P.tag===4&&P.stateNode.containerInfo===F.containerInfo&&P.stateNode.implementation===F.implementation){o(O,P.sibling),P=h(P,F.children||[]),P.return=O,O=P;break e}else{o(O,P);break}else n(O,P);P=P.sibling}P=Ac(F,O.mode,ne),P.return=O,O=P}return _(O);case Le:return Se=F._init,pt(O,P,Se(F._payload),ne)}if(re(F))return pe(O,P,F,ne);if(fe(F))return ge(O,P,F,ne);Ka(O,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,P!==null&&P.tag===6?(o(O,P.sibling),P=h(P,F),P.return=O,O=P):(o(O,P),P=bc(F,O.mode,ne),P.return=O,O=P),_(O)):o(O,P)}return pt}var Ei=Md(!0),Od=Md(!1),Ga=qr(null),Ya=null,Ti=null,Mu=null;function Ou(){Mu=Ti=Ya=null}function Fu(t){var n=Ga.current;it(Ga),t._currentValue=n}function Uu(t,n,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,u!==null&&(u.childLanes|=n)):u!==null&&(u.childLanes&n)!==n&&(u.childLanes|=n),t===o)break;t=t.return}}function Si(t,n){Ya=t,Mu=Ti=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(tn=!0),t.firstContext=null)}function kn(t){var n=t._currentValue;if(Mu!==t)if(t={context:t,memoizedValue:n,next:null},Ti===null){if(Ya===null)throw Error(r(308));Ti=t,Ya.dependencies={lanes:0,firstContext:t}}else Ti=Ti.next=t;return n}var bs=null;function zu(t){bs===null?bs=[t]:bs.push(t)}function Fd(t,n,o,u){var h=n.interleaved;return h===null?(o.next=o,zu(n)):(o.next=h.next,h.next=o),n.interleaved=o,Tr(t,u)}function Tr(t,n){t.lanes|=n;var o=t.alternate;for(o!==null&&(o.lanes|=n),o=t,t=t.return;t!==null;)t.childLanes|=n,o=t.alternate,o!==null&&(o.childLanes|=n),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Qr=!1;function Bu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ud(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sr(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Kr(t,n,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Qe&2)!==0){var h=u.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),u.pending=n,Tr(t,o)}return h=u.interleaved,h===null?(n.next=n,zu(u)):(n.next=h.next,h.next=n),u.interleaved=n,Tr(t,o)}function Xa(t,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var u=n.lanes;u&=t.pendingLanes,o|=u,n.lanes=o,Mr(t,o)}}function zd(t,n){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?h=p=n:p=p.next=n}else h=p=n;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=n:t.next=n,o.lastBaseUpdate=n}function Ja(t,n,o,u){var h=t.updateQueue;Qr=!1;var p=h.firstBaseUpdate,_=h.lastBaseUpdate,k=h.shared.pending;if(k!==null){h.shared.pending=null;var C=k,U=C.next;C.next=null,_===null?p=U:_.next=U,_=C;var G=t.alternate;G!==null&&(G=G.updateQueue,k=G.lastBaseUpdate,k!==_&&(k===null?G.firstBaseUpdate=U:k.next=U,G.lastBaseUpdate=C))}if(p!==null){var J=h.baseState;_=0,G=U=C=null,k=p;do{var K=k.lane,ce=k.eventTime;if((u&K)===K){G!==null&&(G=G.next={eventTime:ce,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var pe=t,ge=k;switch(K=n,ce=o,ge.tag){case 1:if(pe=ge.payload,typeof pe=="function"){J=pe.call(ce,J,K);break e}J=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=ge.payload,K=typeof pe=="function"?pe.call(ce,J,K):pe,K==null)break e;J=le({},J,K);break e;case 2:Qr=!0}}k.callback!==null&&k.lane!==0&&(t.flags|=64,K=h.effects,K===null?h.effects=[k]:K.push(k))}else ce={eventTime:ce,lane:K,tag:k.tag,payload:k.payload,callback:k.callback,next:null},G===null?(U=G=ce,C=J):G=G.next=ce,_|=K;if(k=k.next,k===null){if(k=h.shared.pending,k===null)break;K=k,k=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);if(G===null&&(C=J),h.baseState=C,h.firstBaseUpdate=U,h.lastBaseUpdate=G,n=h.shared.interleaved,n!==null){h=n;do _|=h.lane,h=h.next;while(h!==n)}else p===null&&(h.shared.lanes=0);Ns|=_,t.lanes=_,t.memoizedState=J}}function Bd(t,n,o){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var u=t[n],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(r(191,h));h.call(u)}}}var Eo={},rr=qr(Eo),To=qr(Eo),So=qr(Eo);function As(t){if(t===Eo)throw Error(r(174));return t}function $u(t,n){switch(rt(So,n),rt(To,t),rt(rr,Eo),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Q(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=Q(n,t)}it(rr),rt(rr,n)}function ki(){it(rr),it(To),it(So)}function $d(t){As(So.current);var n=As(rr.current),o=Q(n,t.type);n!==o&&(rt(To,t),rt(rr,o))}function qu(t){To.current===t&&(it(rr),it(To))}var lt=qr(0);function Za(t){for(var n=t;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Hu=[];function Wu(){for(var t=0;t<Hu.length;t++)Hu[t]._workInProgressVersionPrimary=null;Hu.length=0}var el=xe.ReactCurrentDispatcher,Qu=xe.ReactCurrentBatchConfig,Cs=0,ut=null,xt=null,kt=null,tl=!1,ko=!1,Io=0,vy=0;function Ft(){throw Error(r(321))}function Ku(t,n){if(n===null)return!1;for(var o=0;o<n.length&&o<t.length;o++)if(!Bn(t[o],n[o]))return!1;return!0}function Gu(t,n,o,u,h,p){if(Cs=p,ut=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,el.current=t===null||t.memoizedState===null?Ey:Ty,t=o(u,h),ko){p=0;do{if(ko=!1,Io=0,25<=p)throw Error(r(301));p+=1,kt=xt=null,n.updateQueue=null,el.current=Sy,t=o(u,h)}while(ko)}if(el.current=sl,n=xt!==null&&xt.next!==null,Cs=0,kt=xt=ut=null,tl=!1,n)throw Error(r(300));return t}function Yu(){var t=Io!==0;return Io=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?ut.memoizedState=kt=t:kt=kt.next=t,kt}function In(){if(xt===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var n=kt===null?ut.memoizedState:kt.next;if(n!==null)kt=n,xt=t;else{if(t===null)throw Error(r(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},kt===null?ut.memoizedState=kt=t:kt=kt.next=t}return kt}function bo(t,n){return typeof n=="function"?n(t):n}function Xu(t){var n=In(),o=n.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=t;var u=xt,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var _=h.next;h.next=p.next,p.next=_}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var k=_=null,C=null,U=p;do{var G=U.lane;if((Cs&G)===G)C!==null&&(C=C.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),u=U.hasEagerState?U.eagerState:t(u,U.action);else{var J={lane:G,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};C===null?(k=C=J,_=u):C=C.next=J,ut.lanes|=G,Ns|=G}U=U.next}while(U!==null&&U!==p);C===null?_=u:C.next=k,Bn(u,n.memoizedState)||(tn=!0),n.memoizedState=u,n.baseState=_,n.baseQueue=C,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,ut.lanes|=p,Ns|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function Ju(t){var n=In(),o=n.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=n.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do p=t(p,_.action),_=_.next;while(_!==h);Bn(p,n.memoizedState)||(tn=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),o.lastRenderedState=p}return[p,u]}function qd(){}function Hd(t,n){var o=ut,u=In(),h=n(),p=!Bn(u.memoizedState,h);if(p&&(u.memoizedState=h,tn=!0),u=u.queue,Zu(Kd.bind(null,o,u,t),[t]),u.getSnapshot!==n||p||kt!==null&&kt.memoizedState.tag&1){if(o.flags|=2048,Ao(9,Qd.bind(null,o,u,h,n),void 0,null),It===null)throw Error(r(349));(Cs&30)!==0||Wd(o,n,h)}return h}function Wd(t,n,o){t.flags|=16384,t={getSnapshot:n,value:o},n=ut.updateQueue,n===null?(n={lastEffect:null,stores:null},ut.updateQueue=n,n.stores=[t]):(o=n.stores,o===null?n.stores=[t]:o.push(t))}function Qd(t,n,o,u){n.value=o,n.getSnapshot=u,Gd(n)&&Yd(t)}function Kd(t,n,o){return o(function(){Gd(n)&&Yd(t)})}function Gd(t){var n=t.getSnapshot;t=t.value;try{var o=n();return!Bn(t,o)}catch{return!0}}function Yd(t){var n=Tr(t,1);n!==null&&Qn(n,t,1,-1)}function Xd(t){var n=sr();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:t},n.queue=t,t=t.dispatch=wy.bind(null,ut,t),[n.memoizedState,t]}function Ao(t,n,o,u){return t={tag:t,create:n,destroy:o,deps:u,next:null},n=ut.updateQueue,n===null?(n={lastEffect:null,stores:null},ut.updateQueue=n,n.lastEffect=t.next=t):(o=n.lastEffect,o===null?n.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,n.lastEffect=t)),t}function Jd(){return In().memoizedState}function nl(t,n,o,u){var h=sr();ut.flags|=t,h.memoizedState=Ao(1|n,o,void 0,u===void 0?null:u)}function rl(t,n,o,u){var h=In();u=u===void 0?null:u;var p=void 0;if(xt!==null){var _=xt.memoizedState;if(p=_.destroy,u!==null&&Ku(u,_.deps)){h.memoizedState=Ao(n,o,p,u);return}}ut.flags|=t,h.memoizedState=Ao(1|n,o,p,u)}function Zd(t,n){return nl(8390656,8,t,n)}function Zu(t,n){return rl(2048,8,t,n)}function ef(t,n){return rl(4,2,t,n)}function tf(t,n){return rl(4,4,t,n)}function nf(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function rf(t,n,o){return o=o!=null?o.concat([t]):null,rl(4,4,nf.bind(null,n,t),o)}function ec(){}function sf(t,n){var o=In();n=n===void 0?null:n;var u=o.memoizedState;return u!==null&&n!==null&&Ku(n,u[1])?u[0]:(o.memoizedState=[t,n],t)}function of(t,n){var o=In();n=n===void 0?null:n;var u=o.memoizedState;return u!==null&&n!==null&&Ku(n,u[1])?u[0]:(t=t(),o.memoizedState=[t,n],t)}function af(t,n,o){return(Cs&21)===0?(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=o):(Bn(o,n)||(o=vs(),ut.lanes|=o,Ns|=o,t.baseState=!0),n)}function _y(t,n){var o=$e;$e=o!==0&&4>o?o:4,t(!0);var u=Qu.transition;Qu.transition={};try{t(!1),n()}finally{$e=o,Qu.transition=u}}function lf(){return In().memoizedState}function xy(t,n,o){var u=Jr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},uf(t))cf(n,o);else if(o=Fd(t,n,o,u),o!==null){var h=Gt();Qn(o,t,u,h),hf(o,n,u)}}function wy(t,n,o){var u=Jr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(uf(t))cf(n,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var _=n.lastRenderedState,k=p(_,o);if(h.hasEagerState=!0,h.eagerState=k,Bn(k,_)){var C=n.interleaved;C===null?(h.next=h,zu(n)):(h.next=C.next,C.next=h),n.interleaved=h;return}}catch{}finally{}o=Fd(t,n,h,u),o!==null&&(h=Gt(),Qn(o,t,u,h),hf(o,n,u))}}function uf(t){var n=t.alternate;return t===ut||n!==null&&n===ut}function cf(t,n){ko=tl=!0;var o=t.pending;o===null?n.next=n:(n.next=o.next,o.next=n),t.pending=n}function hf(t,n,o){if((o&4194240)!==0){var u=n.lanes;u&=t.pendingLanes,o|=u,n.lanes=o,Mr(t,o)}}var sl={readContext:kn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},Ey={readContext:kn,useCallback:function(t,n){return sr().memoizedState=[t,n===void 0?null:n],t},useContext:kn,useEffect:Zd,useImperativeHandle:function(t,n,o){return o=o!=null?o.concat([t]):null,nl(4194308,4,nf.bind(null,n,t),o)},useLayoutEffect:function(t,n){return nl(4194308,4,t,n)},useInsertionEffect:function(t,n){return nl(4,2,t,n)},useMemo:function(t,n){var o=sr();return n=n===void 0?null:n,t=t(),o.memoizedState=[t,n],t},useReducer:function(t,n,o){var u=sr();return n=o!==void 0?o(n):n,u.memoizedState=u.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},u.queue=t,t=t.dispatch=xy.bind(null,ut,t),[u.memoizedState,t]},useRef:function(t){var n=sr();return t={current:t},n.memoizedState=t},useState:Xd,useDebugValue:ec,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=Xd(!1),n=t[0];return t=_y.bind(null,t[1]),sr().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,o){var u=ut,h=sr();if(at){if(o===void 0)throw Error(r(407));o=o()}else{if(o=n(),It===null)throw Error(r(349));(Cs&30)!==0||Wd(u,n,o)}h.memoizedState=o;var p={value:o,getSnapshot:n};return h.queue=p,Zd(Kd.bind(null,u,p,t),[t]),u.flags|=2048,Ao(9,Qd.bind(null,u,p,o,n),void 0,null),o},useId:function(){var t=sr(),n=It.identifierPrefix;if(at){var o=Er,u=wr;o=(u&~(1<<32-Wt(u)-1)).toString(32)+o,n=":"+n+"R"+o,o=Io++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=vy++,n=":"+n+"r"+o.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},Ty={readContext:kn,useCallback:sf,useContext:kn,useEffect:Zu,useImperativeHandle:rf,useInsertionEffect:ef,useLayoutEffect:tf,useMemo:of,useReducer:Xu,useRef:Jd,useState:function(){return Xu(bo)},useDebugValue:ec,useDeferredValue:function(t){var n=In();return af(n,xt.memoizedState,t)},useTransition:function(){var t=Xu(bo)[0],n=In().memoizedState;return[t,n]},useMutableSource:qd,useSyncExternalStore:Hd,useId:lf,unstable_isNewReconciler:!1},Sy={readContext:kn,useCallback:sf,useContext:kn,useEffect:Zu,useImperativeHandle:rf,useInsertionEffect:ef,useLayoutEffect:tf,useMemo:of,useReducer:Ju,useRef:Jd,useState:function(){return Ju(bo)},useDebugValue:ec,useDeferredValue:function(t){var n=In();return xt===null?n.memoizedState=t:af(n,xt.memoizedState,t)},useTransition:function(){var t=Ju(bo)[0],n=In().memoizedState;return[t,n]},useMutableSource:qd,useSyncExternalStore:Hd,useId:lf,unstable_isNewReconciler:!1};function qn(t,n){if(t&&t.defaultProps){n=le({},n),t=t.defaultProps;for(var o in t)n[o]===void 0&&(n[o]=t[o]);return n}return n}function tc(t,n,o,u){n=t.memoizedState,o=o(u,n),o=o==null?n:le({},n,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var il={isMounted:function(t){return(t=t._reactInternals)?Vn(t)===t:!1},enqueueSetState:function(t,n,o){t=t._reactInternals;var u=Gt(),h=Jr(t),p=Sr(u,h);p.payload=n,o!=null&&(p.callback=o),n=Kr(t,p,h),n!==null&&(Qn(n,t,h,u),Xa(n,t,h))},enqueueReplaceState:function(t,n,o){t=t._reactInternals;var u=Gt(),h=Jr(t),p=Sr(u,h);p.tag=1,p.payload=n,o!=null&&(p.callback=o),n=Kr(t,p,h),n!==null&&(Qn(n,t,h,u),Xa(n,t,h))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var o=Gt(),u=Jr(t),h=Sr(o,u);h.tag=2,n!=null&&(h.callback=n),n=Kr(t,h,u),n!==null&&(Qn(n,t,u,o),Xa(n,t,u))}};function df(t,n,o,u,h,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,_):n.prototype&&n.prototype.isPureReactComponent?!po(o,u)||!po(h,p):!0}function ff(t,n,o){var u=!1,h=Hr,p=n.contextType;return typeof p=="object"&&p!==null?p=kn(p):(h=en(n)?Ss:Ot.current,u=n.contextTypes,p=(u=u!=null)?vi(t,h):Hr),n=new n(o,p),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=il,t.stateNode=n,n._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),n}function pf(t,n,o,u){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,u),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,u),n.state!==t&&il.enqueueReplaceState(n,n.state,null)}function nc(t,n,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},Bu(t);var p=n.contextType;typeof p=="object"&&p!==null?h.context=kn(p):(p=en(n)?Ss:Ot.current,h.context=vi(t,p)),h.state=t.memoizedState,p=n.getDerivedStateFromProps,typeof p=="function"&&(tc(t,n,p,o),h.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(n=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),n!==h.state&&il.enqueueReplaceState(h,h.state,null),Ja(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Ii(t,n){try{var o="",u=n;do o+=Ce(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:n,stack:h,digest:null}}function rc(t,n,o){return{value:t,source:null,stack:o??null,digest:n??null}}function sc(t,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var ky=typeof WeakMap=="function"?WeakMap:Map;function mf(t,n,o){o=Sr(-1,o),o.tag=3,o.payload={element:null};var u=n.value;return o.callback=function(){dl||(dl=!0,_c=u),sc(t,n)},o}function gf(t,n,o){o=Sr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=n.value;o.payload=function(){return u(h)},o.callback=function(){sc(t,n)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){sc(t,n),typeof u!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var _=n.stack;this.componentDidCatch(n.value,{componentStack:_!==null?_:""})}),o}function yf(t,n,o){var u=t.pingCache;if(u===null){u=t.pingCache=new ky;var h=new Set;u.set(n,h)}else h=u.get(n),h===void 0&&(h=new Set,u.set(n,h));h.has(o)||(h.add(o),t=Fy.bind(null,t,n,o),n.then(t,t))}function vf(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function _f(t,n,o,u,h){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=Sr(-1,1),n.tag=2,Kr(o,n,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var Iy=xe.ReactCurrentOwner,tn=!1;function Kt(t,n,o,u){n.child=t===null?Od(n,null,o,u):Ei(n,t.child,o,u)}function xf(t,n,o,u,h){o=o.render;var p=n.ref;return Si(n,h),u=Gu(t,n,o,u,p,h),o=Yu(),t!==null&&!tn?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~h,kr(t,n,h)):(at&&o&&Pu(n),n.flags|=1,Kt(t,n,u,h),n.child)}function wf(t,n,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Ic(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=p,Ef(t,n,p,u,h)):(t=vl(o.type,null,u,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(p=t.child,(t.lanes&h)===0){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:po,o(_,u)&&t.ref===n.ref)return kr(t,n,h)}return n.flags|=1,t=es(p,u),t.ref=n.ref,t.return=n,n.child=t}function Ef(t,n,o,u,h){if(t!==null){var p=t.memoizedProps;if(po(p,u)&&t.ref===n.ref)if(tn=!1,n.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(tn=!0);else return n.lanes=t.lanes,kr(t,n,h)}return ic(t,n,o,u,h)}function Tf(t,n,o){var u=n.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Ai,mn),mn|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,rt(Ai,mn),mn|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,rt(Ai,mn),mn|=u}else p!==null?(u=p.baseLanes|o,n.memoizedState=null):u=o,rt(Ai,mn),mn|=u;return Kt(t,n,h,o),n.child}function Sf(t,n){var o=n.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function ic(t,n,o,u,h){var p=en(o)?Ss:Ot.current;return p=vi(n,p),Si(n,h),o=Gu(t,n,o,u,p,h),u=Yu(),t!==null&&!tn?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~h,kr(t,n,h)):(at&&u&&Pu(n),n.flags|=1,Kt(t,n,o,h),n.child)}function kf(t,n,o,u,h){if(en(o)){var p=!0;$a(n)}else p=!1;if(Si(n,h),n.stateNode===null)al(t,n),ff(n,o,u),nc(n,o,u,h),u=!0;else if(t===null){var _=n.stateNode,k=n.memoizedProps;_.props=k;var C=_.context,U=o.contextType;typeof U=="object"&&U!==null?U=kn(U):(U=en(o)?Ss:Ot.current,U=vi(n,U));var G=o.getDerivedStateFromProps,J=typeof G=="function"||typeof _.getSnapshotBeforeUpdate=="function";J||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==u||C!==U)&&pf(n,_,u,U),Qr=!1;var K=n.memoizedState;_.state=K,Ja(n,u,_,h),C=n.memoizedState,k!==u||K!==C||Zt.current||Qr?(typeof G=="function"&&(tc(n,o,G,u),C=n.memoizedState),(k=Qr||df(n,o,k,u,K,C,U))?(J||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(n.flags|=4194308)):(typeof _.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=u,n.memoizedState=C),_.props=u,_.state=C,_.context=U,u=k):(typeof _.componentDidMount=="function"&&(n.flags|=4194308),u=!1)}else{_=n.stateNode,Ud(t,n),k=n.memoizedProps,U=n.type===n.elementType?k:qn(n.type,k),_.props=U,J=n.pendingProps,K=_.context,C=o.contextType,typeof C=="object"&&C!==null?C=kn(C):(C=en(o)?Ss:Ot.current,C=vi(n,C));var ce=o.getDerivedStateFromProps;(G=typeof ce=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==J||K!==C)&&pf(n,_,u,C),Qr=!1,K=n.memoizedState,_.state=K,Ja(n,u,_,h);var pe=n.memoizedState;k!==J||K!==pe||Zt.current||Qr?(typeof ce=="function"&&(tc(n,o,ce,u),pe=n.memoizedState),(U=Qr||df(n,o,U,u,K,pe,C)||!1)?(G||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,pe,C),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,pe,C)),typeof _.componentDidUpdate=="function"&&(n.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof _.componentDidUpdate!="function"||k===t.memoizedProps&&K===t.memoizedState||(n.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===t.memoizedProps&&K===t.memoizedState||(n.flags|=1024),n.memoizedProps=u,n.memoizedState=pe),_.props=u,_.state=pe,_.context=C,u=U):(typeof _.componentDidUpdate!="function"||k===t.memoizedProps&&K===t.memoizedState||(n.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===t.memoizedProps&&K===t.memoizedState||(n.flags|=1024),u=!1)}return oc(t,n,o,u,p,h)}function oc(t,n,o,u,h,p){Sf(t,n);var _=(n.flags&128)!==0;if(!u&&!_)return h&&Cd(n,o,!1),kr(t,n,p);u=n.stateNode,Iy.current=n;var k=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return n.flags|=1,t!==null&&_?(n.child=Ei(n,t.child,null,p),n.child=Ei(n,null,k,p)):Kt(t,n,k,p),n.memoizedState=u.state,h&&Cd(n,o,!0),n.child}function If(t){var n=t.stateNode;n.pendingContext?bd(t,n.pendingContext,n.pendingContext!==n.context):n.context&&bd(t,n.context,!1),$u(t,n.containerInfo)}function bf(t,n,o,u,h){return wi(),Lu(h),n.flags|=256,Kt(t,n,o,u),n.child}var ac={dehydrated:null,treeContext:null,retryLane:0};function lc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Af(t,n,o){var u=n.pendingProps,h=lt.current,p=!1,_=(n.flags&128)!==0,k;if((k=_)||(k=t!==null&&t.memoizedState===null?!1:(h&2)!==0),k?(p=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),rt(lt,h&1),t===null)return Vu(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(_=u.children,t=u.fallback,p?(u=n.mode,p=n.child,_={mode:"hidden",children:_},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=_):p=_l(_,u,0,null),t=Ds(t,u,o,null),p.return=n,t.return=n,p.sibling=t,n.child=p,n.child.memoizedState=lc(o),n.memoizedState=ac,t):uc(n,_));if(h=t.memoizedState,h!==null&&(k=h.dehydrated,k!==null))return by(t,n,_,u,k,h,o);if(p){p=u.fallback,_=n.mode,h=t.child,k=h.sibling;var C={mode:"hidden",children:u.children};return(_&1)===0&&n.child!==h?(u=n.child,u.childLanes=0,u.pendingProps=C,n.deletions=null):(u=es(h,C),u.subtreeFlags=h.subtreeFlags&14680064),k!==null?p=es(k,p):(p=Ds(p,_,o,null),p.flags|=2),p.return=n,u.return=n,u.sibling=p,n.child=u,u=p,p=n.child,_=t.child.memoizedState,_=_===null?lc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~o,n.memoizedState=ac,u}return p=t.child,t=p.sibling,u=es(p,{mode:"visible",children:u.children}),(n.mode&1)===0&&(u.lanes=o),u.return=n,u.sibling=null,t!==null&&(o=n.deletions,o===null?(n.deletions=[t],n.flags|=16):o.push(t)),n.child=u,n.memoizedState=null,u}function uc(t,n){return n=_l({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function ol(t,n,o,u){return u!==null&&Lu(u),Ei(n,t.child,null,o),t=uc(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function by(t,n,o,u,h,p,_){if(o)return n.flags&256?(n.flags&=-257,u=rc(Error(r(422))),ol(t,n,_,u)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(p=u.fallback,h=n.mode,u=_l({mode:"visible",children:u.children},h,0,null),p=Ds(p,h,_,null),p.flags|=2,u.return=n,p.return=n,u.sibling=p,n.child=u,(n.mode&1)!==0&&Ei(n,t.child,null,_),n.child.memoizedState=lc(_),n.memoizedState=ac,p);if((n.mode&1)===0)return ol(t,n,_,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var k=u.dgst;return u=k,p=Error(r(419)),u=rc(p,u,void 0),ol(t,n,_,u)}if(k=(_&t.childLanes)!==0,tn||k){if(u=It,u!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|_))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,Tr(t,h),Qn(u,t,h,-1))}return kc(),u=rc(Error(r(421))),ol(t,n,_,u)}return h.data==="$?"?(n.flags|=128,n.child=t.child,n=Uy.bind(null,t),h._reactRetry=n,null):(t=p.treeContext,pn=$r(h.nextSibling),fn=n,at=!0,$n=null,t!==null&&(Tn[Sn++]=wr,Tn[Sn++]=Er,Tn[Sn++]=ks,wr=t.id,Er=t.overflow,ks=n),n=uc(n,u.children),n.flags|=4096,n)}function Cf(t,n,o){t.lanes|=n;var u=t.alternate;u!==null&&(u.lanes|=n),Uu(t.return,n,o)}function cc(t,n,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=n,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function Nf(t,n,o){var u=n.pendingProps,h=u.revealOrder,p=u.tail;if(Kt(t,n,u.children,o),u=lt.current,(u&2)!==0)u=u&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cf(t,o,n);else if(t.tag===19)Cf(t,o,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(rt(lt,u),(n.mode&1)===0)n.memoizedState=null;else switch(h){case"forwards":for(o=n.child,h=null;o!==null;)t=o.alternate,t!==null&&Za(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=n.child,n.child=null):(h=o.sibling,o.sibling=null),cc(n,!1,h,o,p);break;case"backwards":for(o=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&Za(t)===null){n.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}cc(n,!0,o,null,p);break;case"together":cc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function al(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function kr(t,n,o){if(t!==null&&(n.dependencies=t.dependencies),Ns|=n.lanes,(o&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,o=es(t,t.pendingProps),n.child=o,o.return=n;t.sibling!==null;)t=t.sibling,o=o.sibling=es(t,t.pendingProps),o.return=n;o.sibling=null}return n.child}function Ay(t,n,o){switch(n.tag){case 3:If(n),wi();break;case 5:$d(n);break;case 1:en(n.type)&&$a(n);break;case 4:$u(n,n.stateNode.containerInfo);break;case 10:var u=n.type._context,h=n.memoizedProps.value;rt(Ga,u._currentValue),u._currentValue=h;break;case 13:if(u=n.memoizedState,u!==null)return u.dehydrated!==null?(rt(lt,lt.current&1),n.flags|=128,null):(o&n.child.childLanes)!==0?Af(t,n,o):(rt(lt,lt.current&1),t=kr(t,n,o),t!==null?t.sibling:null);rt(lt,lt.current&1);break;case 19:if(u=(o&n.childLanes)!==0,(t.flags&128)!==0){if(u)return Nf(t,n,o);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),rt(lt,lt.current),u)break;return null;case 22:case 23:return n.lanes=0,Tf(t,n,o)}return kr(t,n,o)}var Rf,hc,Pf,jf;Rf=function(t,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},hc=function(){},Pf=function(t,n,o,u){var h=t.memoizedProps;if(h!==u){t=n.stateNode,As(rr.current);var p=null;switch(o){case"input":h=an(t,h),u=an(t,u),p=[];break;case"select":h=le({},h,{value:void 0}),u=le({},u,{value:void 0}),p=[];break;case"textarea":h=Me(t,h),u=Me(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Ua)}Ki(o,u);var _;o=null;for(U in h)if(!u.hasOwnProperty(U)&&h.hasOwnProperty(U)&&h[U]!=null)if(U==="style"){var k=h[U];for(_ in k)k.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(a.hasOwnProperty(U)?p||(p=[]):(p=p||[]).push(U,null));for(U in u){var C=u[U];if(k=h!=null?h[U]:void 0,u.hasOwnProperty(U)&&C!==k&&(C!=null||k!=null))if(U==="style")if(k){for(_ in k)!k.hasOwnProperty(_)||C&&C.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in C)C.hasOwnProperty(_)&&k[_]!==C[_]&&(o||(o={}),o[_]=C[_])}else o||(p||(p=[]),p.push(U,o)),o=C;else U==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,k=k?k.__html:void 0,C!=null&&k!==C&&(p=p||[]).push(U,C)):U==="children"?typeof C!="string"&&typeof C!="number"||(p=p||[]).push(U,""+C):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(a.hasOwnProperty(U)?(C!=null&&U==="onScroll"&&st("scroll",t),p||k===C||(p=[])):(p=p||[]).push(U,C))}o&&(p=p||[]).push("style",o);var U=p;(n.updateQueue=U)&&(n.flags|=4)}},jf=function(t,n,o,u){o!==u&&(n.flags|=4)};function Co(t,n){if(!at)switch(t.tailMode){case"hidden":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Ut(t){var n=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(n)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,n}function Cy(t,n,o){var u=n.pendingProps;switch(ju(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(n),null;case 1:return en(n.type)&&Ba(),Ut(n),null;case 3:return u=n.stateNode,ki(),it(Zt),it(Ot),Wu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(Qa(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,$n!==null&&(Ec($n),$n=null))),hc(t,n),Ut(n),null;case 5:qu(n);var h=As(So.current);if(o=n.type,t!==null&&n.stateNode!=null)Pf(t,n,o,u,h),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!u){if(n.stateNode===null)throw Error(r(166));return Ut(n),null}if(t=As(rr.current),Qa(n)){u=n.stateNode,o=n.type;var p=n.memoizedProps;switch(u[nr]=n,u[_o]=p,t=(n.mode&1)!==0,o){case"dialog":st("cancel",u),st("close",u);break;case"iframe":case"object":case"embed":st("load",u);break;case"video":case"audio":for(h=0;h<go.length;h++)st(go[h],u);break;case"source":st("error",u);break;case"img":case"image":case"link":st("error",u),st("load",u);break;case"details":st("toggle",u);break;case"input":Rn(u,p),st("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},st("invalid",u);break;case"textarea":Yt(u,p),st("invalid",u)}Ki(o,p),h=null;for(var _ in p)if(p.hasOwnProperty(_)){var k=p[_];_==="children"?typeof k=="string"?u.textContent!==k&&(p.suppressHydrationWarning!==!0&&Fa(u.textContent,k,t),h=["children",k]):typeof k=="number"&&u.textContent!==""+k&&(p.suppressHydrationWarning!==!0&&Fa(u.textContent,k,t),h=["children",""+k]):a.hasOwnProperty(_)&&k!=null&&_==="onScroll"&&st("scroll",u)}switch(o){case"input":on(u),Rr(u,p,!0);break;case"textarea":on(u),ee(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=Ua)}u=h,n.updateQueue=u,u!==null&&(n.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oe(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=_.createElement(o,{is:u.is}):(t=_.createElement(o),o==="select"&&(_=t,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):t=_.createElementNS(t,o),t[nr]=n,t[_o]=u,Rf(t,n,!1,!1),n.stateNode=t;e:{switch(_=Gi(o,u),o){case"dialog":st("cancel",t),st("close",t),h=u;break;case"iframe":case"object":case"embed":st("load",t),h=u;break;case"video":case"audio":for(h=0;h<go.length;h++)st(go[h],t);h=u;break;case"source":st("error",t),h=u;break;case"img":case"image":case"link":st("error",t),st("load",t),h=u;break;case"details":st("toggle",t),h=u;break;case"input":Rn(t,u),h=an(t,u),st("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=le({},u,{value:void 0}),st("invalid",t);break;case"textarea":Yt(t,u),h=Me(t,u),st("invalid",t);break;default:h=u}Ki(o,h),k=h;for(p in k)if(k.hasOwnProperty(p)){var C=k[p];p==="style"?Ct(t,C):p==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&We(t,C)):p==="children"?typeof C=="string"?(o!=="textarea"||C!=="")&&Xe(t,C):typeof C=="number"&&Xe(t,""+C):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?C!=null&&p==="onScroll"&&st("scroll",t):C!=null&&he(t,p,C,_))}switch(o){case"input":on(t),Rr(t,u,!1);break;case"textarea":on(t),ee(t);break;case"option":u.value!=null&&t.setAttribute("value",""+je(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?Oe(t,!!u.multiple,p,!1):u.defaultValue!=null&&Oe(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=Ua)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Ut(n),null;case 6:if(t&&n.stateNode!=null)jf(t,n,t.memoizedProps,u);else{if(typeof u!="string"&&n.stateNode===null)throw Error(r(166));if(o=As(So.current),As(rr.current),Qa(n)){if(u=n.stateNode,o=n.memoizedProps,u[nr]=n,(p=u.nodeValue!==o)&&(t=fn,t!==null))switch(t.tag){case 3:Fa(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fa(u.nodeValue,o,(t.mode&1)!==0)}p&&(n.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[nr]=n,n.stateNode=u}return Ut(n),null;case 13:if(it(lt),u=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(at&&pn!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Vd(),wi(),n.flags|=98560,p=!1;else if(p=Qa(n),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(r(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[nr]=n}else wi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ut(n),p=!1}else $n!==null&&(Ec($n),$n=null),p=!0;if(!p)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=o,n):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(lt.current&1)!==0?wt===0&&(wt=3):kc())),n.updateQueue!==null&&(n.flags|=4),Ut(n),null);case 4:return ki(),hc(t,n),t===null&&yo(n.stateNode.containerInfo),Ut(n),null;case 10:return Fu(n.type._context),Ut(n),null;case 17:return en(n.type)&&Ba(),Ut(n),null;case 19:if(it(lt),p=n.memoizedState,p===null)return Ut(n),null;if(u=(n.flags&128)!==0,_=p.rendering,_===null)if(u)Co(p,!1);else{if(wt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(_=Za(t),_!==null){for(n.flags|=128,Co(p,!1),u=_.updateQueue,u!==null&&(n.updateQueue=u,n.flags|=4),n.subtreeFlags=0,u=o,o=n.child;o!==null;)p=o,t=u,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return rt(lt,lt.current&1|2),n.child}t=t.sibling}p.tail!==null&&nt()>Ci&&(n.flags|=128,u=!0,Co(p,!1),n.lanes=4194304)}else{if(!u)if(t=Za(_),t!==null){if(n.flags|=128,u=!0,o=t.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),Co(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!at)return Ut(n),null}else 2*nt()-p.renderingStartTime>Ci&&o!==1073741824&&(n.flags|=128,u=!0,Co(p,!1),n.lanes=4194304);p.isBackwards?(_.sibling=n.child,n.child=_):(o=p.last,o!==null?o.sibling=_:n.child=_,p.last=_)}return p.tail!==null?(n=p.tail,p.rendering=n,p.tail=n.sibling,p.renderingStartTime=nt(),n.sibling=null,o=lt.current,rt(lt,u?o&1|2:o&1),n):(Ut(n),null);case 22:case 23:return Sc(),u=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(n.flags|=8192),u&&(n.mode&1)!==0?(mn&1073741824)!==0&&(Ut(n),n.subtreeFlags&6&&(n.flags|=8192)):Ut(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function Ny(t,n){switch(ju(n),n.tag){case 1:return en(n.type)&&Ba(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return ki(),it(Zt),it(Ot),Wu(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return qu(n),null;case 13:if(it(lt),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));wi()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return it(lt),null;case 4:return ki(),null;case 10:return Fu(n.type._context),null;case 22:case 23:return Sc(),null;case 24:return null;default:return null}}var ll=!1,zt=!1,Ry=typeof WeakSet=="function"?WeakSet:Set,de=null;function bi(t,n){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){ht(t,n,u)}else o.current=null}function dc(t,n,o){try{o()}catch(u){ht(t,n,u)}}var Df=!1;function Py(t,n){if(Su=Ur,t=hd(),gu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,k=-1,C=-1,U=0,G=0,J=t,K=null;t:for(;;){for(var ce;J!==o||h!==0&&J.nodeType!==3||(k=_+h),J!==p||u!==0&&J.nodeType!==3||(C=_+u),J.nodeType===3&&(_+=J.nodeValue.length),(ce=J.firstChild)!==null;)K=J,J=ce;for(;;){if(J===t)break t;if(K===o&&++U===h&&(k=_),K===p&&++G===u&&(C=_),(ce=J.nextSibling)!==null)break;J=K,K=J.parentNode}J=ce}o=k===-1||C===-1?null:{start:k,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(ku={focusedElem:t,selectionRange:o},Ur=!1,de=n;de!==null;)if(n=de,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,de=t;else for(;de!==null;){n=de;try{var pe=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var ge=pe.memoizedProps,pt=pe.memoizedState,O=n.stateNode,P=O.getSnapshotBeforeUpdate(n.elementType===n.type?ge:qn(n.type,ge),pt);O.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var F=n.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ne){ht(n,n.return,ne)}if(t=n.sibling,t!==null){t.return=n.return,de=t;break}de=n.return}return pe=Df,Df=!1,pe}function No(t,n,o){var u=n.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&dc(n,o,p)}h=h.next}while(h!==u)}}function ul(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==n)}}function fc(t){var n=t.ref;if(n!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof n=="function"?n(t):n.current=t}}function Vf(t){var n=t.alternate;n!==null&&(t.alternate=null,Vf(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[nr],delete n[_o],delete n[Cu],delete n[py],delete n[my])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Lf(t){return t.tag===5||t.tag===3||t.tag===4}function Mf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Lf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pc(t,n,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(t,n):o.insertBefore(t,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(t,o)):(n=o,n.appendChild(t)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=Ua));else if(u!==4&&(t=t.child,t!==null))for(pc(t,n,o),t=t.sibling;t!==null;)pc(t,n,o),t=t.sibling}function mc(t,n,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?o.insertBefore(t,n):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(mc(t,n,o),t=t.sibling;t!==null;)mc(t,n,o),t=t.sibling}var Pt=null,Hn=!1;function Gr(t,n,o){for(o=o.child;o!==null;)Of(t,n,o),o=o.sibling}function Of(t,n,o){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(gs,o)}catch{}switch(o.tag){case 5:zt||bi(o,n);case 6:var u=Pt,h=Hn;Pt=null,Gr(t,n,o),Pt=u,Hn=h,Pt!==null&&(Hn?(t=Pt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Pt.removeChild(o.stateNode));break;case 18:Pt!==null&&(Hn?(t=Pt,o=o.stateNode,t.nodeType===8?Au(t.parentNode,o):t.nodeType===1&&Au(t,o),Un(t)):Au(Pt,o.stateNode));break;case 4:u=Pt,h=Hn,Pt=o.stateNode.containerInfo,Hn=!0,Gr(t,n,o),Pt=u,Hn=h;break;case 0:case 11:case 14:case 15:if(!zt&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,_=p.destroy;p=p.tag,_!==void 0&&((p&2)!==0||(p&4)!==0)&&dc(o,n,_),h=h.next}while(h!==u)}Gr(t,n,o);break;case 1:if(!zt&&(bi(o,n),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(k){ht(o,n,k)}Gr(t,n,o);break;case 21:Gr(t,n,o);break;case 22:o.mode&1?(zt=(u=zt)||o.memoizedState!==null,Gr(t,n,o),zt=u):Gr(t,n,o);break;default:Gr(t,n,o)}}function Ff(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Ry),n.forEach(function(u){var h=zy.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Wn(t,n){var o=n.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,_=n,k=_;e:for(;k!==null;){switch(k.tag){case 5:Pt=k.stateNode,Hn=!1;break e;case 3:Pt=k.stateNode.containerInfo,Hn=!0;break e;case 4:Pt=k.stateNode.containerInfo,Hn=!0;break e}k=k.return}if(Pt===null)throw Error(r(160));Of(p,_,h),Pt=null,Hn=!1;var C=h.alternate;C!==null&&(C.return=null),h.return=null}catch(U){ht(h,n,U)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Uf(n,t),n=n.sibling}function Uf(t,n){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(n,t),ir(t),u&4){try{No(3,t,t.return),ul(3,t)}catch(ge){ht(t,t.return,ge)}try{No(5,t,t.return)}catch(ge){ht(t,t.return,ge)}}break;case 1:Wn(n,t),ir(t),u&512&&o!==null&&bi(o,o.return);break;case 5:if(Wn(n,t),ir(t),u&512&&o!==null&&bi(o,o.return),t.flags&32){var h=t.stateNode;try{Xe(h,"")}catch(ge){ht(t,t.return,ge)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,_=o!==null?o.memoizedProps:p,k=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{k==="input"&&p.type==="radio"&&p.name!=null&&vn(h,p),Gi(k,_);var U=Gi(k,p);for(_=0;_<C.length;_+=2){var G=C[_],J=C[_+1];G==="style"?Ct(h,J):G==="dangerouslySetInnerHTML"?We(h,J):G==="children"?Xe(h,J):he(h,G,J,U)}switch(k){case"input":cr(h,p);break;case"textarea":hr(h,p);break;case"select":var K=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var ce=p.value;ce!=null?Oe(h,!!p.multiple,ce,!1):K!==!!p.multiple&&(p.defaultValue!=null?Oe(h,!!p.multiple,p.defaultValue,!0):Oe(h,!!p.multiple,p.multiple?[]:"",!1))}h[_o]=p}catch(ge){ht(t,t.return,ge)}}break;case 6:if(Wn(n,t),ir(t),u&4){if(t.stateNode===null)throw Error(r(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(ge){ht(t,t.return,ge)}}break;case 3:if(Wn(n,t),ir(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Un(n.containerInfo)}catch(ge){ht(t,t.return,ge)}break;case 4:Wn(n,t),ir(t);break;case 13:Wn(n,t),ir(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(vc=nt())),u&4&&Ff(t);break;case 22:if(G=o!==null&&o.memoizedState!==null,t.mode&1?(zt=(U=zt)||G,Wn(n,t),zt=U):Wn(n,t),ir(t),u&8192){if(U=t.memoizedState!==null,(t.stateNode.isHidden=U)&&!G&&(t.mode&1)!==0)for(de=t,G=t.child;G!==null;){for(J=de=G;de!==null;){switch(K=de,ce=K.child,K.tag){case 0:case 11:case 14:case 15:No(4,K,K.return);break;case 1:bi(K,K.return);var pe=K.stateNode;if(typeof pe.componentWillUnmount=="function"){u=K,o=K.return;try{n=u,pe.props=n.memoizedProps,pe.state=n.memoizedState,pe.componentWillUnmount()}catch(ge){ht(u,o,ge)}}break;case 5:bi(K,K.return);break;case 22:if(K.memoizedState!==null){$f(J);continue}}ce!==null?(ce.return=K,de=ce):$f(J)}G=G.sibling}e:for(G=null,J=t;;){if(J.tag===5){if(G===null){G=J;try{h=J.stateNode,U?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(k=J.stateNode,C=J.memoizedProps.style,_=C!=null&&C.hasOwnProperty("display")?C.display:null,k.style.display=$s("display",_))}catch(ge){ht(t,t.return,ge)}}}else if(J.tag===6){if(G===null)try{J.stateNode.nodeValue=U?"":J.memoizedProps}catch(ge){ht(t,t.return,ge)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===t)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===t)break e;for(;J.sibling===null;){if(J.return===null||J.return===t)break e;G===J&&(G=null),J=J.return}G===J&&(G=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Wn(n,t),ir(t),u&4&&Ff(t);break;case 21:break;default:Wn(n,t),ir(t)}}function ir(t){var n=t.flags;if(n&2){try{e:{for(var o=t.return;o!==null;){if(Lf(o)){var u=o;break e}o=o.return}throw Error(r(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Xe(h,""),u.flags&=-33);var p=Mf(t);mc(t,p,h);break;case 3:case 4:var _=u.stateNode.containerInfo,k=Mf(t);pc(t,k,_);break;default:throw Error(r(161))}}catch(C){ht(t,t.return,C)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function jy(t,n,o){de=t,zf(t)}function zf(t,n,o){for(var u=(t.mode&1)!==0;de!==null;){var h=de,p=h.child;if(h.tag===22&&u){var _=h.memoizedState!==null||ll;if(!_){var k=h.alternate,C=k!==null&&k.memoizedState!==null||zt;k=ll;var U=zt;if(ll=_,(zt=C)&&!U)for(de=h;de!==null;)_=de,C=_.child,_.tag===22&&_.memoizedState!==null?qf(h):C!==null?(C.return=_,de=C):qf(h);for(;p!==null;)de=p,zf(p),p=p.sibling;de=h,ll=k,zt=U}Bf(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,de=p):Bf(t)}}function Bf(t){for(;de!==null;){var n=de;if((n.flags&8772)!==0){var o=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:zt||ul(5,n);break;case 1:var u=n.stateNode;if(n.flags&4&&!zt)if(o===null)u.componentDidMount();else{var h=n.elementType===n.type?o.memoizedProps:qn(n.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=n.updateQueue;p!==null&&Bd(n,p,u);break;case 3:var _=n.updateQueue;if(_!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}Bd(n,_,o)}break;case 5:var k=n.stateNode;if(o===null&&n.flags&4){o=k;var C=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&o.focus();break;case"img":C.src&&(o.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var U=n.alternate;if(U!==null){var G=U.memoizedState;if(G!==null){var J=G.dehydrated;J!==null&&Un(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}zt||n.flags&512&&fc(n)}catch(K){ht(n,n.return,K)}}if(n===t){de=null;break}if(o=n.sibling,o!==null){o.return=n.return,de=o;break}de=n.return}}function $f(t){for(;de!==null;){var n=de;if(n===t){de=null;break}var o=n.sibling;if(o!==null){o.return=n.return,de=o;break}de=n.return}}function qf(t){for(;de!==null;){var n=de;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{ul(4,n)}catch(C){ht(n,o,C)}break;case 1:var u=n.stateNode;if(typeof u.componentDidMount=="function"){var h=n.return;try{u.componentDidMount()}catch(C){ht(n,h,C)}}var p=n.return;try{fc(n)}catch(C){ht(n,p,C)}break;case 5:var _=n.return;try{fc(n)}catch(C){ht(n,_,C)}}}catch(C){ht(n,n.return,C)}if(n===t){de=null;break}var k=n.sibling;if(k!==null){k.return=n.return,de=k;break}de=n.return}}var Dy=Math.ceil,cl=xe.ReactCurrentDispatcher,gc=xe.ReactCurrentOwner,bn=xe.ReactCurrentBatchConfig,Qe=0,It=null,yt=null,jt=0,mn=0,Ai=qr(0),wt=0,Ro=null,Ns=0,hl=0,yc=0,Po=null,nn=null,vc=0,Ci=1/0,Ir=null,dl=!1,_c=null,Yr=null,fl=!1,Xr=null,pl=0,jo=0,xc=null,ml=-1,gl=0;function Gt(){return(Qe&6)!==0?nt():ml!==-1?ml:ml=nt()}function Jr(t){return(t.mode&1)===0?1:(Qe&2)!==0&&jt!==0?jt&-jt:yy.transition!==null?(gl===0&&(gl=vs()),gl):(t=$e,t!==0||(t=window.event,t=t===void 0?16:oo(t.type)),t)}function Qn(t,n,o,u){if(50<jo)throw jo=0,xc=null,Error(r(185));Lr(t,o,u),((Qe&2)===0||t!==It)&&(t===It&&((Qe&2)===0&&(hl|=o),wt===4&&Zr(t,jt)),rn(t,u),o===1&&Qe===0&&(n.mode&1)===0&&(Ci=nt()+500,qa&&Wr()))}function rn(t,n){var o=t.callbackNode;pr(t,n);var u=ys(t,t===It?jt:0);if(u===0)o!==null&&to(o),t.callbackNode=null,t.callbackPriority=0;else if(n=u&-u,t.callbackPriority!==n){if(o!=null&&to(o),n===1)t.tag===0?gy(Wf.bind(null,t)):Nd(Wf.bind(null,t)),dy(function(){(Qe&6)===0&&Wr()}),o=null;else{switch(Or(u)){case 1:o=ms;break;case 4:o=jr;break;case 16:o=xn;break;case 536870912:o=ga;break;default:o=xn}o=ep(o,Hf.bind(null,t))}t.callbackPriority=n,t.callbackNode=o}}function Hf(t,n){if(ml=-1,gl=0,(Qe&6)!==0)throw Error(r(327));var o=t.callbackNode;if(Ni()&&t.callbackNode!==o)return null;var u=ys(t,t===It?jt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||n)n=yl(t,u);else{n=u;var h=Qe;Qe|=2;var p=Kf();(It!==t||jt!==n)&&(Ir=null,Ci=nt()+500,Ps(t,n));do try{My();break}catch(k){Qf(t,k)}while(!0);Ou(),cl.current=p,Qe=h,yt!==null?n=0:(It=null,jt=0,n=wt)}if(n!==0){if(n===2&&(h=cn(t),h!==0&&(u=h,n=wc(t,h))),n===1)throw o=Ro,Ps(t,0),Zr(t,u),rn(t,nt()),o;if(n===6)Zr(t,u);else{if(h=t.current.alternate,(u&30)===0&&!Vy(h)&&(n=yl(t,u),n===2&&(p=cn(t),p!==0&&(u=p,n=wc(t,p))),n===1))throw o=Ro,Ps(t,0),Zr(t,u),rn(t,nt()),o;switch(t.finishedWork=h,t.finishedLanes=u,n){case 0:case 1:throw Error(r(345));case 2:js(t,nn,Ir);break;case 3:if(Zr(t,u),(u&130023424)===u&&(n=vc+500-nt(),10<n)){if(ys(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Gt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=bu(js.bind(null,t,nn,Ir),n);break}js(t,nn,Ir);break;case 4:if(Zr(t,u),(u&4194240)===u)break;for(n=t.eventTimes,h=-1;0<u;){var _=31-Wt(u);p=1<<_,_=n[_],_>h&&(h=_),u&=~p}if(u=h,u=nt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Dy(u/1960))-u,10<u){t.timeoutHandle=bu(js.bind(null,t,nn,Ir),u);break}js(t,nn,Ir);break;case 5:js(t,nn,Ir);break;default:throw Error(r(329))}}}return rn(t,nt()),t.callbackNode===o?Hf.bind(null,t):null}function wc(t,n){var o=Po;return t.current.memoizedState.isDehydrated&&(Ps(t,n).flags|=256),t=yl(t,n),t!==2&&(n=nn,nn=o,n!==null&&Ec(n)),t}function Ec(t){nn===null?nn=t:nn.push.apply(nn,t)}function Vy(t){for(var n=t;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!Bn(p(),h))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Zr(t,n){for(n&=~yc,n&=~hl,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var o=31-Wt(n),u=1<<o;t[o]=-1,n&=~u}}function Wf(t){if((Qe&6)!==0)throw Error(r(327));Ni();var n=ys(t,0);if((n&1)===0)return rn(t,nt()),null;var o=yl(t,n);if(t.tag!==0&&o===2){var u=cn(t);u!==0&&(n=u,o=wc(t,u))}if(o===1)throw o=Ro,Ps(t,0),Zr(t,n),rn(t,nt()),o;if(o===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,js(t,nn,Ir),rn(t,nt()),null}function Tc(t,n){var o=Qe;Qe|=1;try{return t(n)}finally{Qe=o,Qe===0&&(Ci=nt()+500,qa&&Wr())}}function Rs(t){Xr!==null&&Xr.tag===0&&(Qe&6)===0&&Ni();var n=Qe;Qe|=1;var o=bn.transition,u=$e;try{if(bn.transition=null,$e=1,t)return t()}finally{$e=u,bn.transition=o,Qe=n,(Qe&6)===0&&Wr()}}function Sc(){mn=Ai.current,it(Ai)}function Ps(t,n){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,hy(o)),yt!==null)for(o=yt.return;o!==null;){var u=o;switch(ju(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Ba();break;case 3:ki(),it(Zt),it(Ot),Wu();break;case 5:qu(u);break;case 4:ki();break;case 13:it(lt);break;case 19:it(lt);break;case 10:Fu(u.type._context);break;case 22:case 23:Sc()}o=o.return}if(It=t,yt=t=es(t.current,null),jt=mn=n,wt=0,Ro=null,yc=hl=Ns=0,nn=Po=null,bs!==null){for(n=0;n<bs.length;n++)if(o=bs[n],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var _=p.next;p.next=h,u.next=_}o.pending=u}bs=null}return t}function Qf(t,n){do{var o=yt;try{if(Ou(),el.current=sl,tl){for(var u=ut.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}tl=!1}if(Cs=0,kt=xt=ut=null,ko=!1,Io=0,gc.current=null,o===null||o.return===null){wt=1,Ro=n,yt=null;break}e:{var p=t,_=o.return,k=o,C=n;if(n=jt,k.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var U=C,G=k,J=G.tag;if((G.mode&1)===0&&(J===0||J===11||J===15)){var K=G.alternate;K?(G.updateQueue=K.updateQueue,G.memoizedState=K.memoizedState,G.lanes=K.lanes):(G.updateQueue=null,G.memoizedState=null)}var ce=vf(_);if(ce!==null){ce.flags&=-257,_f(ce,_,k,p,n),ce.mode&1&&yf(p,U,n),n=ce,C=U;var pe=n.updateQueue;if(pe===null){var ge=new Set;ge.add(C),n.updateQueue=ge}else pe.add(C);break e}else{if((n&1)===0){yf(p,U,n),kc();break e}C=Error(r(426))}}else if(at&&k.mode&1){var pt=vf(_);if(pt!==null){(pt.flags&65536)===0&&(pt.flags|=256),_f(pt,_,k,p,n),Lu(Ii(C,k));break e}}p=C=Ii(C,k),wt!==4&&(wt=2),Po===null?Po=[p]:Po.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,n&=-n,p.lanes|=n;var O=mf(p,C,n);zd(p,O);break e;case 1:k=C;var P=p.type,F=p.stateNode;if((p.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Yr===null||!Yr.has(F)))){p.flags|=65536,n&=-n,p.lanes|=n;var ne=gf(p,k,n);zd(p,ne);break e}}p=p.return}while(p!==null)}Yf(o)}catch(_e){n=_e,yt===o&&o!==null&&(yt=o=o.return);continue}break}while(!0)}function Kf(){var t=cl.current;return cl.current=sl,t===null?sl:t}function kc(){(wt===0||wt===3||wt===2)&&(wt=4),It===null||(Ns&268435455)===0&&(hl&268435455)===0||Zr(It,jt)}function yl(t,n){var o=Qe;Qe|=2;var u=Kf();(It!==t||jt!==n)&&(Ir=null,Ps(t,n));do try{Ly();break}catch(h){Qf(t,h)}while(!0);if(Ou(),Qe=o,cl.current=u,yt!==null)throw Error(r(261));return It=null,jt=0,wt}function Ly(){for(;yt!==null;)Gf(yt)}function My(){for(;yt!==null&&!pa();)Gf(yt)}function Gf(t){var n=Zf(t.alternate,t,mn);t.memoizedProps=t.pendingProps,n===null?Yf(t):yt=n,gc.current=null}function Yf(t){var n=t;do{var o=n.alternate;if(t=n.return,(n.flags&32768)===0){if(o=Cy(o,n,mn),o!==null){yt=o;return}}else{if(o=Ny(o,n),o!==null){o.flags&=32767,yt=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,yt=null;return}}if(n=n.sibling,n!==null){yt=n;return}yt=n=t}while(n!==null);wt===0&&(wt=5)}function js(t,n,o){var u=$e,h=bn.transition;try{bn.transition=null,$e=1,Oy(t,n,o,u)}finally{bn.transition=h,$e=u}return null}function Oy(t,n,o,u){do Ni();while(Xr!==null);if((Qe&6)!==0)throw Error(r(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(tt(t,p),t===It&&(yt=It=null,jt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||fl||(fl=!0,ep(xn,function(){return Ni(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=bn.transition,bn.transition=null;var _=$e;$e=1;var k=Qe;Qe|=4,gc.current=null,Py(t,o),Uf(o,t),sy(ku),Ur=!!Su,ku=Su=null,t.current=o,jy(o),lu(),Qe=k,$e=_,bn.transition=p}else t.current=o;if(fl&&(fl=!1,Xr=t,pl=h),p=t.pendingLanes,p===0&&(Yr=null),ya(o.stateNode),rn(t,nt()),n!==null)for(u=t.onRecoverableError,o=0;o<n.length;o++)h=n[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(dl)throw dl=!1,t=_c,_c=null,t;return(pl&1)!==0&&t.tag!==0&&Ni(),p=t.pendingLanes,(p&1)!==0?t===xc?jo++:(jo=0,xc=t):jo=0,Wr(),null}function Ni(){if(Xr!==null){var t=Or(pl),n=bn.transition,o=$e;try{if(bn.transition=null,$e=16>t?16:t,Xr===null)var u=!1;else{if(t=Xr,Xr=null,pl=0,(Qe&6)!==0)throw Error(r(331));var h=Qe;for(Qe|=4,de=t.current;de!==null;){var p=de,_=p.child;if((de.flags&16)!==0){var k=p.deletions;if(k!==null){for(var C=0;C<k.length;C++){var U=k[C];for(de=U;de!==null;){var G=de;switch(G.tag){case 0:case 11:case 15:No(8,G,p)}var J=G.child;if(J!==null)J.return=G,de=J;else for(;de!==null;){G=de;var K=G.sibling,ce=G.return;if(Vf(G),G===U){de=null;break}if(K!==null){K.return=ce,de=K;break}de=ce}}}var pe=p.alternate;if(pe!==null){var ge=pe.child;if(ge!==null){pe.child=null;do{var pt=ge.sibling;ge.sibling=null,ge=pt}while(ge!==null)}}de=p}}if((p.subtreeFlags&2064)!==0&&_!==null)_.return=p,de=_;else e:for(;de!==null;){if(p=de,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:No(9,p,p.return)}var O=p.sibling;if(O!==null){O.return=p.return,de=O;break e}de=p.return}}var P=t.current;for(de=P;de!==null;){_=de;var F=_.child;if((_.subtreeFlags&2064)!==0&&F!==null)F.return=_,de=F;else e:for(_=P;de!==null;){if(k=de,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:ul(9,k)}}catch(_e){ht(k,k.return,_e)}if(k===_){de=null;break e}var ne=k.sibling;if(ne!==null){ne.return=k.return,de=ne;break e}de=k.return}}if(Qe=h,Wr(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(gs,t)}catch{}u=!0}return u}finally{$e=o,bn.transition=n}}return!1}function Xf(t,n,o){n=Ii(o,n),n=mf(t,n,1),t=Kr(t,n,1),n=Gt(),t!==null&&(Lr(t,1,n),rn(t,n))}function ht(t,n,o){if(t.tag===3)Xf(t,t,o);else for(;n!==null;){if(n.tag===3){Xf(n,t,o);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Yr===null||!Yr.has(u))){t=Ii(o,t),t=gf(n,t,1),n=Kr(n,t,1),t=Gt(),n!==null&&(Lr(n,1,t),rn(n,t));break}}n=n.return}}function Fy(t,n,o){var u=t.pingCache;u!==null&&u.delete(n),n=Gt(),t.pingedLanes|=t.suspendedLanes&o,It===t&&(jt&o)===o&&(wt===4||wt===3&&(jt&130023424)===jt&&500>nt()-vc?Ps(t,0):yc|=o),rn(t,n)}function Jf(t,n){n===0&&((t.mode&1)===0?n=1:(n=Zs,Zs<<=1,(Zs&130023424)===0&&(Zs=4194304)));var o=Gt();t=Tr(t,n),t!==null&&(Lr(t,n,o),rn(t,o))}function Uy(t){var n=t.memoizedState,o=0;n!==null&&(o=n.retryLane),Jf(t,o)}function zy(t,n){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(n),Jf(t,o)}var Zf;Zf=function(t,n,o){if(t!==null)if(t.memoizedProps!==n.pendingProps||Zt.current)tn=!0;else{if((t.lanes&o)===0&&(n.flags&128)===0)return tn=!1,Ay(t,n,o);tn=(t.flags&131072)!==0}else tn=!1,at&&(n.flags&1048576)!==0&&Rd(n,Wa,n.index);switch(n.lanes=0,n.tag){case 2:var u=n.type;al(t,n),t=n.pendingProps;var h=vi(n,Ot.current);Si(n,o),h=Gu(null,n,u,t,h,o);var p=Yu();return n.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,en(u)?(p=!0,$a(n)):p=!1,n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Bu(n),h.updater=il,n.stateNode=h,h._reactInternals=n,nc(n,u,t,o),n=oc(null,n,u,!0,p,o)):(n.tag=0,at&&p&&Pu(n),Kt(null,n,h,o),n=n.child),n;case 16:u=n.elementType;e:{switch(al(t,n),t=n.pendingProps,h=u._init,u=h(u._payload),n.type=u,h=n.tag=$y(u),t=qn(u,t),h){case 0:n=ic(null,n,u,t,o);break e;case 1:n=kf(null,n,u,t,o);break e;case 11:n=xf(null,n,u,t,o);break e;case 14:n=wf(null,n,u,qn(u.type,t),o);break e}throw Error(r(306,u,""))}return n;case 0:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:qn(u,h),ic(t,n,u,h,o);case 1:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:qn(u,h),kf(t,n,u,h,o);case 3:e:{if(If(n),t===null)throw Error(r(387));u=n.pendingProps,p=n.memoizedState,h=p.element,Ud(t,n),Ja(n,u,null,o);var _=n.memoizedState;if(u=_.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){h=Ii(Error(r(423)),n),n=bf(t,n,u,o,h);break e}else if(u!==h){h=Ii(Error(r(424)),n),n=bf(t,n,u,o,h);break e}else for(pn=$r(n.stateNode.containerInfo.firstChild),fn=n,at=!0,$n=null,o=Od(n,null,u,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(wi(),u===h){n=kr(t,n,o);break e}Kt(t,n,u,o)}n=n.child}return n;case 5:return $d(n),t===null&&Vu(n),u=n.type,h=n.pendingProps,p=t!==null?t.memoizedProps:null,_=h.children,Iu(u,h)?_=null:p!==null&&Iu(u,p)&&(n.flags|=32),Sf(t,n),Kt(t,n,_,o),n.child;case 6:return t===null&&Vu(n),null;case 13:return Af(t,n,o);case 4:return $u(n,n.stateNode.containerInfo),u=n.pendingProps,t===null?n.child=Ei(n,null,u,o):Kt(t,n,u,o),n.child;case 11:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:qn(u,h),xf(t,n,u,h,o);case 7:return Kt(t,n,n.pendingProps,o),n.child;case 8:return Kt(t,n,n.pendingProps.children,o),n.child;case 12:return Kt(t,n,n.pendingProps.children,o),n.child;case 10:e:{if(u=n.type._context,h=n.pendingProps,p=n.memoizedProps,_=h.value,rt(Ga,u._currentValue),u._currentValue=_,p!==null)if(Bn(p.value,_)){if(p.children===h.children&&!Zt.current){n=kr(t,n,o);break e}}else for(p=n.child,p!==null&&(p.return=n);p!==null;){var k=p.dependencies;if(k!==null){_=p.child;for(var C=k.firstContext;C!==null;){if(C.context===u){if(p.tag===1){C=Sr(-1,o&-o),C.tag=2;var U=p.updateQueue;if(U!==null){U=U.shared;var G=U.pending;G===null?C.next=C:(C.next=G.next,G.next=C),U.pending=C}}p.lanes|=o,C=p.alternate,C!==null&&(C.lanes|=o),Uu(p.return,o,n),k.lanes|=o;break}C=C.next}}else if(p.tag===10)_=p.type===n.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(r(341));_.lanes|=o,k=_.alternate,k!==null&&(k.lanes|=o),Uu(_,o,n),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===n){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}Kt(t,n,h.children,o),n=n.child}return n;case 9:return h=n.type,u=n.pendingProps.children,Si(n,o),h=kn(h),u=u(h),n.flags|=1,Kt(t,n,u,o),n.child;case 14:return u=n.type,h=qn(u,n.pendingProps),h=qn(u.type,h),wf(t,n,u,h,o);case 15:return Ef(t,n,n.type,n.pendingProps,o);case 17:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:qn(u,h),al(t,n),n.tag=1,en(u)?(t=!0,$a(n)):t=!1,Si(n,o),ff(n,u,h),nc(n,u,h,o),oc(null,n,u,!0,t,o);case 19:return Nf(t,n,o);case 22:return Tf(t,n,o)}throw Error(r(156,n.tag))};function ep(t,n){return Xs(t,n)}function By(t,n,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,n,o,u){return new By(t,n,o,u)}function Ic(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $y(t){if(typeof t=="function")return Ic(t)?1:0;if(t!=null){if(t=t.$$typeof,t===V)return 11;if(t===be)return 14}return 2}function es(t,n){var o=t.alternate;return o===null?(o=An(t.tag,n,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=n,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,n=t.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function vl(t,n,o,u,h,p){var _=2;if(u=t,typeof t=="function")Ic(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case A:return Ds(o.children,h,p,n);case T:_=8,h|=8;break;case I:return t=An(12,o,n,h|2),t.elementType=I,t.lanes=p,t;case E:return t=An(13,o,n,h),t.elementType=E,t.lanes=p,t;case ae:return t=An(19,o,n,h),t.elementType=ae,t.lanes=p,t;case Fe:return _l(o,h,p,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case b:_=10;break e;case R:_=9;break e;case V:_=11;break e;case be:_=14;break e;case Le:_=16,u=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return n=An(_,o,n,h),n.elementType=t,n.type=u,n.lanes=p,n}function Ds(t,n,o,u){return t=An(7,t,u,n),t.lanes=o,t}function _l(t,n,o,u){return t=An(22,t,u,n),t.elementType=Fe,t.lanes=o,t.stateNode={isHidden:!1},t}function bc(t,n,o){return t=An(6,t,null,n),t.lanes=o,t}function Ac(t,n,o){return n=An(4,t.children!==null?t.children:[],t.key,n),n.lanes=o,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function qy(t,n,o,u,h){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vr(0),this.expirationTimes=Vr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Cc(t,n,o,u,h,p,_,k,C){return t=new qy(t,n,o,k,C),n===1?(n=1,p===!0&&(n|=8)):n=0,p=An(3,null,null,n),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bu(p),t}function Hy(t,n,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:u==null?null:""+u,children:t,containerInfo:n,implementation:o}}function tp(t){if(!t)return Hr;t=t._reactInternals;e:{if(Vn(t)!==t||t.tag!==1)throw Error(r(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(en(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(t.tag===1){var o=t.type;if(en(o))return Ad(t,o,n)}return n}function np(t,n,o,u,h,p,_,k,C){return t=Cc(o,u,!0,t,h,p,_,k,C),t.context=tp(null),o=t.current,u=Gt(),h=Jr(o),p=Sr(u,h),p.callback=n??null,Kr(o,p,h),t.current.lanes=h,Lr(t,h,u),rn(t,u),t}function xl(t,n,o,u){var h=n.current,p=Gt(),_=Jr(h);return o=tp(o),n.context===null?n.context=o:n.pendingContext=o,n=Sr(p,_),n.payload={element:t},u=u===void 0?null:u,u!==null&&(n.callback=u),t=Kr(h,n,_),t!==null&&(Qn(t,h,_,p),Xa(t,h,_)),_}function wl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rp(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<n?o:n}}function Nc(t,n){rp(t,n),(t=t.alternate)&&rp(t,n)}function Wy(){return null}var sp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rc(t){this._internalRoot=t}El.prototype.render=Rc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));xl(t,n,null,null)},El.prototype.unmount=Rc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Rs(function(){xl(null,t,null,null)}),n[_r]=null}};function El(t){this._internalRoot=t}El.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ea();t={blockedOn:null,target:t,priority:n};for(var o=0;o<Jn.length&&n!==0&&n<Jn[o].priority;o++);Jn.splice(o,0,t),o===0&&ka(t)}};function Pc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ip(){}function Qy(t,n,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var U=wl(_);p.call(U)}}var _=np(n,u,t,0,null,!1,!1,"",ip);return t._reactRootContainer=_,t[_r]=_.current,yo(t.nodeType===8?t.parentNode:t),Rs(),_}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var k=u;u=function(){var U=wl(C);k.call(U)}}var C=Cc(t,0,!1,null,null,!1,!1,"",ip);return t._reactRootContainer=C,t[_r]=C.current,yo(t.nodeType===8?t.parentNode:t),Rs(function(){xl(n,C,o,u)}),C}function Sl(t,n,o,u,h){var p=o._reactRootContainer;if(p){var _=p;if(typeof h=="function"){var k=h;h=function(){var C=wl(_);k.call(C)}}xl(n,_,t,h)}else _=Qy(o,n,t,h,u);return wl(_)}xa=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var o=Dr(n.pendingLanes);o!==0&&(Mr(n,o|1),rn(n,nt()),(Qe&6)===0&&(Ci=nt()+500,Wr()))}break;case 13:Rs(function(){var u=Tr(t,1);if(u!==null){var h=Gt();Qn(u,t,1,h)}}),Nc(t,1)}},ei=function(t){if(t.tag===13){var n=Tr(t,134217728);if(n!==null){var o=Gt();Qn(n,t,134217728,o)}Nc(t,134217728)}},wa=function(t){if(t.tag===13){var n=Jr(t),o=Tr(t,n);if(o!==null){var u=Gt();Qn(o,t,n,u)}Nc(t,n)}},Ea=function(){return $e},Ta=function(t,n){var o=$e;try{return $e=t,n()}finally{$e=o}},Hs=function(t,n,o){switch(n){case"input":if(cr(t,o),n=o.name,o.type==="radio"&&n!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var u=o[n];if(u!==t&&u.form===t.form){var h=za(u);if(!h)throw Error(r(90));yn(u),cr(u,h)}}}break;case"textarea":hr(t,o);break;case"select":n=o.value,n!=null&&Oe(t,!!o.multiple,n,!1)}},hs=Tc,Xi=Rs;var Ky={usingClientEntryPoint:!1,Events:[xo,gi,za,Yn,Yi,Tc]},Do={findFiberByHostInstance:Ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gy={bundleType:Do.bundleType,version:Do.version,rendererPackageName:Do.rendererPackageName,rendererConfig:Do.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xe.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=eo(t),t===null?null:t.stateNode},findFiberByHostInstance:Do.findFiberByHostInstance||Wy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kl.isDisabled&&kl.supportsFiber)try{gs=kl.inject(Gy),un=kl}catch{}}return sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ky,sn.createPortal=function(t,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pc(n))throw Error(r(200));return Hy(t,n,null,o)},sn.createRoot=function(t,n){if(!Pc(t))throw Error(r(299));var o=!1,u="",h=sp;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),n=Cc(t,1,!1,null,null,o,!1,u,h),t[_r]=n.current,yo(t.nodeType===8?t.parentNode:t),new Rc(n)},sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=eo(n),t=t===null?null:t.stateNode,t},sn.flushSync=function(t){return Rs(t)},sn.hydrate=function(t,n,o){if(!Tl(n))throw Error(r(200));return Sl(null,t,n,!0,o)},sn.hydrateRoot=function(t,n,o){if(!Pc(t))throw Error(r(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",_=sp;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),n=np(n,null,t,1,o??null,h,!1,p,_),t[_r]=n.current,yo(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,h]:n.mutableSourceEagerHydrationData.push(o,h);return new El(n)},sn.render=function(t,n,o){if(!Tl(n))throw Error(r(200));return Sl(null,t,n,!1,o)},sn.unmountComponentAtNode=function(t){if(!Tl(t))throw Error(r(40));return t._reactRootContainer?(Rs(function(){Sl(null,null,t,!1,function(){t._reactRootContainer=null,t[_r]=null})}),!0):!1},sn.unstable_batchedUpdates=Tc,sn.unstable_renderSubtreeIntoContainer=function(t,n,o,u){if(!Tl(o))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return Sl(t,n,o,!1,u)},sn.version="18.3.1-next-f1338f8080-20240426",sn}var fp;function s0(){if(fp)return Vc.exports;fp=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Vc.exports=r0(),Vc.exports}var pp;function i0(){if(pp)return Il;pp=1;var s=s0();return Il.createRoot=s.createRoot,Il.hydrateRoot=s.hydrateRoot,Il}var o0=i0();const a0=dm(o0),l0=({video:s,isFavorite:e=!1,isPlaying:r,onPlayStateChange:i,onEnded:a,onToggleLike:c,onToggleDislike:d,onToggleFavorite:g,onViewIncrement:v,onWriteReview:x})=>{const S=H.useRef(null),N=H.useRef(null),L=H.useRef(null),[z,W]=H.useState(!0),[q,B]=H.useState(!1),[te,ie]=H.useState(!1),he=H.useRef(null),xe=E=>{if(!E)return null;const ae=E.trim();if(/^[a-zA-Z0-9_-]{11}$/.test(ae))return ae;const be=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/|shorts\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,Le=ae.match(be);return Le&&Le[1]&&Le[1].length===11?Le[1]:null},Ee=H.useMemo(()=>s?xe(s.url):null,[s==null?void 0:s.url]),me=!!Ee,A=s==null?void 0:s.id;H.useEffect(()=>{W(!0),ie(!1);const E=setTimeout(()=>W(!1),800);return()=>clearTimeout(E)},[A]),H.useEffect(()=>{if(r&&!te&&A&&(s==null?void 0:s.status)==="ready"){const E=window.setTimeout(()=>{v==null||v(),ie(!0)},1e4);return()=>window.clearTimeout(E)}},[r,te,v,A,s==null?void 0:s.status]),H.useEffect(()=>{if(!me)return;const E=ae=>{if(ae.origin==="https://www.youtube.com")try{const be=JSON.parse(ae.data);be.event==="onStateChange"&&(be.info===0?a==null||a():be.info===1?i(!0):be.info===2&&i(!1))}catch{}};return window.addEventListener("message",E),()=>window.removeEventListener("message",E)},[me,a,i]);const T=(E,ae="")=>{L.current&&L.current.contentWindow&&L.current.contentWindow.postMessage(JSON.stringify({event:"command",func:E,args:ae}),"*")};H.useEffect(()=>{me?(T(r?"playVideo":"pauseVideo"),T("unMute"),T("setVolume",80)):N.current&&(r?N.current.play().catch(()=>{}):N.current.pause(),N.current.volume=.8,N.current.muted=!1)},[r,me,A]);const I=()=>{const E=!r;i(E),B(!E)},b=()=>{B(!0),he.current&&window.clearTimeout(he.current),he.current=window.setTimeout(()=>{r&&B(!1)},2500)};if(!s)return m.jsxs("div",{className:"w-full aspect-video rounded-[2rem] overflow-hidden bg-slate-950 border border-white/5 flex flex-col items-center justify-center",children:[m.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-900 border border-white/5 flex items-center justify-center mb-4",children:m.jsx("i",{className:"fa-solid fa-cloud text-slate-800 text-xl"})}),m.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-slate-800",children:"Archive Standby"})]});const R=me?`https://www.youtube.com/embed/${Ee}?autoplay=0&mute=0&rel=0&modestbranding=1&controls=0&enablejsapi=1&origin=${window.location.origin}`:"",V=!r||q;return m.jsxs("div",{ref:S,className:"relative w-full h-full bg-black group animate-fade-in",onMouseMove:b,onMouseLeave:()=>r&&B(!1),children:[m.jsx("div",{onClick:I,className:`absolute inset-0 z-10 cursor-pointer transition-opacity duration-500 ${V?"opacity-100":"opacity-0"} bg-gradient-to-t from-black/60 via-transparent to-black/20`}),m.jsx("div",{className:`absolute top-8 left-8 z-20 flex flex-col gap-4 transition-all duration-700 ease-out ${V?"translate-x-0 opacity-100":"-translate-x-8 opacity-0"}`,children:m.jsx("button",{onClick:E=>{E.stopPropagation(),g==null||g()},className:`w-12 h-12 rounded-2xl glass border flex items-center justify-center transition-all hover:scale-110 active:scale-90 ${e?"bg-red-600/40 border-red-500/60 text-[#ff3b3b] shadow-[0_0_30px_rgba(255,59,59,0.7)]":"bg-black/40 border-white/10 text-slate-500 hover:text-white"}`,children:m.jsx("i",{className:`fa-${e?"solid":"regular"} fa-heart text-lg drop-shadow-[0_0_2px_rgba(0,0,0,0.5)]`})})}),m.jsx("div",{className:`absolute bottom-8 left-1/2 -translate-x-1/2 z-20 transition-all duration-700 ease-out ${V?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:m.jsxs("div",{className:"flex items-center gap-3 bg-slate-900/90 backdrop-blur-2xl border border-white/10 rounded-2xl p-2 shadow-2xl",children:[m.jsx("button",{onClick:E=>{E.stopPropagation(),c==null||c()},className:`w-10 h-10 rounded-xl flex items-center justify-center transition-all ${s.isLiked?"bg-blue-600 text-white":"bg-white/5 text-slate-400 hover:text-white"}`,children:m.jsx("i",{className:"fa-solid fa-thumbs-up"})}),m.jsx("button",{onClick:E=>{E.stopPropagation(),d==null||d()},className:`w-10 h-10 rounded-xl flex items-center justify-center transition-all ${s.isDisliked?"bg-red-600 text-white":"bg-white/5 text-slate-400 hover:text-white"}`,children:m.jsx("i",{className:"fa-solid fa-thumbs-down"})}),m.jsx("div",{className:"w-px h-6 bg-white/10 mx-1"}),m.jsx("button",{onClick:E=>{E.stopPropagation(),x==null||x()},className:"w-10 h-10 rounded-xl bg-white/10 text-white flex items-center justify-center transition-all hover:bg-white/20",children:m.jsx("i",{className:"fa-solid fa-pen-nib"})})]})}),m.jsx("div",{className:"w-full h-full relative bg-black",children:me?m.jsxs("div",{className:"w-full h-full relative",children:[z&&m.jsx("div",{className:"absolute inset-0 z-30 bg-black flex flex-col items-center justify-center gap-4",children:m.jsx("div",{className:"w-8 h-8 border-2 border-white/10 border-t-blue-500 rounded-full animate-spin"})}),m.jsx("iframe",{ref:L,width:"100%",height:"100%",src:R,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",className:"w-full h-full pointer-events-none"})]}):m.jsx("video",{ref:N,src:s.url,playsInline:!0,className:"w-full h-full object-cover",onPlay:()=>i(!0),onPause:()=>i(!1),onEnded:a},s.url)})]})},mp=[["#60a5fa","#38bdf8","#0ea5e9","#06b6d4","#22d3ee","#67e8f9","#818cf8","#a5b4fc","#6366f1","#4f46e5","#a855f7","#d946ef"],["#34d399","#10b981","#4ade80","#22c55e","#84cc16","#a3e635","#bef264","#d9f99d","#2dd4bf","#5eead4","#14b8a6","#0d9488"],["#fb923c","#f97316","#fbbf24","#facc15","#fde047","#f472b6","#ec4899","#f0abfc","#d8b4fe","#cbd5e1","#e2e8f0","#94a3b8"]],u0=({videos:s,categories:e,categoryColors:r,currentVideo:i,onSelect:a,onRemove:c,onToggleFavorite:d,userFavorites:g,onMoveVideo:v,onAddRandom:x,isGeneratingRandom:S=!1,onAddManualVideo:N,onAddCategory:L,onRemoveCategory:z,onUpdateCategoryColor:W,onPurgeAll:q,activeTab:B,setActiveTab:te,isAuthorized:ie})=>{const[he,xe]=H.useState(!1),[Ee,me]=H.useState(""),[A,T]=H.useState(""),[I,b]=H.useState(null),[R,V]=H.useState(null),[E,ae]=H.useState(!1),[be,Le]=H.useState(null),[Fe,Y]=H.useState(!1),[fe,le]=H.useState(""),[j,D]=H.useState(mp[0][0]),[ue,ve]=H.useState(!1),Ce=H.useRef(null);H.useEffect(()=>{he&&Ce.current&&Ce.current.focus()},[he]);const we=re=>{if(!re)return null;const Oe=re.trim();if(/^[a-zA-Z0-9_-]{11}$/.test(Oe))return Oe;const Me=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/|shorts\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,Yt=Oe.match(Me);return Yt&&Yt[1]&&Yt[1].length===11?Yt[1]:null};H.useEffect(()=>{const re=we(Ee);re&&!A&&(ve(!0),fetch(`https://noembed.com/embed?url=https://www.youtube.com/watch?v=${re}`).then(Oe=>Oe.json()).then(Oe=>{Oe&&Oe.title&&T(Oe.title)}).catch(()=>{}).finally(()=>ve(!1)))},[Ee,A]);const Re=H.useMemo(()=>B==="All"?s:B==="Vault"?s.filter(re=>g.includes(re.id)):s.filter(re=>re.category===B),[s,B,g]),je=H.useMemo(()=>{const re=[{name:"All"},{name:"Vault"}],Oe=e.map(Me=>({name:Me}));return[...re,...Oe]},[e]),ze=H.useMemo(()=>je.slice(0,4),[je]),et=H.useMemo(()=>je.slice(4),[je]),on=re=>{if(re.thumbnail)return re.thumbnail;const Oe=we(re.url);return Oe?`https://img.youtube.com/vi/${Oe}/mqdefault.jpg`:"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?auto=format&fit=crop&q=80&w=200"},yn=()=>{me(""),T(""),b(null),xe(!1),Y(!1),le("")},Ht=re=>{re.preventDefault(),!(!Ee||!I)&&(N(Ee,A||"Trace_X",I),yn())},an=re=>{re.preventDefault(),fe.trim()&&(L(fe.trim(),j),b(fe.trim()),le(""),Y(!1))},Rn=re=>re>=1e6?`${(re/1e6).toFixed(1)}M`:re>=1e3?`${(re/1e3).toFixed(1)}K`:re.toString(),vn=re=>{const Oe=r[re]||"#cbd5e1";return{color:Oe,borderColor:`${Oe}60`,backgroundColor:`${Oe}20`}},cr=re=>re==="All"?"#f8fafc":re==="Vault"?"#ff3b3b":r[re]||"#cbd5e1",Rr=re=>{const Oe=cr(re);return B===re?{color:Oe,backgroundColor:`${Oe}25`,borderColor:`${Oe}50`,transform:"scale(1.02)"}:{color:`${Oe}90`,borderColor:"transparent",backgroundColor:"transparent"}},Pn=re=>{const Oe=ie&&!["All","Vault"].includes(re.name);return m.jsxs("div",{className:"relative group/tab",children:[m.jsx("button",{onClick:()=>te(re.name),style:Rr(re.name),className:"w-full h-7 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all flex items-center justify-center px-1 border relative cursor-pointer",children:m.jsx("span",{className:"truncate w-full text-center px-1",children:re.name})}),Oe&&m.jsx("button",{onClick:Me=>{Me.stopPropagation(),z(re.name)},className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-red-500 text-white flex items-center justify-center opacity-0 group-hover/tab:opacity-100 transition-opacity z-10 hover:scale-125 shadow-lg border border-white/20 cursor-pointer",children:m.jsx("i",{className:"fa-solid fa-xmark text-[8px]"})})]},re.name)};return m.jsxs("div",{className:"flex flex-col h-full relative bg-transparent",children:[m.jsxs("div",{className:"flex-none pb-4 z-20 px-4 pt-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[m.jsxs("h3",{className:"text-[10px] font-black text-blue-400 uppercase tracking-[0.2em] flex items-center gap-2",children:[m.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),"Library Matrix"]}),m.jsxs("div",{className:"flex items-center gap-4",children:[ie&&m.jsx("button",{onClick:()=>{confirm("Purge all?")&&q()},className:"text-[9px] font-black uppercase tracking-widest text-red-500 hover:text-red-400 transition-all flex items-center gap-2",children:m.jsx("i",{className:"fa-solid fa-eraser text-[11px]"})}),m.jsx("button",{onClick:x,className:"text-[9px] font-black uppercase tracking-widest text-slate-400 hover:text-white transition-all flex items-center gap-2",children:m.jsx("i",{className:"fa-solid fa-wand-magic-sparkles text-[11px]"})}),ie&&m.jsx("button",{onClick:()=>xe(!he),className:`w-8 h-8 flex items-center justify-center rounded-lg transition-all border shadow-lg z-30 ${he?"bg-blue-500/10 text-blue-400 border-blue-500/20 rotate-45":"bg-white text-black border-white hover:bg-slate-100"}`,children:m.jsx("i",{className:"fa-solid fa-plus text-xs"})})]})]}),m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs("div",{className:"bg-black/40 rounded-xl border border-white/5 shadow-inner p-1",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("div",{className:"grid grid-cols-4 gap-1 flex-1",children:ze.map(Pn)}),m.jsx("button",{onClick:()=>ae(!E),className:`w-8 h-7 flex-shrink-0 flex items-center justify-center rounded-lg border border-white/5 transition-all duration-300 ${E?"bg-white/10 text-white rotate-180":"bg-transparent text-slate-700"}`,children:m.jsx("i",{className:"fa-solid fa-chevron-down text-[10px]"})})]}),m.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-in-out ${E?"max-h-[600px] mt-1 opacity-100":"max-h-0 opacity-0"}`,children:m.jsx("div",{className:"grid grid-cols-4 gap-1 border-t border-white/5 pt-1",children:et.map(Pn)})})]}),ie&&he&&m.jsxs("div",{className:"animate-fade-in bg-slate-900/90 border border-white/10 rounded-2xl p-6 mt-2 shadow-2xl space-y-4",children:[m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsx("h4",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.3em]",children:"Manual Injection"}),!Fe&&m.jsx("button",{type:"button",onClick:()=>Y(!0),className:"w-full h-8 rounded-lg bg-white/5 border border-dashed border-white/10 flex items-center justify-center gap-2 text-slate-500 hover:bg-white/10 hover:text-white transition-all",children:m.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:"Add Category"})})]}),Fe&&m.jsxs("form",{onSubmit:an,className:"space-y-3 p-3 bg-black/40 rounded-xl border border-white/5",children:[m.jsx("input",{autoFocus:!0,type:"text",placeholder:"Cat Name...",value:fe,onChange:re=>le(re.target.value),className:"w-full bg-slate-950 border border-white/10 rounded-lg px-3 py-2 text-[10px] text-white focus:outline-none"}),m.jsx("div",{className:"flex gap-1.5 flex-wrap justify-center",children:mp.flat().map(re=>m.jsx("button",{type:"button",onClick:()=>D(re),className:`w-3 h-3 rounded-full border transition-all ${j===re?"border-white scale-125 shadow-[0_0_8px_white]":"border-transparent opacity-40"}`,style:{backgroundColor:re}},re))}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"button",onClick:()=>Y(!1),className:"flex-1 text-[8px] font-black uppercase text-slate-600",children:"Cancel"}),m.jsx("button",{type:"submit",className:"flex-1 py-1.5 bg-blue-600 text-white rounded-lg text-[8px] font-black uppercase",children:"Create"})]})]}),m.jsxs("form",{onSubmit:Ht,className:"space-y-4",children:[m.jsx("input",{required:!0,type:"text",placeholder:"URL...",value:Ee,onChange:re=>me(re.target.value),className:"w-full bg-black/40 border border-white/10 rounded-lg px-4 py-3 text-[10px] text-white focus:outline-none focus:border-white/20"}),m.jsx("input",{type:"text",placeholder:"Title...",value:A,onChange:re=>T(re.target.value),className:"w-full bg-black/40 border border-white/10 rounded-lg px-4 py-3 text-[10px] text-white focus:outline-none focus:border-white/20"}),m.jsx("div",{className:"flex flex-wrap gap-1",children:e.map(re=>m.jsx("button",{type:"button",onClick:()=>b(re),className:`px-2 py-1 rounded-md border text-[8px] font-black uppercase transition-all ${I===re?"bg-white border-white text-black":"bg-white/5 border-white/5 text-slate-500"}`,children:re},re))}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"button",onClick:yn,className:"flex-1 bg-white/5 border border-white/10 text-slate-500 py-3 rounded-xl text-[9px] font-black uppercase",children:"Abort"}),m.jsx("button",{type:"submit",disabled:!Ee||!I,className:"flex-1 py-3 bg-white text-black rounded-xl text-[9px] font-black uppercase shadow-lg disabled:opacity-30",children:"Inject"})]})]})]})]})]}),m.jsx("div",{className:"flex-1 space-y-1 overflow-y-auto px-4 custom-scrollbar mt-2 pb-10",children:Re.length===0?m.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center py-20 opacity-20",children:[m.jsx("i",{className:"fa-solid fa-wind text-3xl text-slate-700 mb-6"}),m.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-slate-700",children:"Archive Depleted"})]}):Re.map(re=>{const Oe=g.includes(re.id);return m.jsxs("div",{onClick:()=>a(re),className:`group flex items-center gap-3 p-3 rounded-2xl transition-all cursor-pointer border relative animate-fade-in pr-10 ${(i==null?void 0:i.id)===re.id?"bg-white/5 border-white/10 shadow-lg":"bg-transparent border-transparent hover:bg-white/5"}`,children:[m.jsxs("div",{className:"absolute top-2 right-3 flex flex-col items-center gap-2 z-30 opacity-0 group-hover:opacity-100 transition-opacity",children:[m.jsx("button",{onClick:Me=>{Me.stopPropagation(),d(re.id)},className:`transition-all hover:scale-125 ${Oe?"text-[#ff3b3b] scale-110":"text-slate-600 hover:text-white"}`,children:m.jsx("i",{className:`fa-${Oe?"solid":"regular"} fa-heart text-[16px]`})}),ie&&m.jsx("button",{onClick:Me=>{Me.stopPropagation(),V(re.id)},className:"text-red-500 transition-all hover:scale-125",children:m.jsx("i",{className:"fa-solid fa-xmark text-[13px]"})})]}),R===re.id&&m.jsxs("div",{className:"absolute inset-0 z-50 bg-black/95 backdrop-blur-md rounded-2xl flex items-center justify-between px-6 border border-red-500/20",onClick:Me=>Me.stopPropagation(),children:[m.jsx("span",{className:"text-[10px] font-black text-red-500 uppercase tracking-widest",children:"Delete Video?"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>V(null),className:"px-3 py-1 bg-white/5 rounded-lg text-[8px] font-black uppercase text-slate-400",children:"Cancel"}),m.jsx("button",{onClick:Me=>{Me.stopPropagation(),c(re.id),V(null)},className:"px-3 py-1 bg-red-600 text-white rounded-lg text-[8px] font-black uppercase",children:"Destroy"})]})]}),m.jsxs("div",{className:`w-24 h-14 rounded-xl bg-slate-900 flex-shrink-0 overflow-hidden relative border ${(i==null?void 0:i.id)===re.id?"border-white/20":"border-white/5"}`,children:[m.jsx("img",{src:on(re),className:"w-full h-full object-cover grayscale-[0.4] group-hover:grayscale-0 transition-all",alt:""}),m.jsx("div",{className:`absolute inset-0 flex items-center justify-center ${(i==null?void 0:i.id)===re.id?"bg-white/10":"bg-transparent"}`,children:m.jsx("i",{className:`fa-solid fa-play text-white text-[10px] ${(i==null?void 0:i.id)===re.id?"opacity-100":"opacity-0 group-hover:opacity-100"}`})})]}),m.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col justify-center gap-1.5 pr-2",children:[m.jsx("p",{className:"text-[14px] font-bold leading-tight truncate text-slate-400 transition-colors duration-300",children:re.prompt}),m.jsxs("div",{className:"flex items-center gap-3 text-[9px] font-black uppercase tracking-widest",children:[m.jsx("span",{className:"px-1.5 py-0.5 rounded-md border shrink-0",style:vn(re.category),children:re.category}),m.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[m.jsx("span",{className:"text-orange-500",children:"Views::"}),m.jsx("span",{className:"text-white",children:Rn(re.viewCount)})]}),m.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[m.jsx("span",{className:"text-blue-500",children:"Likes::"}),m.jsx("span",{className:"text-white",children:Rn(re.likeCount)})]})]})]})]},re.id)})})]})},c0=({onLogin:s,onIdentify:e,onRestore:r,onClose:i,defaultName:a="",isIdentityLocked:c=!1,profilePic:d="",onProfilePicChange:g})=>{const[v,x]=H.useState("identity"),[S,N]=H.useState("identify"),[L,z]=H.useState(a),[W,q]=H.useState(""),[B,te]=H.useState(""),[ie,he]=H.useState(!0),[xe,Ee]=H.useState(""),[me,A]=H.useState(!1),[T,I]=H.useState(!1);H.useEffect(()=>{a&&z(a)},[a]);const b=E=>{E.preventDefault(),!me&&(A(!0),Ee(""),setTimeout(()=>{S==="identify"?e(L,ie)||(Ee("Invalid persona name"),A(!1)):r(W)?(I(!0),setTimeout(()=>i==null?void 0:i(),1200)):(Ee("Node key not recognized"),A(!1))},900))},R=E=>{E.preventDefault(),!me&&(A(!0),Ee(""),setTimeout(()=>{s(B,ie)||(Ee("Access denied  invalid token"),te("")),A(!1)},900))},V=E=>{x(E),Ee(""),te("")};return m.jsxs("div",{className:"w-full max-w-lg animate-fade-in relative z-10",children:[m.jsxs("div",{className:"text-center mb-8 relative",children:[i&&m.jsx("button",{onClick:i,className:"absolute -top-2 -right-2 w-9 h-9 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center text-slate-400 hover:text-white transition-all border border-white/10",children:m.jsx("i",{className:"fa-solid fa-xmark text-xs"})}),m.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[m.jsx("div",{className:"w-px h-6 bg-gradient-to-b from-transparent via-blue-500 to-transparent"}),m.jsx("h1",{className:"text-2xl font-black text-white uppercase tracking-[0.3em] leading-none",children:"ARCHIVE ACCESS"}),m.jsx("div",{className:"w-px h-6 bg-gradient-to-b from-transparent via-blue-500 to-transparent"})]}),m.jsx("p",{className:"text-[8px] font-bold text-blue-500 uppercase tracking-[0.5em]",children:"Neural Handshake Protocol"})]}),m.jsxs("div",{className:"flex gap-3 mb-6",children:[m.jsxs("button",{onClick:()=>V("identity"),className:`flex-1 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center justify-center gap-2 border ${v==="identity"?"bg-blue-600 border-blue-500 text-white shadow-[0_0_30px_rgba(59,130,246,0.3)]":"bg-white/5 border-white/10 text-slate-500 hover:text-white hover:border-white/20"}`,children:[m.jsx("i",{className:"fa-solid fa-user-astronaut"}),"User Identity"]}),m.jsxs("button",{onClick:()=>V("admin"),className:`flex-1 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center justify-center gap-2 border ${v==="admin"?"bg-white border-white text-slate-950 shadow-lg":"bg-white/5 border-white/10 text-slate-500 hover:text-white hover:border-white/20"}`,children:[m.jsx("i",{className:"fa-solid fa-terminal"}),"Admin"]})]}),m.jsxs("div",{className:"glass rounded-[2rem] border border-white/10 shadow-[0_50px_100px_-20px_rgba(0,0,0,0.6)] relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-blue-500/60 to-transparent"}),v==="identity"&&m.jsxs("div",{className:"p-8 space-y-6",children:[m.jsxs("div",{className:"flex bg-black/40 p-1 rounded-xl border border-white/5",children:[m.jsx("button",{onClick:()=>{N("identify"),Ee("")},className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all ${S==="identify"?"bg-blue-600 text-white shadow-lg":"text-slate-500 hover:text-white"}`,children:c?"Switch Persona":"New Persona"}),m.jsx("button",{onClick:()=>{N("restore"),Ee("")},className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all ${S==="restore"?"bg-blue-600 text-white shadow-lg":"text-slate-500 hover:text-white"}`,children:"Restore Node"})]}),m.jsxs("form",{onSubmit:b,className:"space-y-5",children:[S==="identify"?m.jsxs("div",{className:"space-y-3",children:[m.jsxs("label",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[m.jsx("i",{className:"fa-solid fa-fingerprint text-blue-500"}),"Persona Identifier"]}),m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsxs("div",{className:"relative w-14 h-14 rounded-full overflow-hidden border-2 border-blue-500/30 flex-shrink-0 bg-slate-900",children:[d?m.jsx("img",{src:d,className:"w-full h-full object-cover",alt:"profile"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center",children:m.jsx("i",{className:"fa-solid fa-user text-slate-600 text-xl"})}),m.jsx("div",{className:"absolute inset-0 cursor-pointer flex items-center justify-center bg-black/50 opacity-0 hover:opacity-100 transition-opacity",onClick:E=>{E.preventDefault(),E.stopPropagation();const ae=document.getElementById("pic-upload");ae==null||ae.click()},children:m.jsx("i",{className:"fa-solid fa-camera text-white text-sm"})}),m.jsx("input",{id:"pic-upload",type:"file",accept:"image/*",className:"hidden",onChange:E=>{var be;const ae=(be=E.target.files)==null?void 0:be[0];if(ae){const Le=new FileReader;Le.onload=Fe=>{var Y;return g==null?void 0:g((Y=Fe.target)==null?void 0:Y.result)},Le.readAsDataURL(ae)}}})]}),m.jsx("p",{className:"text-[8px] text-slate-500 uppercase tracking-widest leading-relaxed",children:"Click to upload your profile photo"})]}),m.jsx("input",{autoFocus:!0,required:!0,type:"text",placeholder:"ENTER YOUR NAME...",value:L,onChange:E=>{z(E.target.value.toUpperCase()),Ee("")},disabled:me,className:`w-full bg-slate-950/80 border ${xe?"border-red-500/60":"border-white/10"} rounded-xl px-6 py-4 text-center text-base tracking-[0.2em] text-white focus:outline-none focus:border-blue-500/50 transition-all font-mono placeholder:tracking-normal placeholder:text-[9px] placeholder:font-black placeholder:text-slate-700`}),m.jsx("p",{className:"text-[8px] text-slate-600 uppercase tracking-widest text-center px-4 leading-relaxed",children:"Your name is your personal archive key  all favorites & settings are saved to this identity."})]}):m.jsxs("div",{className:"space-y-3",children:[m.jsxs("label",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[m.jsx("i",{className:"fa-solid fa-dna text-blue-500"}),"Neural Node Key"]}),m.jsx("input",{autoFocus:!0,required:!0,type:"text",placeholder:"INT-XXXX-XX...",value:W,onChange:E=>{q(E.target.value.toUpperCase()),Ee("")},disabled:me,className:`w-full bg-slate-950/80 border ${xe?"border-red-500/60":"border-white/10"} rounded-xl px-6 py-4 text-center text-base tracking-[0.1em] text-white focus:outline-none focus:border-blue-500 transition-all font-mono placeholder:tracking-normal placeholder:text-[9px]`}),m.jsx("p",{className:"text-[8px] text-slate-600 uppercase tracking-widest text-center px-4 leading-relaxed",children:"Restore a previous session using your node key (format: INT-XXXX-XX)"})]}),xe&&m.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-red-500/10 border border-red-500/20 rounded-xl",children:[m.jsx("i",{className:"fa-solid fa-triangle-exclamation text-red-500 text-xs"}),m.jsx("span",{className:"text-[9px] font-black text-red-400 uppercase tracking-widest",children:xe})]}),m.jsxs("label",{className:"flex items-center gap-3 cursor-pointer select-none px-1",children:[m.jsxs("div",{className:"relative w-10 h-6 flex-shrink-0",children:[m.jsx("input",{type:"checkbox",className:"sr-only",checked:ie,onChange:E=>he(E.target.checked)}),m.jsx("div",{className:`absolute inset-0 rounded-full transition-all ${ie?"bg-blue-600 shadow-[0_0_12px_rgba(59,130,246,0.4)]":"bg-slate-800"}`}),m.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-all transform ${ie?"translate-x-4":"translate-x-0"}`})]}),m.jsx("span",{className:`text-[8px] font-black uppercase tracking-widest ${ie?"text-blue-400":"text-slate-600"}`,children:"Remember me across sessions"})]}),m.jsx("button",{type:"submit",disabled:me||(S==="identify"?!L:!W),className:`w-full py-4 rounded-xl text-[9px] font-black uppercase tracking-[0.4em] transition-all shadow-xl disabled:opacity-30 ${T?"bg-green-600 text-white":me?"bg-slate-800 text-slate-500 cursor-wait":"bg-blue-600 text-white hover:bg-blue-500"}`,children:me?"Syncing matrix...":T?" Node Restored":S==="identify"?c?"Update Persona":"Initialize Node":"Restore Node"})]})]}),v==="admin"&&m.jsxs("div",{className:"p-8 space-y-6",children:[m.jsxs("div",{className:"flex items-center gap-4 p-4 bg-amber-500/5 border border-amber-500/20 rounded-2xl",children:[m.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center flex-shrink-0",children:m.jsx("i",{className:"fa-solid fa-shield-halved text-amber-500"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase tracking-widest",children:"Admin Terminal"}),m.jsx("p",{className:"text-[8px] text-slate-500 uppercase tracking-widest mt-0.5",children:"Full archive control  restricted access"})]})]}),m.jsxs("form",{onSubmit:R,className:"space-y-5",children:[m.jsxs("div",{className:"space-y-3",children:[m.jsxs("label",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[m.jsx("i",{className:"fa-solid fa-key text-amber-500"}),"Security Token"]}),m.jsx("input",{autoFocus:!0,required:!0,type:"password",placeholder:"ENTER ADMIN TOKEN...",value:B,onChange:E=>{te(E.target.value),Ee("")},disabled:me,className:`w-full bg-slate-950/80 border ${xe?"border-red-500/60":"border-amber-500/20"} rounded-xl px-6 py-4 text-center text-base tracking-[0.4em] text-white focus:outline-none focus:border-amber-500/50 transition-all font-mono placeholder:tracking-normal placeholder:text-[9px] placeholder:font-black placeholder:text-slate-700`})]}),xe&&m.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-red-500/10 border border-red-500/20 rounded-xl",children:[m.jsx("i",{className:"fa-solid fa-triangle-exclamation text-red-500 text-xs"}),m.jsx("span",{className:"text-[9px] font-black text-red-400 uppercase tracking-widest",children:xe})]}),m.jsxs("label",{className:"flex items-center gap-3 cursor-pointer select-none px-1",children:[m.jsxs("div",{className:"relative w-10 h-6 flex-shrink-0",children:[m.jsx("input",{type:"checkbox",className:"sr-only",checked:ie,onChange:E=>he(E.target.checked)}),m.jsx("div",{className:`absolute inset-0 rounded-full transition-all ${ie?"bg-amber-500 shadow-[0_0_12px_rgba(245,158,11,0.4)]":"bg-slate-800"}`}),m.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-all transform ${ie?"translate-x-4":"translate-x-0"}`})]}),m.jsx("span",{className:`text-[8px] font-black uppercase tracking-widest ${ie?"text-amber-400":"text-slate-600"}`,children:"Keep admin session active"})]}),m.jsx("button",{type:"submit",disabled:me||!B,className:`w-full py-4 rounded-xl text-[9px] font-black uppercase tracking-[0.4em] transition-all shadow-xl disabled:opacity-30 ${me?"bg-slate-800 text-slate-500 cursor-wait":"bg-white text-slate-950 hover:bg-amber-50"}`,children:me?"Authorizing...":"Authorize Admin Access"})]}),m.jsx("div",{className:"pt-4 border-t border-white/5",children:m.jsx("p",{className:"text-[8px] text-slate-700 uppercase tracking-widest text-center leading-relaxed",children:"Admin grants full control: add/remove videos, manage all users, approve reviews & sync source"})})]})]})]})},h0=({videos:s,categoryColors:e,currentVideo:r,onSelect:i,isOpen:a,onClose:c,onToggleFavorite:d,onRemove:g,isAuthorized:v,currentUser:x})=>{const[S,N]=H.useState(null);if(!a)return null;const L=q=>{if(q.thumbnail)return q.thumbnail;const B=q.url.trim(),te=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/|shorts\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,ie=B.match(te),he=ie&&ie[1]&&ie[1].length===11?ie[1]:B.length===11?B:null;return he?`https://img.youtube.com/vi/${he}/mqdefault.jpg`:""},z=q=>{const B=e[q]||"#64748b";return{color:B,borderColor:`${B}4D`,backgroundColor:`${B}1A`}},W=(q,B)=>{q.stopPropagation(),d(B),N(null)};return m.jsx("div",{className:"w-full animate-fade-in mt-4",children:m.jsxs("div",{className:"bg-[#0f172a]/80 backdrop-blur-2xl p-8 rounded-[2.5rem] border border-blue-500/20 shadow-[0_20px_60px_-15px_rgba(0,0,0,0.5)] relative overflow-hidden ring-1 ring-blue-500/10",children:[m.jsxs("div",{className:"flex items-center justify-between mb-8",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsxs("h3",{className:"text-[13px] font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-2",children:[m.jsx("i",{className:"fa-solid fa-vault text-blue-600"}),x.replace(/_/g," "),"'S VAULT"]}),m.jsxs("p",{className:"text-[8px] font-bold text-slate-600 uppercase tracking-widest mt-1 pl-6",children:[s.length," saved videos"]})]}),m.jsx("button",{onClick:c,className:"w-10 h-10 rounded-xl bg-white/5 hover:bg-white/10 flex items-center justify-center text-slate-400 hover:text-white transition-all border border-white/10",children:m.jsx("i",{className:"fa-solid fa-xmark"})})]}),m.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto custom-scrollbar pr-2",children:s.length===0?m.jsxs("div",{className:"py-20 text-center opacity-40",children:[m.jsx("i",{className:"fa-solid fa-heart-crack text-4xl mb-4 text-slate-700 block"}),m.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"No saved videos yet"})]}):s.map(q=>{const B=z(q.category);return m.jsxs("div",{onClick:()=>i(q),className:`group flex items-center gap-3 p-3 rounded-2xl transition-all cursor-pointer border relative animate-fade-in pr-10 ${(r==null?void 0:r.id)===q.id?"bg-white/10 border-white/20 ring-1 ring-white/10":"bg-transparent border-transparent hover:bg-white/5"}`,children:[m.jsxs("div",{className:`w-24 h-14 rounded-xl bg-slate-900 flex-shrink-0 overflow-hidden relative shadow-2xl border ${(r==null?void 0:r.id)===q.id?"border-blue-500/30":"border-white/5"}`,children:[m.jsx("img",{src:L(q),className:"w-full h-full object-cover",alt:""}),m.jsx("div",{className:`absolute inset-0 flex items-center justify-center ${(r==null?void 0:r.id)===q.id?"bg-blue-600/30":"bg-black/0 group-hover:bg-black/20"}`,children:m.jsx("div",{className:`w-8 h-8 rounded-full bg-white flex items-center justify-center shadow-lg transition-transform duration-300 ${(r==null?void 0:r.id)===q.id?"scale-100":"scale-0 group-hover:scale-100"}`,children:m.jsx("i",{className:"fa-solid fa-play text-blue-600 text-[10px] ml-0.5"})})})]}),m.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col justify-center gap-1.5 pr-2",children:[m.jsx("p",{className:"text-[13px] font-bold leading-tight truncate text-slate-400",children:q.prompt}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("span",{className:"text-[10px] font-black uppercase tracking-tighter px-1.5 py-0.5 rounded-md border shrink-0",style:B,children:q.category}),m.jsxs("span",{className:"text-[10px] font-black text-orange-500 shrink-0",children:["Views:: ",m.jsx("span",{className:"text-slate-300",children:q.viewCount.toLocaleString()})]})]})]}),m.jsx("div",{className:"absolute top-0 bottom-0 right-3 py-3 flex flex-col items-center justify-center z-30 opacity-0 group-hover:opacity-100 transition-opacity",children:m.jsx("button",{onClick:te=>{te.stopPropagation(),N(q.id)},className:"text-red-500 hover:scale-125 transition-transform",children:m.jsx("i",{className:"fa-solid fa-xmark text-[13px]"})})}),S===q.id&&m.jsxs("div",{className:"absolute inset-0 z-50 bg-[#0f172a]/95 backdrop-blur-xl rounded-2xl flex items-center justify-between px-6 animate-fade-in border border-red-500/20",onClick:te=>te.stopPropagation(),children:[m.jsx("span",{className:"text-[10px] font-black text-red-500 uppercase tracking-widest",children:"Remove from vault?"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:te=>{te.stopPropagation(),N(null)},className:"px-4 py-2 rounded-xl bg-white/5 border border-white/10 text-[8px] font-black uppercase tracking-widest text-slate-400",children:"Cancel"}),m.jsx("button",{onClick:te=>W(te,q.id),className:"px-4 py-2 rounded-xl bg-red-600 text-white text-[8px] font-black uppercase tracking-widest shadow-lg",children:"Remove"})]})]})]},q.id)})})]})})},d0=({video:s,isOpen:e,onClose:r,onSubmitReview:i,initialTab:a="Read"})=>{const[c,d]=H.useState(a),[g,v]=H.useState(0),[x,S]=H.useState(""),[N,L]=H.useState(!1),[z,W]=H.useState(!1),q=H.useMemo(()=>(s.reviews||[]).filter(te=>te.isApproved).sort((te,ie)=>ie.timestamp-te.timestamp),[s]);H.useEffect(()=>{e&&(W(!1),v(0),S(""),d(a))},[e,a]),H.useEffect(()=>{if(z){const te=setTimeout(()=>r(),3e3);return()=>clearTimeout(te)}},[z,r]);const B=te=>{te.preventDefault(),!(g===0||!x.trim())&&(L(!0),setTimeout(()=>{i(g,x),L(!1),W(!0)},1200))};return e?m.jsx("div",{className:"w-full animate-fade-in mt-4",children:m.jsx("div",{className:"bg-slate-900/90 p-8 rounded-[2.5rem] border border-white/5 shadow-2xl relative overflow-hidden backdrop-blur-2xl",children:z?m.jsxs("div",{className:"py-12 text-center flex flex-col items-center",children:[m.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500/10 text-purple-500 flex items-center justify-center mb-6 border border-purple-500/20 shadow-lg",children:m.jsx("i",{className:"fa-solid fa-check text-2xl"})}),m.jsx("h3",{className:"text-white text-[14px] font-black uppercase tracking-widest mb-2",children:"Review Submitted"}),m.jsx("p",{className:"text-slate-500 text-[9px] font-bold uppercase tracking-widest",children:"Awaiting verification..."})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center justify-between mb-8",children:[m.jsxs("div",{className:"flex gap-6",children:[m.jsxs("button",{onClick:()=>d("Read"),className:`text-[9px] font-black uppercase tracking-widest pb-2 border-b-2 transition-all cursor-pointer ${c==="Read"?"text-purple-500 border-purple-500":"text-purple-500/40 border-transparent hover:text-purple-500/70"}`,children:["Read (",q.length,")"]}),m.jsx("button",{onClick:()=>d("Write"),className:`text-[9px] font-black uppercase tracking-widest pb-2 border-b-2 transition-all cursor-pointer ${c==="Write"?"text-purple-500 border-purple-500":"text-purple-500/40 border-transparent hover:text-purple-500/70"}`,children:"Write"})]}),m.jsx("button",{onClick:r,className:"w-8 h-8 rounded-lg bg-white/5 text-slate-500 hover:text-white flex items-center justify-center transition-all border border-white/10 cursor-pointer",children:m.jsx("i",{className:"fa-solid fa-xmark"})})]}),c==="Write"?m.jsxs("form",{onSubmit:B,className:"space-y-6",children:[m.jsx("div",{className:"flex justify-center gap-4 py-4 bg-black/40 rounded-2xl border border-white/5",children:[1,2,3,4,5].map(te=>m.jsx("button",{type:"button",onClick:()=>v(te),className:"transition-all hover:scale-125 focus:outline-none cursor-pointer",children:m.jsx("i",{className:`fa-solid fa-star text-xl ${te<=g?"text-purple-500 drop-shadow-[0_0_8px_rgba(168,85,247,0.4)]":"text-slate-800"}`})},te))}),m.jsx("textarea",{autoFocus:!0,value:x,onChange:te=>S(te.target.value),placeholder:"Share your experience...",className:"w-full h-32 bg-black/40 border border-white/10 rounded-2xl p-6 text-[12px] text-white placeholder:text-slate-800 focus:outline-none focus:border-purple-500/30 resize-none transition-all"}),m.jsx("button",{type:"submit",disabled:N||g===0||!x.trim(),className:`w-full py-4 rounded-xl text-[9px] font-black uppercase tracking-widest shadow-lg transition-all ${N?"bg-slate-800 text-slate-600 cursor-wait":"bg-purple-600 text-white hover:bg-purple-500 cursor-pointer"}`,children:N?"Syncing...":"Publish"})]}):m.jsx("div",{className:"space-y-4 max-h-[350px] overflow-y-auto custom-scrollbar pr-2",children:q.length===0?m.jsxs("div",{className:"py-16 text-center opacity-10 flex flex-col items-center",children:[m.jsx("i",{className:"fa-solid fa-comment-slash text-3xl mb-4 text-white"}),m.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest",children:"No reviews detected"})]}):q.map(te=>m.jsxs("div",{className:"p-5 rounded-2xl bg-black/40 border border-white/5 flex flex-col gap-3 shadow-sm hover:border-white/10 transition-all",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:te.user}),m.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(ie=>m.jsx("i",{className:`fa-solid fa-star text-[10px] ${ie<=te.rating?"text-purple-500":"text-slate-800"}`},ie))})]}),m.jsxs("p",{className:"text-[12px] text-slate-400 italic leading-relaxed pl-4 border-l-2 border-white/5",children:['"',te.text,'"']}),m.jsx("span",{className:"text-[7px] font-black text-slate-700 uppercase tracking-widest text-right",children:new Date(te.timestamp).toLocaleDateString()})]},te.id))})]})})}):null},Cn=4221,Lo="NEURAL_NODE_01",f0={NEURAL_NODE_01:["v-int-001","v-permia-001","v-env-001"],SHAWN:["v-int-001","v-int-005","v-permia-001","v-env-001","v-span-001"]},p0=[{id:"v-int-001",prompt:"Tree of Life - Deep Forest Ritual",category:"Integral Serenity",url:"-WlazEoSDLY",thumbnail:"https://img.youtube.com/vi/-WlazEoSDLY/mqdefault.jpg"},{id:"v-int-002",prompt:"Zen Garden - Water Flow Harmony",category:"Integral Serenity",url:"pESW6LOmVLU",thumbnail:"https://img.youtube.com/vi/pESW6LOmVLU/mqdefault.jpg"},{id:"v-int-003",prompt:"Fly Over - Mountain Peaks in Mist",category:"Integral Serenity",url:"GdNF0AXZmKc",thumbnail:"https://img.youtube.com/vi/GdNF0AXZmKc/mqdefault.jpg"},{id:"v-int-004",prompt:"Ancient Roots - Timelapse Growth",category:"Integral Serenity",url:"r_QUhGDxksI",thumbnail:"https://img.youtube.com/vi/r_QUhGDxksI/mqdefault.jpg"},{id:"v-int-005",prompt:"Personal Soak Area - Thermal Serenity",category:"Integral Serenity",url:"AcyxEMeBDt0",thumbnail:"https://img.youtube.com/vi/AcyxEMeBDt0/mqdefault.jpg"},{id:"v-int-010",prompt:"Celestial Meditation - Stars and Void",category:"Integral Serenity",url:"668nreJIm8E",thumbnail:"https://img.youtube.com/vi/668nreJIm8E/mqdefault.jpg"},{id:"v-permia-001",prompt:"Dome Architecture - The Geodesic Vision",category:"Permia Community",url:"CFuwwO9XgQA",thumbnail:"https://img.youtube.com/vi/CFuwwO9XgQA/mqdefault.jpg"},{id:"v-permia-002",prompt:"Permia Living Framework - Modular Design",category:"Permia Community",url:"0jxDFgNmRPg",thumbnail:"https://img.youtube.com/vi/0jxDFgNmRPg/mqdefault.jpg"},{id:"v-permia-003",prompt:"Intentional Living - Communal Spaces",category:"Permia Community",url:"BxDtPJgK7WE",thumbnail:"https://img.youtube.com/vi/BxDtPJgK7WE/mqdefault.jpg"},{id:"v-permia-004",prompt:"Sustainable Cities - Vertical Gardens",category:"Permia Community",url:"e-i5S4AbgpA",thumbnail:"https://img.youtube.com/vi/e-i5S4AbgpA/mqdefault.jpg"},{id:"v-permia-008",prompt:"Solar Village - Energy Independence",category:"Permia Community",url:"2jBiBvFH5sc",thumbnail:"https://img.youtube.com/vi/2jBiBvFH5sc/mqdefault.jpg"},{id:"v-env-001",prompt:"Heal the Earth - Cinematic Nature 4K",category:"Environment",url:"_5aA54MD4ho",thumbnail:"https://img.youtube.com/vi/_5aA54MD4ho/mqdefault.jpg"},{id:"v-env-002",prompt:"Peace on Earth - Global Vistas",category:"Environment",url:"SmruzusGWTk",thumbnail:"https://img.youtube.com/vi/SmruzusGWTk/mqdefault.jpg"},{id:"v-env-004",prompt:"Amazon Rainforest - The Earth's Lungs",category:"Environment",url:"MqHhPApGM0Q",thumbnail:"https://img.youtube.com/vi/MqHhPApGM0Q/mqdefault.jpg"},{id:"v-env-005",prompt:"Arctic Silence - Glacial Majesty",category:"Environment",url:"Zp9fA-YidYk",thumbnail:"https://img.youtube.com/vi/Zp9fA-YidYk/mqdefault.jpg"},{id:"v-trib-001",prompt:"Desert Echoes - Ritual Dance",category:"Tribal",url:"j3v8G9k9kI0",thumbnail:"https://img.youtube.com/vi/j3v8G9k9kI0/mqdefault.jpg"},{id:"v-dance-001",prompt:"Urban Flow - Contemporary Movement",category:"Dance",url:"9yc15Hn06Lw",thumbnail:"https://img.youtube.com/vi/9yc15Hn06Lw/mqdefault.jpg"},{id:"v-span-001",prompt:"Meditacin Guiada - Naturaleza Viva",category:"Spanish",url:"MqHhPApGM0Q",thumbnail:"https://img.youtube.com/vi/MqHhPApGM0Q/mqdefault.jpg"}],m0=()=>p0.map((s,e)=>({...s,timestamp:Date.now()-e*1e5,status:"ready",viewCount:0,likeCount:0,dislikeCount:0,rating:0,isFavorite:!1,isLiked:!1,isDisliked:!1,reviews:[]})),g0=()=>{const s=["dQw4w9WgXcQ","CHSnz0DQw68","5Wn4M_9-H9I","X_JBFLs3vAk","LXO-jKksQkM"],e=s[Math.floor(Math.random()*s.length)];return{id:`surprise-${Date.now()}`,prompt:"Neural Surprise Signal",category:"Fav. Pick",url:e,timestamp:Date.now(),status:"ready",viewCount:0,likeCount:0,dislikeCount:0,rating:0,isFavorite:!1,isLiked:!1,isDisliked:!1,reviews:[]}},y0=({videos:s,categories:e,onApprove:r,onReject:i,onAddVideo:a,onRemoveVideo:c,onClose:d,isCheckingSync:g,cloudVersion:v,onHardSync:x,currentUser:S,userFavMap:N})=>{const[L,z]=H.useState("Queue"),[W,q]=H.useState(!1),[B,te]=H.useState(!1),[ie,he]=H.useState(""),[xe,Ee]=H.useState(""),[me,A]=H.useState(e[0]||"Other"),[T,I]=H.useState(!1),b=H.useMemo(()=>{const ae=[];return s.forEach(be=>{(be.reviews||[]).forEach(Le=>{Le.isApproved||ae.push({...Le,videoTitle:be.prompt,videoId:be.id})})}),ae.sort((be,Le)=>Le.timestamp-be.timestamp)},[s]);H.useEffect(()=>{const be=(Le=>{const Fe=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/|shorts\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,Y=Le.match(Fe);return Y&&Y[1]&&Y[1].length===11?Y[1]:Le.length===11?Le:null})(ie);be&&!xe&&(I(!0),fetch(`https://noembed.com/embed?url=https://www.youtube.com/watch?v=${be}`).then(Le=>Le.json()).then(Le=>{Le.title&&Ee(Le.title),I(!1)}).catch(()=>I(!1)))},[ie,xe]);const R=H.useMemo(()=>{const ae=s.map(be=>({id:be.id.startsWith("m-")?`v-${Math.random().toString(36).substr(2,5)}`:be.id,prompt:be.prompt,category:be.category,url:be.url,thumbnail:be.thumbnail||`https://img.youtube.com/vi/${be.url}/mqdefault.jpg`}));return`import { VideoItem, VideoCategory, Review } from '../types';

export const LIBRARY_VERSION = ${Cn};

/**
 * MASTER_IDENTITY: The last active identity during source generation.
 */
export const MASTER_IDENTITY = "${S}";

/**
 * HARDCODED_FAVORITES: Captures ALL user vaults (including SHAWN and NEURAL_NODE_01)
 * This ensures favorites are permanent for specific identities across reloads.
 */
export const HARDCODED_FAVORITES: Record<string, string[]> = ${JSON.stringify(N,null,2)};

const INITIAL_VIDEO_DATA: any[] = ${JSON.stringify(ae,null,2)};

export const getSampleLibrary = (): VideoItem[] => {
  return INITIAL_VIDEO_DATA.map((item, idx) => ({
    ...item,
    timestamp: Date.now() - (idx * 100000),
    status: 'ready',
    viewCount: 0,
    likeCount: 0,
    dislikeCount: 0,
    rating: 0,
    isFavorite: false, 
    isLiked: false,
    isDisliked: false,
    reviews: []
  }));
};

export const getSurpriseVideo = (): VideoItem => {
  const pool = ['dQw4w9WgXcQ', 'CHSnz0DQw68', '5Wn4M_9-H9I', 'X_JBFLs3vAk', 'LXO-jKksQkM'];
  const id = pool[Math.floor(Math.random() * pool.length)];
  return {
    id: \`surprise-\${Date.now()}\`,
    prompt: "Neural Surprise Signal",
    category: 'Fav. Pick',
    url: id,
    timestamp: Date.now(),
    status: 'ready',
    viewCount: 0,
    likeCount: 0,
    dislikeCount: 0,
    rating: 0,
    isFavorite: false,
    isLiked: false,
    isDisliked: false,
    reviews: []
  };
};`},[s,S,N]),V=()=>{navigator.clipboard.writeText(R),q(!0),setTimeout(()=>q(!1),2e3)},E=()=>{te(!0),x()};return m.jsx("div",{className:"w-full animate-fade-in mt-4",children:m.jsxs("div",{className:"bg-[#0f172a]/95 backdrop-blur-xl rounded-[2.5rem] border border-white/10 shadow-[0_20px_60px_-15px_rgba(0,0,0,0.5)] overflow-hidden flex flex-col ring-1 ring-white/5 max-h-[750px]",children:[m.jsxs("div",{className:"p-6 border-b border-white/5 flex items-center justify-between shrink-0 bg-gradient-to-r from-blue-500/10 to-transparent",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-blue-600/20 border border-blue-500/40 text-blue-400",children:m.jsx("i",{className:"fa-solid fa-terminal text-lg"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-[12px] font-black text-white uppercase tracking-tighter",children:"Terminal Console"}),m.jsx("p",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-widest mt-0.5",children:"Neural Management Interface"})]})]}),m.jsxs("div",{className:"flex bg-black/40 p-1 rounded-xl border border-white/5",children:[m.jsxs("button",{onClick:()=>z("Queue"),className:`px-3 py-1.5 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all ${L==="Queue"?"bg-white text-slate-950 shadow-lg":"text-slate-500 hover:text-white"}`,children:["Queue (",b.length,")"]}),m.jsx("button",{onClick:()=>z("Forge"),className:`px-3 py-1.5 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all ${L==="Forge"?"bg-blue-600 text-white shadow-lg":"text-slate-500 hover:text-white"}`,children:"Forge"}),m.jsx("button",{onClick:()=>z("Developer"),className:`px-3 py-1.5 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all ${L==="Developer"?"bg-purple-600 text-white shadow-lg":"text-slate-500 hover:text-white"}`,children:"Source Sync"})]}),m.jsx("button",{onClick:d,className:"w-8 h-8 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center text-slate-400 hover:text-white transition-all border border-white/10",children:m.jsx("i",{className:"fa-solid fa-xmark text-xs"})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",children:L==="Queue"?m.jsx("div",{className:"grid gap-3",children:b.length===0?m.jsxs("div",{className:"py-20 flex flex-col items-center justify-center text-center opacity-40",children:[m.jsx("i",{className:"fa-solid fa-check-double text-3xl mb-4 text-slate-700"}),m.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500",children:"Queue Purged"})]}):b.map(ae=>m.jsxs("div",{className:"p-4 rounded-2xl bg-white/5 border border-white/5 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"flex items-center gap-2 mb-1",children:m.jsxs("span",{className:"text-[8px] font-black text-purple-400 uppercase tracking-widest",children:["USER::",ae.user]})}),m.jsxs("p",{className:"text-[10px] text-slate-400 italic truncate",children:['"',ae.text,'"']})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>i(ae.videoId,ae.id),className:"px-3 py-1.5 rounded-lg border border-red-500/20 text-red-500 hover:bg-red-500/10 text-[8px] font-black uppercase",children:"Reject"}),m.jsx("button",{onClick:()=>r(ae.videoId,ae.id),className:"px-3 py-1.5 rounded-lg bg-purple-600 text-white text-[8px] font-black uppercase",children:"Approve"})]})]},ae.id))}):L==="Forge"?m.jsxs("div",{className:"space-y-6 animate-fade-in",children:[m.jsxs("div",{className:"p-6 rounded-3xl bg-blue-600/5 border border-blue-500/20",children:[m.jsx("h3",{className:"text-[10px] font-black text-blue-400 uppercase tracking-[0.4em] mb-4",children:"Signal Injection"}),m.jsxs("form",{onSubmit:ae=>{ae.preventDefault(),a(ie,xe,me),he(""),Ee("")},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",placeholder:"YouTube URL...",value:ie,onChange:ae=>he(ae.target.value),className:"w-full bg-black/40 border border-white/5 rounded-xl px-4 py-3 text-[10px] text-white focus:outline-none"}),T&&m.jsx("i",{className:"fa-solid fa-spinner fa-spin absolute right-4 top-1/2 -translate-y-1/2 text-blue-500 text-[10px]"})]}),m.jsx("input",{type:"text",placeholder:"Title...",value:xe,onChange:ae=>Ee(ae.target.value),className:"w-full bg-black/40 border border-white/5 rounded-xl px-4 py-3 text-[10px] text-white focus:outline-none"}),m.jsx("select",{value:me,onChange:ae=>A(ae.target.value),className:"w-full bg-black/40 border border-white/5 rounded-xl px-4 py-3 text-[10px] text-white focus:outline-none",children:e.map(ae=>m.jsx("option",{value:ae,children:ae},ae))}),m.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-500 text-white rounded-xl text-[10px] font-black uppercase tracking-widest shadow-lg",children:"Inject Signal"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.4em] mb-4 flex justify-between",children:["Signal Matrix ",m.jsxs("span",{className:"text-blue-500",children:[s.length," Active"]})]}),m.jsx("div",{className:"grid gap-2",children:s.map(ae=>m.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/5 flex items-center justify-between group",children:[m.jsxs("div",{className:"flex items-center gap-3 overflow-hidden text-ellipsis",children:[m.jsx("div",{className:"w-10 h-6 rounded bg-slate-900 overflow-hidden shrink-0",children:m.jsx("img",{src:`https://img.youtube.com/vi/${ae.url}/mqdefault.jpg`,className:"w-full h-full object-cover opacity-50"})}),m.jsx("div",{className:"truncate",children:m.jsx("p",{className:"text-[10px] font-black text-slate-400 truncate",children:ae.prompt})})]}),m.jsx("button",{onClick:()=>c(ae.id),className:"w-8 h-8 rounded-lg bg-red-500/10 text-red-500 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:m.jsx("i",{className:"fa-solid fa-trash-can text-[10px]"})})]},ae.id))})]})]}):m.jsxs("div",{className:"space-y-8 animate-fade-in pb-10",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"p-6 rounded-3xl bg-blue-600/5 border border-blue-500/20 flex flex-col justify-between",children:[m.jsxs("div",{children:[m.jsxs("h4",{className:"text-[11px] font-black text-white uppercase tracking-widest mb-1 flex items-center gap-2",children:[m.jsx("i",{className:"fa-solid fa-cloud-arrow-down text-blue-500"}),"PULL: Restore Source"]}),m.jsx("p",{className:"text-[8px] text-slate-500 uppercase font-bold mb-6",children:"Wipe Local Changes & Reload"}),m.jsx("p",{className:"text-[9px] text-slate-400 leading-relaxed uppercase font-bold mb-6",children:"Reset everything back to the hardcoded `sampleData.ts`. Use this if you pushed new code to GitHub."})]}),m.jsxs("button",{onClick:E,disabled:B,className:`w-full py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-lg transition-all flex items-center justify-center gap-3 ${B?"opacity-50 cursor-wait":""}`,children:[B?m.jsx("i",{className:"fa-solid fa-circle-notch fa-spin"}):m.jsx("i",{className:"fa-solid fa-cloud-arrow-down"}),B?"Synchronizing...":"Sync with GitHub"]})]}),m.jsxs("div",{className:"p-6 rounded-3xl bg-purple-600/5 border border-purple-500/20 flex flex-col",children:[m.jsxs("h4",{className:"text-[11px] font-black text-white uppercase tracking-widest mb-1 flex items-center gap-2",children:[m.jsx("i",{className:"fa-solid fa-cloud-arrow-up text-purple-500"}),"PUSH: Commit Favorites"]}),m.jsx("p",{className:"text-[8px] text-slate-500 uppercase font-bold mb-6",children:"Make Personas Permanent"}),m.jsxs("div",{className:"space-y-4 text-[9px] text-slate-400 font-bold uppercase leading-tight",children:[m.jsxs("div",{className:"flex gap-3 items-start",children:[m.jsx("span",{className:"w-5 h-5 shrink-0 bg-purple-500/20 rounded-full flex items-center justify-center text-purple-500 font-black",children:"1"}),m.jsxs("span",{children:["The snapshot below includes all vaults for: ",m.jsx("b",{children:Object.keys(N).join(", ")})]})]}),m.jsxs("div",{className:"flex gap-3 items-start",children:[m.jsx("span",{className:"w-5 h-5 shrink-0 bg-purple-500/20 rounded-full flex items-center justify-center text-purple-500 font-black",children:"2"}),m.jsxs("span",{children:["Open ",m.jsx("span",{className:"text-purple-400",children:"sampleData.ts"})," on your machine"]})]}),m.jsxs("div",{className:"flex gap-3 items-start",children:[m.jsx("span",{className:"w-5 h-5 shrink-0 bg-purple-500/20 rounded-full flex items-center justify-center text-purple-500 font-black",children:"3"}),m.jsx("span",{children:"Replace all content with code below"})]}),m.jsxs("div",{className:"flex gap-3 items-start",children:[m.jsx("span",{className:"w-5 h-5 shrink-0 bg-purple-500/20 rounded-full flex items-center justify-center text-purple-500 font-black",children:"4"}),m.jsx("span",{children:"Push to GitHub to lock in SHAWN's vault"})]})]})]})]}),m.jsxs("div",{className:"p-6 rounded-3xl bg-slate-950 border border-white/10",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h4",{className:"text-[10px] font-black text-white uppercase tracking-widest",children:"Master Data Commit"}),m.jsxs("button",{onClick:V,className:`px-4 py-2 rounded-xl text-[9px] font-black uppercase transition-all flex items-center gap-2 ${W?"bg-green-600 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[m.jsx("i",{className:`fa-solid ${W?"fa-check":"fa-copy"}`}),W?"Copied to Clipboard!":"Copy Code"]})]}),m.jsx("pre",{className:"p-6 overflow-x-auto text-[10px] text-blue-400 font-mono bg-black/50 rounded-2xl max-h-[300px] border border-white/5 shadow-inner",children:m.jsx("code",{children:R})})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"flex justify-between items-center text-[9px] font-black uppercase tracking-widest border-b border-white/5 pb-2 text-slate-500",children:["Local Matrix: v",Cn]}),m.jsxs("div",{className:"flex justify-between items-center text-[9px] font-black uppercase tracking-widest border-b border-white/5 pb-2 text-emerald-400",children:["Cloud Node: v",v]})]})]})})]})})},v0=({currentUser:s,nodeId:e,videos:r,categories:i,categoryColors:a,userFavorites:c,onAddVideo:d,onRemoveVideo:g,onToggleFavorite:v,onSelectVideo:x,onClose:S,isAuthorized:N})=>{const[L,z]=H.useState("archive"),[W,q]=H.useState(""),[B,te]=H.useState(""),[ie,he]=H.useState(i[0]||"Other"),[xe,Ee]=H.useState(!1),[me,A]=H.useState(!1),[T,I]=H.useState(null),[b,R]=H.useState(""),[V,E]=H.useState(!1),ae=D=>{var we;const ue=D.trim();if(/^[a-zA-Z0-9_-]{11}$/.test(ue))return ue;const ve=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/|shorts\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,Ce=ue.match(ve);return Ce&&((we=Ce[1])==null?void 0:we.length)===11?Ce[1]:null},be=D=>{if(D.thumbnail)return D.thumbnail;const ue=ae(D.url);return ue?`https://img.youtube.com/vi/${ue}/mqdefault.jpg`:""},Le=D=>{q(D);const ue=ae(D);ue&&!B&&(Ee(!0),fetch(`https://noembed.com/embed?url=https://www.youtube.com/watch?v=${ue}`).then(ve=>ve.json()).then(ve=>{ve.title&&te(ve.title)}).catch(()=>{}).finally(()=>Ee(!1)))},Fe=D=>{D.preventDefault(),!(!W||!ie)&&(d(W,B||"Untitled",ie),A(!0),q(""),te(""),setTimeout(()=>{A(!1),z("archive")},1500))},Y=r.filter(D=>D.prompt.toLowerCase().includes(b.toLowerCase())||D.category.toLowerCase().includes(b.toLowerCase())),fe=r.filter(D=>c.includes(D.id)),le=()=>{navigator.clipboard.writeText(e),E(!0),setTimeout(()=>E(!1),2e3)},j=D=>a[D]||"#94a3b8";return m.jsx("div",{className:"w-full animate-fade-in mt-4",children:m.jsxs("div",{className:"bg-[#0a0f1e]/95 backdrop-blur-2xl rounded-[2.5rem] border border-blue-500/20 shadow-[0_20px_80px_-15px_rgba(0,0,0,0.8)] overflow-hidden ring-1 ring-blue-500/10",children:[m.jsxs("div",{className:"p-6 border-b border-white/5 bg-gradient-to-r from-blue-600/10 via-transparent to-transparent flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-600/20 border border-blue-500/30 flex items-center justify-center",children:m.jsx("i",{className:"fa-solid fa-user-astronaut text-blue-400 text-lg"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-[14px] font-black text-white uppercase tracking-tight",children:s.replace(/_/g," ")}),m.jsxs("button",{onClick:le,className:"flex items-center gap-1.5 mt-0.5 group",children:[m.jsx("span",{className:"text-[8px] font-black text-slate-600 uppercase tracking-widest group-hover:text-blue-400 transition-colors font-mono",children:e}),m.jsx("i",{className:`fa-solid ${V?"fa-check text-green-500":"fa-copy text-slate-700 group-hover:text-blue-400"} text-[8px] transition-colors`})]})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600/10 border border-blue-500/20 rounded-xl",children:[m.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),m.jsxs("span",{className:"text-[8px] font-black text-blue-400 uppercase tracking-widest",children:[r.length," videos"]})]}),m.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-red-500/10 border border-red-500/20 rounded-xl",children:[m.jsx("i",{className:"fa-solid fa-heart text-red-400 text-[9px]"}),m.jsxs("span",{className:"text-[8px] font-black text-red-400 uppercase tracking-widest",children:[c.length," saved"]})]}),m.jsx("button",{onClick:S,className:"w-9 h-9 rounded-xl bg-white/5 hover:bg-white/10 flex items-center justify-center text-slate-400 hover:text-white transition-all border border-white/10",children:m.jsx("i",{className:"fa-solid fa-xmark text-xs"})})]})]}),m.jsx("div",{className:"flex gap-1 px-6 pt-4",children:[{key:"archive",label:"Archive",icon:"fa-film",count:r.length},{key:"favorites",label:"Saved",icon:"fa-heart",count:c.length},{key:"add",label:"Add Video",icon:"fa-plus",count:null}].map(D=>m.jsxs("button",{onClick:()=>z(D.key),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest transition-all border ${L===D.key?"bg-blue-600/20 border-blue-500/30 text-blue-400":"bg-transparent border-transparent text-slate-600 hover:text-slate-300"}`,children:[m.jsx("i",{className:`fa-solid ${D.icon} text-[10px]`}),D.label,D.count!==null&&m.jsx("span",{className:`px-1.5 py-0.5 rounded-md text-[8px] font-black ${L===D.key?"bg-blue-500/20 text-blue-300":"bg-white/5 text-slate-600"}`,children:D.count})]},D.key))}),m.jsxs("div",{className:"p-6 max-h-[500px] overflow-y-auto custom-scrollbar",children:[L==="archive"&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"relative",children:[m.jsx("i",{className:"fa-solid fa-search absolute left-4 top-1/2 -translate-y-1/2 text-slate-600 text-[11px]"}),m.jsx("input",{type:"text",placeholder:"Search archive...",value:b,onChange:D=>R(D.target.value),className:"w-full bg-black/40 border border-white/5 rounded-xl pl-10 pr-4 py-3 text-[11px] text-white placeholder:text-slate-700 focus:outline-none focus:border-blue-500/30 transition-all"})]}),m.jsx("div",{className:"space-y-1.5",children:Y.length===0?m.jsxs("div",{className:"py-16 text-center opacity-30",children:[m.jsx("i",{className:"fa-solid fa-wind text-3xl text-slate-700 mb-4 block"}),m.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-600",children:"No videos found"})]}):Y.map(D=>m.jsxs("div",{className:"group flex items-center gap-3 p-3 rounded-2xl border border-transparent hover:bg-white/5 hover:border-white/10 transition-all relative",children:[m.jsx("div",{className:"w-20 h-12 rounded-xl bg-slate-900 overflow-hidden flex-shrink-0 cursor-pointer border border-white/5",onClick:()=>{x(D),S()},children:m.jsx("img",{src:be(D),className:"w-full h-full object-cover opacity-70 hover:opacity-100 transition-opacity",alt:""})}),m.jsxs("div",{className:"flex-1 overflow-hidden",children:[m.jsx("p",{className:"text-[12px] font-bold text-slate-300 truncate cursor-pointer hover:text-white transition-colors",onClick:()=>{x(D),S()},children:D.prompt}),m.jsx("span",{className:"text-[8px] font-black uppercase tracking-wider px-1.5 py-0.5 rounded-md border mt-1 inline-block",style:{color:j(D.category),borderColor:`${j(D.category)}40`,backgroundColor:`${j(D.category)}15`},children:D.category})]}),m.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[m.jsx("button",{onClick:()=>v(D.id),className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${c.includes(D.id)?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-white/5 text-slate-500 hover:text-red-400 border border-white/5"}`,children:m.jsx("i",{className:`fa-${c.includes(D.id)?"solid":"regular"} fa-heart text-[10px]`})}),N&&m.jsx("button",{onClick:()=>I(D.id),className:"w-8 h-8 rounded-lg bg-white/5 border border-white/5 text-slate-600 hover:text-red-400 hover:bg-red-500/10 hover:border-red-500/20 flex items-center justify-center transition-all",children:m.jsx("i",{className:"fa-solid fa-trash-can text-[10px]"})})]}),T===D.id&&m.jsxs("div",{className:"absolute inset-0 z-50 bg-black/95 rounded-2xl flex items-center justify-between px-5 border border-red-500/20 animate-fade-in",onClick:ue=>ue.stopPropagation(),children:[m.jsx("span",{className:"text-[10px] font-black text-red-400 uppercase tracking-widest",children:"Delete this video?"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>I(null),className:"px-3 py-1.5 bg-white/5 rounded-lg text-[8px] font-black uppercase text-slate-400 border border-white/10",children:"Cancel"}),m.jsx("button",{onClick:()=>{g(D.id),I(null)},className:"px-3 py-1.5 bg-red-600 text-white rounded-lg text-[8px] font-black uppercase",children:"Delete"})]})]})]},D.id))})]}),L==="favorites"&&m.jsx("div",{className:"space-y-1.5",children:fe.length===0?m.jsxs("div",{className:"py-16 text-center opacity-30",children:[m.jsx("i",{className:"fa-solid fa-heart-crack text-3xl text-slate-700 mb-4 block"}),m.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-600",children:"No saved videos yet"}),m.jsx("p",{className:"text-[8px] text-slate-700 uppercase tracking-widest mt-2",children:"Click the heart icon on any video to save it"})]}):fe.map(D=>m.jsxs("div",{className:"group flex items-center gap-3 p-3 rounded-2xl border border-transparent hover:bg-white/5 hover:border-white/10 transition-all",children:[m.jsx("div",{className:"w-20 h-12 rounded-xl bg-slate-900 overflow-hidden flex-shrink-0 cursor-pointer border border-white/5",onClick:()=>{x(D),S()},children:m.jsx("img",{src:be(D),className:"w-full h-full object-cover opacity-70 hover:opacity-100 transition-opacity",alt:""})}),m.jsxs("div",{className:"flex-1 overflow-hidden",children:[m.jsx("p",{className:"text-[12px] font-bold text-slate-300 truncate cursor-pointer hover:text-white transition-colors",onClick:()=>{x(D),S()},children:D.prompt}),m.jsx("span",{className:"text-[8px] font-black uppercase tracking-wider px-1.5 py-0.5 rounded-md border mt-1 inline-block",style:{color:j(D.category),borderColor:`${j(D.category)}40`,backgroundColor:`${j(D.category)}15`},children:D.category})]}),m.jsx("button",{onClick:()=>v(D.id),className:"w-8 h-8 rounded-lg bg-red-500/20 text-red-400 border border-red-500/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500/30",children:m.jsx("i",{className:"fa-solid fa-heart-crack text-[10px]"})})]},D.id))}),L==="add"&&m.jsx("div",{className:"space-y-5",children:me?m.jsxs("div",{className:"py-12 flex flex-col items-center animate-fade-in",children:[m.jsx("div",{className:"w-14 h-14 rounded-full bg-green-500/10 border border-green-500/20 flex items-center justify-center mb-4",children:m.jsx("i",{className:"fa-solid fa-check text-green-400 text-xl"})}),m.jsx("p",{className:"text-[11px] font-black text-white uppercase tracking-widest",children:"Video Added!"}),m.jsx("p",{className:"text-[8px] text-slate-500 uppercase tracking-widest mt-2",children:"Returning to archive..."})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"p-4 bg-blue-600/5 border border-blue-500/20 rounded-2xl space-y-1",children:[m.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase tracking-widest",children:"Add YouTube or Online Video"}),m.jsx("p",{className:"text-[8px] text-slate-600 uppercase tracking-widest",children:"Paste a YouTube URL or video ID. Title is auto-fetched."})]}),m.jsxs("form",{onSubmit:Fe,className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"YouTube URL or Video ID"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",required:!0,placeholder:"https://youtube.com/watch?v=... or video ID",value:W,onChange:D=>Le(D.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-[11px] text-white placeholder:text-slate-700 focus:outline-none focus:border-blue-500/40 transition-all"}),xe&&m.jsx("i",{className:"fa-solid fa-spinner fa-spin absolute right-4 top-1/2 -translate-y-1/2 text-blue-500 text-[11px]"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Title (auto-filled or custom)"}),m.jsx("input",{type:"text",placeholder:"Video title...",value:B,onChange:D=>te(D.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-[11px] text-white placeholder:text-slate-700 focus:outline-none focus:border-blue-500/40 transition-all"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Category"}),m.jsx("div",{className:"flex flex-wrap gap-1.5",children:i.map(D=>m.jsx("button",{type:"button",onClick:()=>he(D),className:`px-3 py-1.5 rounded-xl text-[8px] font-black uppercase tracking-wider border transition-all ${ie===D?"bg-white text-black border-white":"bg-white/5 border-white/5 text-slate-500 hover:text-white hover:border-white/20"}`,children:D},D))})]}),m.jsxs("button",{type:"submit",disabled:!W||!ie,className:"w-full py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-xl text-[10px] font-black uppercase tracking-widest shadow-lg transition-all disabled:opacity-30",children:[m.jsx("i",{className:"fa-solid fa-plus mr-2"}),"Add to Archive"]})]})]})})]})]})})};var gp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=function(s){const e=[];let r=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},_0=function(s){const e=[];let r=0,i=0;for(;r<s.length;){const a=s[r++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const c=s[r++];e[i++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=s[r++],d=s[r++],g=s[r++],v=((a&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;e[i++]=String.fromCharCode(55296+(v>>10)),e[i++]=String.fromCharCode(56320+(v&1023))}else{const c=s[r++],d=s[r++];e[i++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return e.join("")},pm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const c=s[a],d=a+1<s.length,g=d?s[a+1]:0,v=a+2<s.length,x=v?s[a+2]:0,S=c>>2,N=(c&3)<<4|g>>4;let L=(g&15)<<2|x>>6,z=x&63;v||(z=64,d||(L=64)),i.push(r[S],r[N],r[L],r[z])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(fm(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):_0(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const c=r[s.charAt(a++)],g=a<s.length?r[s.charAt(a)]:0;++a;const x=a<s.length?r[s.charAt(a)]:64;++a;const N=a<s.length?r[s.charAt(a)]:64;if(++a,c==null||g==null||x==null||N==null)throw new x0;const L=c<<2|g>>4;if(i.push(L),x!==64){const z=g<<4&240|x>>2;if(i.push(z),N!==64){const W=x<<6&192|N;i.push(W)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class x0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w0=function(s){const e=fm(s);return pm.encodeByteArray(e,!0)},Ml=function(s){return w0(s).replace(/\./g,"")},E0=function(s){try{return pm.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=()=>T0().__FIREBASE_DEFAULTS__,k0=()=>{if(typeof process>"u"||typeof gp>"u")return;const s=gp.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},I0=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&E0(s[1]);return e&&JSON.parse(e)},Eh=()=>{try{return S0()||k0()||I0()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},b0=s=>{var e,r;return(r=(e=Eh())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[s]},A0=s=>{const e=b0(s);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),i]:[e.substring(0,r),i]},mm=()=>{var s;return(s=Eh())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=e||"demo-project",a=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Ml(JSON.stringify(r)),Ml(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function P0(){var s;const e=(s=Eh())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j0(){return!P0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function D0(){try{return typeof indexedDB=="object"}catch{return!1}}function V0(){return new Promise((s,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="FirebaseError";class $i extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=L0,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gm.prototype.create)}}class gm{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},a=`${this.service}/${e}`,c=this.errors[e],d=c?M0(c,i):"Error",g=`${this.serviceName}: ${d} (${a}).`;return new $i(a,g,i)}}function M0(s,e){return s.replace(O0,(r,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const O0=/\{\$([^}]+)}/g;function eh(s,e){if(s===e)return!0;const r=Object.keys(s),i=Object.keys(e);for(const a of r){if(!i.includes(a))return!1;const c=s[a],d=e[a];if(yp(c)&&yp(d)){if(!eh(c,d))return!1}else if(c!==d)return!1}for(const a of i)if(!r.includes(a))return!1;return!0}function yp(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(s){return s&&s._delegate?s._delegate:s}class Ko{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new C0;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z0(e))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const c=this.getOrInitializeService({instanceIdentifier:a});i.resolve(c)}catch{}}}}clearInstance(e=Vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vs){return this.instances.has(e)}getOptions(e=Vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);i===g&&d.resolve(a)}return a}onInit(e,r){var i;const a=this.normalizeInstanceIdentifier(r),c=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(a,c);const d=this.instances.get(a);return d&&e(d,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const a of i)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:U0(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Vs){return this.component?this.component.multipleInstances?e:Vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U0(s){return s===Vs?void 0:s}function z0(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new F0(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ke||(Ke={}));const $0={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},q0=Ke.INFO,H0={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},W0=(s,e,...r)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),a=H0[e];if(a)console[a](`[${i}]  ${s.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ym{constructor(e){this.name=e,this._logLevel=q0,this._logHandler=W0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const Q0=(s,e)=>e.some(r=>s instanceof r);let vp,_p;function K0(){return vp||(vp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G0(){return _p||(_p=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vm=new WeakMap,th=new WeakMap,_m=new WeakMap,Oc=new WeakMap,Th=new WeakMap;function Y0(s){const e=new Promise((r,i)=>{const a=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{r(rs(s.result)),a()},d=()=>{i(s.error),a()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(r=>{r instanceof IDBCursor&&vm.set(r,s)}).catch(()=>{}),Th.set(e,s),e}function X0(s){if(th.has(s))return;const e=new Promise((r,i)=>{const a=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{r(),a()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});th.set(s,e)}let nh={get(s,e,r){if(s instanceof IDBTransaction){if(e==="done")return th.get(s);if(e==="objectStoreNames")return s.objectStoreNames||_m.get(s);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return rs(s[e])},set(s,e,r){return s[e]=r,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function J0(s){nh=s(nh)}function Z0(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const i=s.call(Fc(this),e,...r);return _m.set(i,e.sort?e.sort():[e]),rs(i)}:G0().includes(s)?function(...e){return s.apply(Fc(this),e),rs(vm.get(this))}:function(...e){return rs(s.apply(Fc(this),e))}}function ev(s){return typeof s=="function"?Z0(s):(s instanceof IDBTransaction&&X0(s),Q0(s,K0())?new Proxy(s,nh):s)}function rs(s){if(s instanceof IDBRequest)return Y0(s);if(Oc.has(s))return Oc.get(s);const e=ev(s);return e!==s&&(Oc.set(s,e),Th.set(e,s)),e}const Fc=s=>Th.get(s);function tv(s,e,{blocked:r,upgrade:i,blocking:a,terminated:c}={}){const d=indexedDB.open(s,e),g=rs(d);return i&&d.addEventListener("upgradeneeded",v=>{i(rs(d.result),v.oldVersion,v.newVersion,rs(d.transaction),v)}),r&&d.addEventListener("blocked",v=>r(v.oldVersion,v.newVersion,v)),g.then(v=>{c&&v.addEventListener("close",()=>c()),a&&v.addEventListener("versionchange",x=>a(x.oldVersion,x.newVersion,x))}).catch(()=>{}),g}const nv=["get","getKey","getAll","getAllKeys","count"],rv=["put","add","delete","clear"],Uc=new Map;function xp(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Uc.get(e))return Uc.get(e);const r=e.replace(/FromIndex$/,""),i=e!==r,a=rv.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(a||nv.includes(r)))return;const c=async function(d,...g){const v=this.transaction(d,a?"readwrite":"readonly");let x=v.store;return i&&(x=x.index(g.shift())),(await Promise.all([x[r](...g),a&&v.done]))[0]};return Uc.set(e,c),c}J0(s=>({...s,get:(e,r,i)=>xp(e,r)||s.get(e,r,i),has:(e,r)=>!!xp(e,r)||s.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(iv(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function iv(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rh="@firebase/app",wp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=new ym("@firebase/app"),ov="@firebase/app-compat",av="@firebase/analytics-compat",lv="@firebase/analytics",uv="@firebase/app-check-compat",cv="@firebase/app-check",hv="@firebase/auth",dv="@firebase/auth-compat",fv="@firebase/database",pv="@firebase/data-connect",mv="@firebase/database-compat",gv="@firebase/functions",yv="@firebase/functions-compat",vv="@firebase/installations",_v="@firebase/installations-compat",xv="@firebase/messaging",wv="@firebase/messaging-compat",Ev="@firebase/performance",Tv="@firebase/performance-compat",Sv="@firebase/remote-config",kv="@firebase/remote-config-compat",Iv="@firebase/storage",bv="@firebase/storage-compat",Av="@firebase/firestore",Cv="@firebase/vertexai-preview",Nv="@firebase/firestore-compat",Rv="firebase",Pv="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh="[DEFAULT]",jv={[rh]:"fire-core",[ov]:"fire-core-compat",[lv]:"fire-analytics",[av]:"fire-analytics-compat",[cv]:"fire-app-check",[uv]:"fire-app-check-compat",[hv]:"fire-auth",[dv]:"fire-auth-compat",[fv]:"fire-rtdb",[pv]:"fire-data-connect",[mv]:"fire-rtdb-compat",[gv]:"fire-fn",[yv]:"fire-fn-compat",[vv]:"fire-iid",[_v]:"fire-iid-compat",[xv]:"fire-fcm",[wv]:"fire-fcm-compat",[Ev]:"fire-perf",[Tv]:"fire-perf-compat",[Sv]:"fire-rc",[kv]:"fire-rc-compat",[Iv]:"fire-gcs",[bv]:"fire-gcs-compat",[Av]:"fire-fst",[Nv]:"fire-fst-compat",[Cv]:"fire-vertex","fire-js":"fire-js",[Rv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new Map,Dv=new Map,ih=new Map;function Ep(s,e){try{s.container.addComponent(e)}catch(r){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,r)}}function Fl(s){const e=s.name;if(ih.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;ih.set(e,s);for(const r of Ol.values())Ep(r,s);for(const r of Dv.values())Ep(r,s);return!0}function Vv(s,e){const r=s.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),s.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new gm("app","Firebase",Lv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,r,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ko("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=Pv;function xm(s,e={}){let r=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:sh,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw ss.create("bad-app-name",{appName:String(a)});if(r||(r=mm()),!r)throw ss.create("no-options");const c=Ol.get(a);if(c){if(eh(r,c.options)&&eh(i,c.config))return c;throw ss.create("duplicate-app",{appName:a})}const d=new B0(a);for(const v of ih.values())d.addComponent(v);const g=new Mv(r,i,d);return Ol.set(a,g),g}function Fv(s=sh){const e=Ol.get(s);if(!e&&s===sh&&mm())return xm();if(!e)throw ss.create("no-app",{appName:s});return e}function Di(s,e,r){var i;let a=(i=jv[s])!==null&&i!==void 0?i:s;r&&(a+=`-${r}`);const c=a.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const g=[`Unable to register library "${a}" with version "${e}":`];c&&g.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&d&&g.push("and"),d&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(g.join(" "));return}Fl(new Ko(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="firebase-heartbeat-database",zv=1,Go="firebase-heartbeat-store";let zc=null;function wm(){return zc||(zc=tv(Uv,zv,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Go)}catch(r){console.warn(r)}}}}).catch(s=>{throw ss.create("idb-open",{originalErrorMessage:s.message})})),zc}async function Bv(s){try{const r=(await wm()).transaction(Go),i=await r.objectStore(Go).get(Em(s));return await r.done,i}catch(e){if(e instanceof $i)Ar.warn(e.message);else{const r=ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ar.warn(r.message)}}}async function Tp(s,e){try{const i=(await wm()).transaction(Go,"readwrite");await i.objectStore(Go).put(e,Em(s)),await i.done}catch(r){if(r instanceof $i)Ar.warn(r.message);else{const i=ss.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ar.warn(i.message)}}}function Em(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=1024,qv=720*60*60*1e3;class Hv{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Qv(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Sp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const g=new Date(d.date).valueOf();return Date.now()-g<=qv}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ar.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Sp(),{heartbeatsToSend:i,unsentEntries:a}=Wv(this._heartbeatsCache.heartbeats),c=Ml(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(r){return Ar.warn(r),""}}}function Sp(){return new Date().toISOString().substring(0,10)}function Wv(s,e=$v){const r=[];let i=s.slice();for(const a of s){const c=r.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),kp(r)>e){c.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),kp(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class Qv{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return D0()?V0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Bv(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return Tp(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return Tp(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function kp(s){return Ml(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(s){Fl(new Ko("platform-logger",e=>new sv(e),"PRIVATE")),Fl(new Ko("heartbeat",e=>new Hv(e),"PRIVATE")),Di(rh,wp,s),Di(rh,wp,"esm2017"),Di("fire-js","")}Kv("");var Gv="firebase",Yv="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di(Gv,Yv,"app");var Ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ms,Tm;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function I(){}I.prototype=T.prototype,A.D=T.prototype,A.prototype=new I,A.prototype.constructor=A,A.C=function(b,R,V){for(var E=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)E[ae-2]=arguments[ae];return T.prototype[R].apply(b,E)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,r),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,T,I){I||(I=0);var b=Array(16);if(typeof T=="string")for(var R=0;16>R;++R)b[R]=T.charCodeAt(I++)|T.charCodeAt(I++)<<8|T.charCodeAt(I++)<<16|T.charCodeAt(I++)<<24;else for(R=0;16>R;++R)b[R]=T[I++]|T[I++]<<8|T[I++]<<16|T[I++]<<24;T=A.g[0],I=A.g[1],R=A.g[2];var V=A.g[3],E=T+(V^I&(R^V))+b[0]+3614090360&4294967295;T=I+(E<<7&4294967295|E>>>25),E=V+(R^T&(I^R))+b[1]+3905402710&4294967295,V=T+(E<<12&4294967295|E>>>20),E=R+(I^V&(T^I))+b[2]+606105819&4294967295,R=V+(E<<17&4294967295|E>>>15),E=I+(T^R&(V^T))+b[3]+3250441966&4294967295,I=R+(E<<22&4294967295|E>>>10),E=T+(V^I&(R^V))+b[4]+4118548399&4294967295,T=I+(E<<7&4294967295|E>>>25),E=V+(R^T&(I^R))+b[5]+1200080426&4294967295,V=T+(E<<12&4294967295|E>>>20),E=R+(I^V&(T^I))+b[6]+2821735955&4294967295,R=V+(E<<17&4294967295|E>>>15),E=I+(T^R&(V^T))+b[7]+4249261313&4294967295,I=R+(E<<22&4294967295|E>>>10),E=T+(V^I&(R^V))+b[8]+1770035416&4294967295,T=I+(E<<7&4294967295|E>>>25),E=V+(R^T&(I^R))+b[9]+2336552879&4294967295,V=T+(E<<12&4294967295|E>>>20),E=R+(I^V&(T^I))+b[10]+4294925233&4294967295,R=V+(E<<17&4294967295|E>>>15),E=I+(T^R&(V^T))+b[11]+2304563134&4294967295,I=R+(E<<22&4294967295|E>>>10),E=T+(V^I&(R^V))+b[12]+1804603682&4294967295,T=I+(E<<7&4294967295|E>>>25),E=V+(R^T&(I^R))+b[13]+4254626195&4294967295,V=T+(E<<12&4294967295|E>>>20),E=R+(I^V&(T^I))+b[14]+2792965006&4294967295,R=V+(E<<17&4294967295|E>>>15),E=I+(T^R&(V^T))+b[15]+1236535329&4294967295,I=R+(E<<22&4294967295|E>>>10),E=T+(R^V&(I^R))+b[1]+4129170786&4294967295,T=I+(E<<5&4294967295|E>>>27),E=V+(I^R&(T^I))+b[6]+3225465664&4294967295,V=T+(E<<9&4294967295|E>>>23),E=R+(T^I&(V^T))+b[11]+643717713&4294967295,R=V+(E<<14&4294967295|E>>>18),E=I+(V^T&(R^V))+b[0]+3921069994&4294967295,I=R+(E<<20&4294967295|E>>>12),E=T+(R^V&(I^R))+b[5]+3593408605&4294967295,T=I+(E<<5&4294967295|E>>>27),E=V+(I^R&(T^I))+b[10]+38016083&4294967295,V=T+(E<<9&4294967295|E>>>23),E=R+(T^I&(V^T))+b[15]+3634488961&4294967295,R=V+(E<<14&4294967295|E>>>18),E=I+(V^T&(R^V))+b[4]+3889429448&4294967295,I=R+(E<<20&4294967295|E>>>12),E=T+(R^V&(I^R))+b[9]+568446438&4294967295,T=I+(E<<5&4294967295|E>>>27),E=V+(I^R&(T^I))+b[14]+3275163606&4294967295,V=T+(E<<9&4294967295|E>>>23),E=R+(T^I&(V^T))+b[3]+4107603335&4294967295,R=V+(E<<14&4294967295|E>>>18),E=I+(V^T&(R^V))+b[8]+1163531501&4294967295,I=R+(E<<20&4294967295|E>>>12),E=T+(R^V&(I^R))+b[13]+2850285829&4294967295,T=I+(E<<5&4294967295|E>>>27),E=V+(I^R&(T^I))+b[2]+4243563512&4294967295,V=T+(E<<9&4294967295|E>>>23),E=R+(T^I&(V^T))+b[7]+1735328473&4294967295,R=V+(E<<14&4294967295|E>>>18),E=I+(V^T&(R^V))+b[12]+2368359562&4294967295,I=R+(E<<20&4294967295|E>>>12),E=T+(I^R^V)+b[5]+4294588738&4294967295,T=I+(E<<4&4294967295|E>>>28),E=V+(T^I^R)+b[8]+2272392833&4294967295,V=T+(E<<11&4294967295|E>>>21),E=R+(V^T^I)+b[11]+1839030562&4294967295,R=V+(E<<16&4294967295|E>>>16),E=I+(R^V^T)+b[14]+4259657740&4294967295,I=R+(E<<23&4294967295|E>>>9),E=T+(I^R^V)+b[1]+2763975236&4294967295,T=I+(E<<4&4294967295|E>>>28),E=V+(T^I^R)+b[4]+1272893353&4294967295,V=T+(E<<11&4294967295|E>>>21),E=R+(V^T^I)+b[7]+4139469664&4294967295,R=V+(E<<16&4294967295|E>>>16),E=I+(R^V^T)+b[10]+3200236656&4294967295,I=R+(E<<23&4294967295|E>>>9),E=T+(I^R^V)+b[13]+681279174&4294967295,T=I+(E<<4&4294967295|E>>>28),E=V+(T^I^R)+b[0]+3936430074&4294967295,V=T+(E<<11&4294967295|E>>>21),E=R+(V^T^I)+b[3]+3572445317&4294967295,R=V+(E<<16&4294967295|E>>>16),E=I+(R^V^T)+b[6]+76029189&4294967295,I=R+(E<<23&4294967295|E>>>9),E=T+(I^R^V)+b[9]+3654602809&4294967295,T=I+(E<<4&4294967295|E>>>28),E=V+(T^I^R)+b[12]+3873151461&4294967295,V=T+(E<<11&4294967295|E>>>21),E=R+(V^T^I)+b[15]+530742520&4294967295,R=V+(E<<16&4294967295|E>>>16),E=I+(R^V^T)+b[2]+3299628645&4294967295,I=R+(E<<23&4294967295|E>>>9),E=T+(R^(I|~V))+b[0]+4096336452&4294967295,T=I+(E<<6&4294967295|E>>>26),E=V+(I^(T|~R))+b[7]+1126891415&4294967295,V=T+(E<<10&4294967295|E>>>22),E=R+(T^(V|~I))+b[14]+2878612391&4294967295,R=V+(E<<15&4294967295|E>>>17),E=I+(V^(R|~T))+b[5]+4237533241&4294967295,I=R+(E<<21&4294967295|E>>>11),E=T+(R^(I|~V))+b[12]+1700485571&4294967295,T=I+(E<<6&4294967295|E>>>26),E=V+(I^(T|~R))+b[3]+2399980690&4294967295,V=T+(E<<10&4294967295|E>>>22),E=R+(T^(V|~I))+b[10]+4293915773&4294967295,R=V+(E<<15&4294967295|E>>>17),E=I+(V^(R|~T))+b[1]+2240044497&4294967295,I=R+(E<<21&4294967295|E>>>11),E=T+(R^(I|~V))+b[8]+1873313359&4294967295,T=I+(E<<6&4294967295|E>>>26),E=V+(I^(T|~R))+b[15]+4264355552&4294967295,V=T+(E<<10&4294967295|E>>>22),E=R+(T^(V|~I))+b[6]+2734768916&4294967295,R=V+(E<<15&4294967295|E>>>17),E=I+(V^(R|~T))+b[13]+1309151649&4294967295,I=R+(E<<21&4294967295|E>>>11),E=T+(R^(I|~V))+b[4]+4149444226&4294967295,T=I+(E<<6&4294967295|E>>>26),E=V+(I^(T|~R))+b[11]+3174756917&4294967295,V=T+(E<<10&4294967295|E>>>22),E=R+(T^(V|~I))+b[2]+718787259&4294967295,R=V+(E<<15&4294967295|E>>>17),E=I+(V^(R|~T))+b[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(R+(E<<21&4294967295|E>>>11))&4294967295,A.g[2]=A.g[2]+R&4294967295,A.g[3]=A.g[3]+V&4294967295}i.prototype.u=function(A,T){T===void 0&&(T=A.length);for(var I=T-this.blockSize,b=this.B,R=this.h,V=0;V<T;){if(R==0)for(;V<=I;)a(this,A,V),V+=this.blockSize;if(typeof A=="string"){for(;V<T;)if(b[R++]=A.charCodeAt(V++),R==this.blockSize){a(this,b),R=0;break}}else for(;V<T;)if(b[R++]=A[V++],R==this.blockSize){a(this,b),R=0;break}}this.h=R,this.o+=T},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;var I=8*this.o;for(T=A.length-8;T<A.length;++T)A[T]=I&255,I/=256;for(this.u(A),A=Array(16),T=I=0;4>T;++T)for(var b=0;32>b;b+=8)A[I++]=this.g[T]>>>b&255;return A};function c(A,T){var I=g;return Object.prototype.hasOwnProperty.call(I,A)?I[A]:I[A]=T(A)}function d(A,T){this.h=T;for(var I=[],b=!0,R=A.length-1;0<=R;R--){var V=A[R]|0;b&&V==T||(I[R]=V,b=!1)}this.g=I}var g={};function v(A){return-128<=A&&128>A?c(A,function(T){return new d([T|0],0>T?-1:0)}):new d([A|0],0>A?-1:0)}function x(A){if(isNaN(A)||!isFinite(A))return N;if(0>A)return B(x(-A));for(var T=[],I=1,b=0;A>=I;b++)T[b]=A/I|0,I*=4294967296;return new d(T,0)}function S(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return B(S(A.substring(1),T));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=x(Math.pow(T,8)),b=N,R=0;R<A.length;R+=8){var V=Math.min(8,A.length-R),E=parseInt(A.substring(R,R+V),T);8>V?(V=x(Math.pow(T,V)),b=b.j(V).add(x(E))):(b=b.j(I),b=b.add(x(E)))}return b}var N=v(0),L=v(1),z=v(16777216);s=d.prototype,s.m=function(){if(q(this))return-B(this).m();for(var A=0,T=1,I=0;I<this.g.length;I++){var b=this.i(I);A+=(0<=b?b:4294967296+b)*T,T*=4294967296}return A},s.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(W(this))return"0";if(q(this))return"-"+B(this).toString(A);for(var T=x(Math.pow(A,6)),I=this,b="";;){var R=xe(I,T).g;I=te(I,R.j(T));var V=((0<I.g.length?I.g[0]:I.h)>>>0).toString(A);if(I=R,W(I))return V+b;for(;6>V.length;)V="0"+V;b=V+b}},s.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function W(A){if(A.h!=0)return!1;for(var T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function q(A){return A.h==-1}s.l=function(A){return A=te(this,A),q(A)?-1:W(A)?0:1};function B(A){for(var T=A.g.length,I=[],b=0;b<T;b++)I[b]=~A.g[b];return new d(I,~A.h).add(L)}s.abs=function(){return q(this)?B(this):this},s.add=function(A){for(var T=Math.max(this.g.length,A.g.length),I=[],b=0,R=0;R<=T;R++){var V=b+(this.i(R)&65535)+(A.i(R)&65535),E=(V>>>16)+(this.i(R)>>>16)+(A.i(R)>>>16);b=E>>>16,V&=65535,E&=65535,I[R]=E<<16|V}return new d(I,I[I.length-1]&-2147483648?-1:0)};function te(A,T){return A.add(B(T))}s.j=function(A){if(W(this)||W(A))return N;if(q(this))return q(A)?B(this).j(B(A)):B(B(this).j(A));if(q(A))return B(this.j(B(A)));if(0>this.l(z)&&0>A.l(z))return x(this.m()*A.m());for(var T=this.g.length+A.g.length,I=[],b=0;b<2*T;b++)I[b]=0;for(b=0;b<this.g.length;b++)for(var R=0;R<A.g.length;R++){var V=this.i(b)>>>16,E=this.i(b)&65535,ae=A.i(R)>>>16,be=A.i(R)&65535;I[2*b+2*R]+=E*be,ie(I,2*b+2*R),I[2*b+2*R+1]+=V*be,ie(I,2*b+2*R+1),I[2*b+2*R+1]+=E*ae,ie(I,2*b+2*R+1),I[2*b+2*R+2]+=V*ae,ie(I,2*b+2*R+2)}for(b=0;b<T;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=T;b<2*T;b++)I[b]=0;return new d(I,0)};function ie(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function he(A,T){this.g=A,this.h=T}function xe(A,T){if(W(T))throw Error("division by zero");if(W(A))return new he(N,N);if(q(A))return T=xe(B(A),T),new he(B(T.g),B(T.h));if(q(T))return T=xe(A,B(T)),new he(B(T.g),T.h);if(30<A.g.length){if(q(A)||q(T))throw Error("slowDivide_ only works with positive integers.");for(var I=L,b=T;0>=b.l(A);)I=Ee(I),b=Ee(b);var R=me(I,1),V=me(b,1);for(b=me(b,2),I=me(I,2);!W(b);){var E=V.add(b);0>=E.l(A)&&(R=R.add(I),V=E),b=me(b,1),I=me(I,1)}return T=te(A,R.j(T)),new he(R,T)}for(R=N;0<=A.l(T);){for(I=Math.max(1,Math.floor(A.m()/T.m())),b=Math.ceil(Math.log(I)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),V=x(I),E=V.j(T);q(E)||0<E.l(A);)I-=b,V=x(I),E=V.j(T);W(V)&&(V=L),R=R.add(V),A=te(A,E)}return new he(R,A)}s.A=function(A){return xe(this,A).h},s.and=function(A){for(var T=Math.max(this.g.length,A.g.length),I=[],b=0;b<T;b++)I[b]=this.i(b)&A.i(b);return new d(I,this.h&A.h)},s.or=function(A){for(var T=Math.max(this.g.length,A.g.length),I=[],b=0;b<T;b++)I[b]=this.i(b)|A.i(b);return new d(I,this.h|A.h)},s.xor=function(A){for(var T=Math.max(this.g.length,A.g.length),I=[],b=0;b<T;b++)I[b]=this.i(b)^A.i(b);return new d(I,this.h^A.h)};function Ee(A){for(var T=A.g.length+1,I=[],b=0;b<T;b++)I[b]=A.i(b)<<1|A.i(b-1)>>>31;return new d(I,A.h)}function me(A,T){var I=T>>5;T%=32;for(var b=A.g.length-I,R=[],V=0;V<b;V++)R[V]=0<T?A.i(V+I)>>>T|A.i(V+I+1)<<32-T:A.i(V+I);return new d(R,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Tm=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=x,d.fromString=S,Ms=d}).apply(typeof Ip<"u"?Ip:typeof self<"u"?self:typeof window<"u"?window:{});var bl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sm,Fo,km,Pl,oh,Im,bm,Am;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,y){return l==Array.prototype||l==Object.prototype||(l[f]=y.value),l};function r(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof bl=="object"&&bl];for(var f=0;f<l.length;++f){var y=l[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=r(this);function a(l,f){if(f)e:{var y=i;l=l.split(".");for(var w=0;w<l.length-1;w++){var M=l[w];if(!(M in y))break e;y=y[M]}l=l[l.length-1],w=y[l],f=f(w),f!=w&&f!=null&&e(y,l,{configurable:!0,writable:!0,value:f})}}function c(l,f){l instanceof String&&(l+="");var y=0,w=!1,M={next:function(){if(!w&&y<l.length){var $=y++;return{value:f($,l[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}a("Array.prototype.values",function(l){return l||function(){return c(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function v(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function x(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function S(l,f,y){return l.call.apply(l.bind,arguments)}function N(l,f,y){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,w),l.apply(f,M)}}return function(){return l.apply(f,arguments)}}function L(l,f,y){return L=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:N,L.apply(null,arguments)}function z(l,f){var y=Array.prototype.slice.call(arguments,1);return function(){var w=y.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function W(l,f){function y(){}y.prototype=f.prototype,l.aa=f.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(w,M,$){for(var se=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)se[Je-2]=arguments[Je];return f.prototype[M].apply(w,se)}}function q(l){const f=l.length;if(0<f){const y=Array(f);for(let w=0;w<f;w++)y[w]=l[w];return y}return[]}function B(l,f){for(let y=1;y<arguments.length;y++){const w=arguments[y];if(v(w)){const M=l.length||0,$=w.length||0;l.length=M+$;for(let se=0;se<$;se++)l[M+se]=w[se]}else l.push(w)}}class te{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ie(l){return/^[\s\xa0]*$/.test(l)}function he(){var l=g.navigator;return l&&(l=l.userAgent)?l:""}function xe(l){return xe[" "](l),l}xe[" "]=function(){};var Ee=he().indexOf("Gecko")!=-1&&!(he().toLowerCase().indexOf("webkit")!=-1&&he().indexOf("Edge")==-1)&&!(he().indexOf("Trident")!=-1||he().indexOf("MSIE")!=-1)&&he().indexOf("Edge")==-1;function me(l,f,y){for(const w in l)f.call(y,l[w],w,l)}function A(l,f){for(const y in l)f.call(void 0,l[y],y,l)}function T(l){const f={};for(const y in l)f[y]=l[y];return f}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(l,f){let y,w;for(let M=1;M<arguments.length;M++){w=arguments[M];for(y in w)l[y]=w[y];for(let $=0;$<I.length;$++)y=I[$],Object.prototype.hasOwnProperty.call(w,y)&&(l[y]=w[y])}}function R(l){var f=1;l=l.split(":");const y=[];for(;0<f&&l.length;)y.push(l.shift()),f--;return l.length&&y.push(l.join(":")),y}function V(l){g.setTimeout(()=>{throw l},0)}function E(){var l=fe;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class ae{constructor(){this.h=this.g=null}add(f,y){const w=be.get();w.set(f,y),this.h?this.h.next=w:this.g=w,this.h=w}}var be=new te(()=>new Le,l=>l.reset());class Le{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Fe,Y=!1,fe=new ae,le=()=>{const l=g.Promise.resolve(void 0);Fe=()=>{l.then(j)}};var j=()=>{for(var l;l=E();){try{l.h.call(l.g)}catch(y){V(y)}var f=be;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}Y=!1};function D(){this.s=this.s,this.C=this.C}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};g.addEventListener("test",y,f),g.removeEventListener("test",y,f)}catch{}return l})();function Ce(l,f){if(ue.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(Ee){e:{try{xe(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else y=="mouseover"?f=l.fromElement:y=="mouseout"&&(f=l.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:we[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ce.aa.h.call(this)}}W(Ce,ue);var we={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Re="closure_listenable_"+(1e6*Math.random()|0),je=0;function ze(l,f,y,w,M){this.listener=l,this.proxy=null,this.src=f,this.type=y,this.capture=!!w,this.ha=M,this.key=++je,this.da=this.fa=!1}function et(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function on(l){this.src=l,this.g={},this.h=0}on.prototype.add=function(l,f,y,w,M){var $=l.toString();l=this.g[$],l||(l=this.g[$]=[],this.h++);var se=Ht(l,f,w,M);return-1<se?(f=l[se],y||(f.fa=!1)):(f=new ze(f,this.src,$,!!w,M),f.fa=y,l.push(f)),f};function yn(l,f){var y=f.type;if(y in l.g){var w=l.g[y],M=Array.prototype.indexOf.call(w,f,void 0),$;($=0<=M)&&Array.prototype.splice.call(w,M,1),$&&(et(f),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Ht(l,f,y,w){for(var M=0;M<l.length;++M){var $=l[M];if(!$.da&&$.listener==f&&$.capture==!!y&&$.ha==w)return M}return-1}var an="closure_lm_"+(1e6*Math.random()|0),Rn={};function vn(l,f,y,w,M){if(Array.isArray(f)){for(var $=0;$<f.length;$++)vn(l,f[$],y,w,M);return null}return y=ee(y),l&&l[Re]?l.K(f,y,x(w)?!!w.capture:!1,M):cr(l,f,y,!1,w,M)}function cr(l,f,y,w,M,$){if(!f)throw Error("Invalid event type");var se=x(M)?!!M.capture:!!M,Je=Yt(l);if(Je||(l[an]=Je=new on(l)),y=Je.add(f,y,w,se,$),y.proxy)return y;if(w=Rr(),y.proxy=w,w.src=l,w.listener=y,l.addEventListener)ve||(M=se),M===void 0&&(M=!1),l.addEventListener(f.toString(),w,M);else if(l.attachEvent)l.attachEvent(Oe(f.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Rr(){function l(y){return f.call(l.src,l.listener,y)}const f=Me;return l}function Pn(l,f,y,w,M){if(Array.isArray(f))for(var $=0;$<f.length;$++)Pn(l,f[$],y,w,M);else w=x(w)?!!w.capture:!!w,y=ee(y),l&&l[Re]?(l=l.i,f=String(f).toString(),f in l.g&&($=l.g[f],y=Ht($,y,w,M),-1<y&&(et($[y]),Array.prototype.splice.call($,y,1),$.length==0&&(delete l.g[f],l.h--)))):l&&(l=Yt(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Ht(f,y,w,M)),(y=-1<l?f[l]:null)&&re(y))}function re(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Re])yn(f.i,l);else{var y=l.type,w=l.proxy;f.removeEventListener?f.removeEventListener(y,w,l.capture):f.detachEvent?f.detachEvent(Oe(y),w):f.addListener&&f.removeListener&&f.removeListener(w),(y=Yt(f))?(yn(y,l),y.h==0&&(y.src=null,f[an]=null)):et(l)}}}function Oe(l){return l in Rn?Rn[l]:Rn[l]="on"+l}function Me(l,f){if(l.da)l=!0;else{f=new Ce(f,this);var y=l.listener,w=l.ha||l.src;l.fa&&re(l),l=y.call(w,f)}return l}function Yt(l){return l=l[an],l instanceof on?l:null}var hr="__closure_events_fn_"+(1e9*Math.random()>>>0);function ee(l){return typeof l=="function"?l:(l[hr]||(l[hr]=function(f){return l.handleEvent(f)}),l[hr])}function oe(){D.call(this),this.i=new on(this),this.M=this,this.F=null}W(oe,D),oe.prototype[Re]=!0,oe.prototype.removeEventListener=function(l,f,y,w){Pn(this,l,f,y,w)};function Q(l,f){var y,w=l.F;if(w)for(y=[];w;w=w.F)y.push(w);if(l=l.M,w=f.type||f,typeof f=="string")f=new ue(f,l);else if(f instanceof ue)f.target=f.target||l;else{var M=f;f=new ue(w,l),b(f,M)}if(M=!0,y)for(var $=y.length-1;0<=$;$--){var se=f.g=y[$];M=Ae(se,w,!0,f)&&M}if(se=f.g=l,M=Ae(se,w,!0,f)&&M,M=Ae(se,w,!1,f)&&M,y)for($=0;$<y.length;$++)se=f.g=y[$],M=Ae(se,w,!1,f)&&M}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var y=l.g[f],w=0;w<y.length;w++)et(y[w]);delete l.g[f],l.h--}}this.F=null},oe.prototype.K=function(l,f,y,w){return this.i.add(String(l),f,!1,y,w)},oe.prototype.L=function(l,f,y,w){return this.i.add(String(l),f,!0,y,w)};function Ae(l,f,y,w){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,$=0;$<f.length;++$){var se=f[$];if(se&&!se.da&&se.capture==y){var Je=se.listener,_t=se.ha||se.src;se.fa&&yn(l.i,se),M=Je.call(_t,w)!==!1&&M}}return M&&!w.defaultPrevented}function We(l,f,y){if(typeof l=="function")y&&(l=L(l,y));else if(l&&typeof l.handleEvent=="function")l=L(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:g.setTimeout(l,f||0)}function Xe(l){l.g=We(()=>{l.g=null,l.i&&(l.i=!1,Xe(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class ln extends D{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Xe(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dr(l){D.call(this),this.h=l,this.g={}}W(dr,D);var $s=[];function Ct(l){me(l.g,function(f,y){this.g.hasOwnProperty(y)&&re(f)},l),l.g={}}dr.prototype.N=function(){dr.aa.N.call(this),Ct(this)},dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pr=g.JSON.stringify,Ki=g.JSON.parse,Gi=class{stringify(l){return g.JSON.stringify(l,void 0)}parse(l){return g.JSON.parse(l,void 0)}};function cs(){}cs.prototype.h=null;function qs(l){return l.h||(l.h=l.i())}function Hs(){}var _n={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gn(){ue.call(this,"d")}W(Gn,ue);function Ws(){ue.call(this,"c")}W(Ws,ue);var Yn={},Yi=null;function hs(){return Yi=Yi||new oe}Yn.La="serverreachability";function Xi(l){ue.call(this,Yn.La,l)}W(Xi,ue);function fr(l){const f=hs();Q(f,new Xi(f))}Yn.STAT_EVENT="statevent";function Ji(l,f){ue.call(this,Yn.STAT_EVENT,l),this.stat=f}W(Ji,ue);function ft(l){const f=hs();Q(f,new Ji(f,l))}Yn.Ma="timingevent";function Qs(l,f){ue.call(this,Yn.Ma,l),this.size=f}W(Qs,ue);function jn(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){l()},f)}function ds(){this.g=!0}ds.prototype.xa=function(){this.g=!1};function fs(l,f,y,w,M,$){l.info(function(){if(l.g)if($)for(var se="",Je=$.split("&"),_t=0;_t<Je.length;_t++){var qe=Je[_t].split("=");if(1<qe.length){var St=qe[0];qe=qe[1];var gt=St.split("_");se=2<=gt.length&&gt[1]=="type"?se+(St+"="+qe+"&"):se+(St+"=redacted&")}}else se=null;else se=$;return"XMLHTTP REQ ("+w+") [attempt "+M+"]: "+f+`
`+y+`
`+se})}function Ks(l,f,y,w,M,$,se){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+M+"]: "+f+`
`+y+`
`+$+" "+se})}function Dn(l,f,y,w){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+au(l,y)+(w?" "+w:"")})}function Zi(l,f){l.info(function(){return"TIMEOUT: "+f})}ds.prototype.info=function(){};function au(l,f){if(!l.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var w=y[l];if(!(2>w.length)){var M=w[1];if(Array.isArray(M)&&!(1>M.length)){var $=M[0];if($!="noop"&&$!="stop"&&$!="close")for(var se=1;se<M.length;se++)M[se]=""}}}}return Pr(y)}catch{return f}}var Gs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},da={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vn;function ps(){}W(ps,cs),ps.prototype.g=function(){return new XMLHttpRequest},ps.prototype.i=function(){return{}},Vn=new ps;function Ln(l,f,y,w){this.j=l,this.i=f,this.l=y,this.R=w||1,this.U=new dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fa}function fa(){this.i=null,this.g="",this.h=!1}var eo={},Ys={};function Xs(l,f,y){l.L=1,l.v=Mr(cn(f)),l.m=y,l.P=!0,to(l,null)}function to(l,f){l.F=Date.now(),nt(l),l.A=cn(l.v);var y=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Fr(y.i,"t",w),l.C=0,y=l.j.J,l.h=new fa,l.g=Ra(l.j,y?f:null,!l.m),0<l.O&&(l.M=new ln(L(l.Y,l,l.g),l.O)),f=l.U,y=l.g,w=l.ca;var M="readystatechange";Array.isArray(M)||(M&&($s[0]=M.toString()),M=$s);for(var $=0;$<M.length;$++){var se=vn(y,M[$],w||f.handleEvent,!1,f.h||f);if(!se)break;f.g[se.key]=se}f=l.H?T(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),fr(),fs(l.i,l.u,l.A,l.l,l.R,l.m)}Ln.prototype.ca=function(l){l=l.target;const f=this.M;f&&Jt(l)==3?f.j():this.Y(l)},Ln.prototype.Y=function(l){try{if(l==this.g)e:{const gt=Jt(this.g);var f=this.g.Ba();const En=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||ao(this.g)))){this.J||gt!=4||f==7||(f==8||0>=En?fr(3):fr(2)),ms(this);var y=this.g.Z();this.X=y;t:if(pa(this)){var w=ao(this.g);l="";var M=w.length,$=Jt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xn(this),jr(this);var se="";break t}this.h.i=new g.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,l+=this.h.i.decode(w[f],{stream:!($&&f==M-1)});w.length=0,this.h.g+=l,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=y==200,Ks(this.i,this.u,this.A,this.l,this.R,gt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,_t=this.g;if((Je=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(Je)){var qe=Je;break t}}qe=null}if(y=qe)Dn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,no(this,y);else{this.o=!1,this.s=3,ft(12),xn(this),jr(this);break e}}if(this.P){y=!0;let dn;for(;!this.J&&this.C<se.length;)if(dn=lu(this,se),dn==Ys){gt==4&&(this.s=4,ft(14),y=!1),Dn(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==eo){this.s=4,ft(15),Dn(this.i,this.l,se,"[Invalid Chunk]"),y=!1;break}else Dn(this.i,this.l,dn,null),no(this,dn);if(pa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||se.length!=0||this.h.h||(this.s=1,ft(16),y=!1),this.o=this.o&&y,!y)Dn(this.i,this.l,se,"[Invalid Chunked Response]"),xn(this),jr(this);else if(0<se.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),uo(St),St.M=!0,ft(11))}}else Dn(this.i,this.l,se,null),no(this,se);gt==4&&xn(this),this.o&&!this.J&&(gt==4?li(this.j,this):(this.o=!1,nt(this)))}else ri(this.g),y==400&&0<se.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),xn(this),jr(this)}}}catch{}finally{}};function pa(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function lu(l,f){var y=l.C,w=f.indexOf(`
`,y);return w==-1?Ys:(y=Number(f.substring(y,w)),isNaN(y)?eo:(w+=1,w+y>f.length?Ys:(f=f.slice(w,w+y),l.C=w+y,f)))}Ln.prototype.cancel=function(){this.J=!0,xn(this)};function nt(l){l.S=Date.now()+l.I,ma(l,l.I)}function ma(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=jn(L(l.ba,l),f)}function ms(l){l.B&&(g.clearTimeout(l.B),l.B=null)}Ln.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Zi(this.i,this.A),this.L!=2&&(fr(),ft(17)),xn(this),this.s=2,jr(this)):ma(this,this.S-l)};function jr(l){l.j.G==0||l.J||li(l.j,l)}function xn(l){ms(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Ct(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function no(l,f){try{var y=l.j;if(y.G!=0&&(y.g==l||Wt(y.h,l))){if(!l.K&&Wt(y.h,l)&&y.G==3){try{var w=y.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var M=w;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)ai(y),zn(y);else break e;oi(y),ft(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=jn(L(y.Za,y),6e3));if(1>=ya(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else vr(y,11)}else if((l.K||y.g==l)&&ai(y),!ie(f))for(M=y.Da.g.parse(f),f=0;f<M.length;f++){let qe=M[f];if(y.T=qe[0],qe=qe[1],y.G==2)if(qe[0]=="c"){y.K=qe[1],y.ia=qe[2];const St=qe[3];St!=null&&(y.la=St,y.j.info("VER="+y.la));const gt=qe[4];gt!=null&&(y.Aa=gt,y.j.info("SVER="+y.Aa));const En=qe[5];En!=null&&typeof En=="number"&&0<En&&(w=1.5*En,y.L=w,y.j.info("backChannelRequestTimeoutMs_="+w)),w=y;const dn=l.g;if(dn){const Es=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Es){var $=w.h;$.g||Es.indexOf("spdy")==-1&&Es.indexOf("quic")==-1&&Es.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(ro($,$.h),$.h=null))}if(w.D){const ci=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;ci&&(w.ya=ci,tt(w.I,w.D,ci))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),w=y;var se=l;if(w.qa=Na(w,w.J?w.ia:null,w.W),se.K){va(w.h,se);var Je=se,_t=w.L;_t&&(Je.I=_t),Je.B&&(ms(Je),nt(Je)),w.g=se}else ws(w);0<y.i.length&&er(y)}else qe[0]!="stop"&&qe[0]!="close"||vr(y,7);else y.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?vr(y,7):Rt(y):qe[0]!="noop"&&y.l&&y.l.ta(qe),y.v=0)}}fr(4)}catch{}}var ga=class{constructor(l,f){this.g=l,this.map=f}};function gs(l){this.l=l||10,g.PerformanceNavigationTiming?(l=g.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function un(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ya(l){return l.h?1:l.g?l.g.size:0}function Wt(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function ro(l,f){l.g?l.g.add(f):l.h=f}function va(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}gs.prototype.cancel=function(){if(this.i=_a(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function _a(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const y of l.g.values())f=f.concat(y.D);return f}return q(l.i)}function Js(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(v(l)){for(var f=[],y=l.length,w=0;w<y;w++)f.push(l[w]);return f}f=[],y=0;for(w in l)f[y++]=l[w];return f}function Zs(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(v(l)||typeof l=="string"){var f=[];l=l.length;for(var y=0;y<l;y++)f.push(y);return f}f=[],y=0;for(const w in l)f[y++]=w;return f}}}function Dr(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(v(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var y=Zs(l),w=Js(l),M=w.length,$=0;$<M;$++)f.call(void 0,w[$],y&&y[$],l)}var ys=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uu(l,f){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var w=l[y].indexOf("="),M=null;if(0<=w){var $=l[y].substring(0,w);M=l[y].substring(w+1)}else $=l[y];f($,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function pr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof pr){this.h=l.h,vs(this,l.j),this.o=l.o,this.g=l.g,Vr(this,l.s),this.l=l.l;var f=l.i,y=new Xn;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),Lr(this,y),this.m=l.m}else l&&(f=String(l).match(ys))?(this.h=!1,vs(this,f[1]||"",!0),this.o=$e(f[2]||""),this.g=$e(f[3]||"",!0),Vr(this,f[4]),this.l=$e(f[5]||"",!0),Lr(this,f[6]||"",!0),this.m=$e(f[7]||"")):(this.h=!1,this.i=new Xn(null,this.h))}pr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Or(f,ei,!0),":");var y=this.g;return(y||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Or(f,ei,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(Or(y,y.charAt(0)=="/"?Ea:wa,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",Or(y,so)),l.join("")};function cn(l){return new pr(l)}function vs(l,f,y){l.j=y?$e(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Vr(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Lr(l,f,y){f instanceof Xn?(l.i=f,Jn(l.i,l.h)):(y||(f=Or(f,Ta)),l.i=new Xn(f,l.h))}function tt(l,f,y){l.i.set(f,y)}function Mr(l){return tt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function $e(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Or(l,f,y){return typeof l=="string"?(l=encodeURI(l).replace(f,xa),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function xa(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ei=/[#\/\?@]/g,wa=/[#\?:]/g,Ea=/[#\?]/g,Ta=/[#\?@]/g,so=/#/g;function Xn(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Nt(l){l.g||(l.g=new Map,l.h=0,l.i&&uu(l.i,function(f,y){l.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}s=Xn.prototype,s.add=function(l,f){Nt(this),this.i=null,l=wn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(f),this.h+=1,this};function Mn(l,f){Nt(l),f=wn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function On(l,f){return Nt(l),f=wn(l,f),l.g.has(f)}s.forEach=function(l,f){Nt(this),this.g.forEach(function(y,w){y.forEach(function(M){l.call(f,M,w,this)},this)},this)},s.na=function(){Nt(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let w=0;w<f.length;w++){const M=l[w];for(let $=0;$<M.length;$++)y.push(f[w])}return y},s.V=function(l){Nt(this);let f=[];if(typeof l=="string")On(this,l)&&(f=f.concat(this.g.get(wn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)f=f.concat(l[y])}return f},s.set=function(l,f){return Nt(this),this.i=null,l=wn(this,l),On(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},s.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Fr(l,f,y){Mn(l,f),0<y.length&&(l.i=null,l.g.set(wn(l,f),q(y)),l.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var w=f[y];const $=encodeURIComponent(String(w)),se=this.V(w);for(w=0;w<se.length;w++){var M=$;se[w]!==""&&(M+="="+encodeURIComponent(String(se[w]))),l.push(M)}}return this.i=l.join("&")};function wn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function Jn(l,f){f&&!l.j&&(Nt(l),l.i=null,l.g.forEach(function(y,w){var M=w.toLowerCase();w!=M&&(Mn(this,w),Fr(this,M,y))},l)),l.j=f}function cu(l,f){const y=new ds;if(g.Image){const w=new Image;w.onload=z(Xt,y,"TestLoadImage: loaded",!0,f,w),w.onerror=z(Xt,y,"TestLoadImage: error",!1,f,w),w.onabort=z(Xt,y,"TestLoadImage: abort",!1,f,w),w.ontimeout=z(Xt,y,"TestLoadImage: timeout",!1,f,w),g.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else f(!1)}function Sa(l,f){const y=new ds,w=new AbortController,M=setTimeout(()=>{w.abort(),Xt(y,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:w.signal}).then($=>{clearTimeout(M),$.ok?Xt(y,"TestPingServer: ok",!0,f):Xt(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),Xt(y,"TestPingServer: error",!1,f)})}function Xt(l,f,y,w,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),w(y)}catch{}}function hu(){this.g=new Gi}function ka(l,f,y){const w=y||"";try{Dr(l,function(M,$){let se=M;x(M)&&(se=Pr(M)),f.push(w+$+"="+encodeURIComponent(se))})}catch(M){throw f.push(w+"type="+encodeURIComponent("_badmap")),M}}function mr(l){this.l=l.Ub||null,this.j=l.eb||!1}W(mr,cs),mr.prototype.g=function(){return new _s(this.l,this.j)},mr.prototype.i=(function(l){return function(){return l}})({});function _s(l,f){oe.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}W(_s,oe),s=_s.prototype,s.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Un(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||g).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fn(this)),this.readyState=0},s.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Un(this)),this.g&&(this.readyState=3,Un(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ia(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ia(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}s.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Fn(this):Un(this),this.readyState==3&&Ia(this)}},s.Ra=function(l){this.g&&(this.response=this.responseText=l,Fn(this))},s.Qa=function(l){this.g&&(this.response=l,Fn(this))},s.ga=function(){this.g&&Fn(this)};function Fn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Un(l)}s.setRequestHeader=function(l,f){this.u.append(l,f)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=f.next();return l.join(`\r
`)};function Un(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(_s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function gr(l){let f="";return me(l,function(y,w){f+=w,f+=":",f+=y,f+=`\r
`}),f}function Ur(l,f,y){e:{for(w in y){var w=!1;break e}w=!0}w||(y=gr(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):tt(l,f,y))}function ot(l){oe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}W(ot,oe);var du=/^https?$/i,io=["POST","PUT"];s=ot.prototype,s.Ha=function(l){this.J=l},s.ea=function(l,f,y,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vn.g(),this.v=this.o?qs(this.o):qs(Vn),this.g.onreadystatechange=L(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch($){xs(this,$);return}if(l=y||"",y=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var M in w)y.set(M,w[M]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())y.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(y.keys()).find($=>$.toLowerCase()=="content-type"),M=g.FormData&&l instanceof g.FormData,!(0<=Array.prototype.indexOf.call(io,f,void 0))||w||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,se]of y)this.g.setRequestHeader($,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ni(this),this.u=!0,this.g.send(l),this.u=!1}catch($){xs(this,$)}};function xs(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,ti(l),hn(l)}function ti(l){l.A||(l.A=!0,Q(l,"complete"),Q(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Q(this,"complete"),Q(this,"abort"),hn(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hn(this,!0)),ot.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?oo(this):this.bb())},s.bb=function(){oo(this)};function oo(l){if(l.h&&typeof d<"u"&&(!l.v[1]||Jt(l)!=4||l.Z()!=2)){if(l.u&&Jt(l)==4)We(l.Ea,0,l);else if(Q(l,"readystatechange"),Jt(l)==4){l.h=!1;try{const se=l.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var w;if(w=se===0){var M=String(l.D).match(ys)[1]||null;!M&&g.self&&g.self.location&&(M=g.self.location.protocol.slice(0,-1)),w=!du.test(M?M.toLowerCase():"")}y=w}if(y)Q(l,"complete"),Q(l,"success");else{l.m=6;try{var $=2<Jt(l)?l.g.statusText:""}catch{$=""}l.l=$+" ["+l.Z()+"]",ti(l)}}finally{hn(l)}}}}function hn(l,f){if(l.g){ni(l);const y=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||Q(l,"ready");try{y.onreadystatechange=w}catch{}}}function ni(l){l.I&&(g.clearTimeout(l.I),l.I=null)}s.isActive=function(){return!!this.g};function Jt(l){return l.g?l.g.readyState:0}s.Z=function(){try{return 2<Jt(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Ki(f)}};function ao(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function ri(l){const f={};l=(l.g&&2<=Jt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(ie(l[w]))continue;var y=R(l[w]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const $=f[M]||[];f[M]=$,$.push(y)}A(f,function(w){return w.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zn(l,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||f}function lo(l){this.Aa=0,this.i=[],this.j=new ds,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zn("baseRetryDelayMs",5e3,l),this.cb=Zn("retryDelaySeedMs",1e4,l),this.Wa=Zn("forwardChannelMaxRetries",2,l),this.wa=Zn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new gs(l&&l.concurrentRequestLimit),this.Da=new hu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=lo.prototype,s.la=8,s.G=1,s.connect=function(l,f,y,w){ft(0),this.W=l,this.H=f||{},y&&w!==void 0&&(this.H.OSID=y,this.H.OAID=w),this.F=this.X,this.I=Na(this,null,this.W),er(this)};function Rt(l){if(si(l),l.G==3){var f=l.U++,y=cn(l.I);if(tt(y,"SID",l.K),tt(y,"RID",f),tt(y,"TYPE","terminate"),yr(l,y),f=new Ln(l,l.j,f),f.L=2,f.v=Mr(cn(y)),y=!1,g.navigator&&g.navigator.sendBeacon)try{y=g.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&g.Image&&(new Image().src=f.v,y=!0),y||(f.g=Ra(f.j,null),f.g.ea(f.v)),f.F=Date.now(),nt(f)}Ca(l)}function zn(l){l.g&&(uo(l),l.g.cancel(),l.g=null)}function si(l){zn(l),l.u&&(g.clearTimeout(l.u),l.u=null),ai(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&g.clearTimeout(l.s),l.s=null)}function er(l){if(!un(l.h)&&!l.s){l.s=!0;var f=l.Ga;Fe||le(),Y||(Fe(),Y=!0),fe.add(f,l),l.B=0}}function fu(l,f){return ya(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=jn(L(l.Ga,l,f),Aa(l,l.B)),l.B++,!0)}s.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new Ln(this,this.j,l);let $=this.o;if(this.S&&($?($=T($),b($,this.S)):$=this.S),this.m!==null||this.O||(M.H=$,$=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var w=this.i[y];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=zr(this,M,f),y=cn(this.I),tt(y,"RID",l),tt(y,"CVER",22),this.D&&tt(y,"X-HTTP-Session-Id",this.D),yr(this,y),$&&(this.O?f="headers="+encodeURIComponent(String(gr($)))+"&"+f:this.m&&Ur(y,this.m,$)),ro(this.h,M),this.Ua&&tt(y,"TYPE","init"),this.P?(tt(y,"$req",f),tt(y,"SID","null"),M.T=!0,Xs(M,y,null)):Xs(M,y,f),this.G=2}}else this.G==3&&(l?ii(this,l):this.i.length==0||un(this.h)||ii(this))};function ii(l,f){var y;f?y=f.l:y=l.U++;const w=cn(l.I);tt(w,"SID",l.K),tt(w,"RID",y),tt(w,"AID",l.T),yr(l,w),l.m&&l.o&&Ur(w,l.m,l.o),y=new Ln(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),f&&(l.i=f.D.concat(l.i)),f=zr(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ro(l.h,y),Xs(y,w,f)}function yr(l,f){l.H&&me(l.H,function(y,w){tt(f,w,y)}),l.l&&Dr({},function(y,w){tt(f,w,y)})}function zr(l,f,y){y=Math.min(l.i.length,y);var w=l.l?L(l.l.Na,l.l,l):null;e:{var M=l.i;let $=-1;for(;;){const se=["count="+y];$==-1?0<y?($=M[0].g,se.push("ofs="+$)):$=0:se.push("ofs="+$);let Je=!0;for(let _t=0;_t<y;_t++){let qe=M[_t].g;const St=M[_t].map;if(qe-=$,0>qe)$=Math.max(0,M[_t].g-100),Je=!1;else try{ka(St,se,"req"+qe+"_")}catch{w&&w(St)}}if(Je){w=se.join("&");break e}}}return l=l.i.splice(0,y),f.D=l,w}function ws(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Fe||le(),Y||(Fe(),Y=!0),fe.add(f,l),l.v=0}}function oi(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=jn(L(l.Fa,l),Aa(l,l.v)),l.v++,!0)}s.Fa=function(){if(this.u=null,ba(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=jn(L(this.ab,this),l)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),zn(this),ba(this))};function uo(l){l.A!=null&&(g.clearTimeout(l.A),l.A=null)}function ba(l){l.g=new Ln(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=cn(l.qa);tt(f,"RID","rpc"),tt(f,"SID",l.K),tt(f,"AID",l.T),tt(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&tt(f,"TO",l.ja),tt(f,"TYPE","xmlhttp"),yr(l,f),l.m&&l.o&&Ur(f,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Mr(cn(f)),y.m=null,y.P=!0,to(y,l)}s.Za=function(){this.C!=null&&(this.C=null,zn(this),oi(this),ft(19))};function ai(l){l.C!=null&&(g.clearTimeout(l.C),l.C=null)}function li(l,f){var y=null;if(l.g==f){ai(l),uo(l),l.g=null;var w=2}else if(Wt(l.h,f))y=f.D,va(l.h,f),w=1;else return;if(l.G!=0){if(f.o)if(w==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var M=l.B;w=hs(),Q(w,new Qs(w,y)),er(l)}else ws(l);else if(M=f.s,M==3||M==0&&0<f.X||!(w==1&&fu(l,f)||w==2&&oi(l)))switch(y&&0<y.length&&(f=l.h,f.i=f.i.concat(y)),M){case 1:vr(l,5);break;case 4:vr(l,10);break;case 3:vr(l,6);break;default:vr(l,2)}}}function Aa(l,f){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*f}function vr(l,f){if(l.j.info("Error code "+f),f==2){var y=L(l.fb,l),w=l.Xa;const M=!w;w=new pr(w||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||vs(w,"https"),Mr(w),M?cu(w.toString(),y):Sa(w.toString(),y)}else ft(2);l.G=0,l.l&&l.l.sa(f),Ca(l),si(l)}s.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Ca(l){if(l.G=0,l.ka=[],l.l){const f=_a(l.h);(f.length!=0||l.i.length!=0)&&(B(l.ka,f),B(l.ka,l.i),l.h.i.length=0,q(l.i),l.i.length=0),l.l.ra()}}function Na(l,f,y){var w=y instanceof pr?cn(y):new pr(y);if(w.g!="")f&&(w.g=f+"."+w.g),Vr(w,w.s);else{var M=g.location;w=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var $=new pr(null);w&&vs($,w),f&&($.g=f),M&&Vr($,M),y&&($.l=y),w=$}return y=l.D,f=l.ya,y&&f&&tt(w,y,f),tt(w,"VER",l.la),yr(l,w),w}function Ra(l,f,y){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new ot(new mr({eb:y})):new ot(l.pa),f.Ha(l.J),f}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function co(){}s=co.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ui(){}ui.prototype.g=function(l,f){return new Qt(l,f)};function Qt(l,f){oe.call(this),this.g=new lo(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!ie(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ie(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new tr(this)}W(Qt,oe),Qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){Rt(this.g)},Qt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=Pr(l),l=y);f.i.push(new ga(f.Ya++,l)),f.G==3&&er(f)},Qt.prototype.N=function(){this.g.l=null,delete this.j,Rt(this.g),delete this.g,Qt.aa.N.call(this)};function Pa(l){Gn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const y in f){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}W(Pa,Gn);function ja(){Ws.call(this),this.status=1}W(ja,Ws);function tr(l){this.g=l}W(tr,co),tr.prototype.ua=function(){Q(this.g,"a")},tr.prototype.ta=function(l){Q(this.g,new Pa(l))},tr.prototype.sa=function(l){Q(this.g,new ja)},tr.prototype.ra=function(){Q(this.g,"b")},ui.prototype.createWebChannel=ui.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,Am=function(){return new ui},bm=function(){return hs()},Im=Yn,oh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gs.NO_ERROR=0,Gs.TIMEOUT=8,Gs.HTTP_ERROR=6,Pl=Gs,da.COMPLETE="complete",km=da,Hs.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",oe.prototype.listen=oe.prototype.K,Fo=Hs,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,Sm=ot}).apply(typeof bl<"u"?bl:typeof self<"u"?self:typeof window<"u"?window:{});const bp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new ym("@firebase/firestore");function Mo(){return Os.logLevel}function ye(s,...e){if(Os.logLevel<=Ke.DEBUG){const r=e.map(Sh);Os.debug(`Firestore (${qi}): ${s}`,...r)}}function Cr(s,...e){if(Os.logLevel<=Ke.ERROR){const r=e.map(Sh);Os.error(`Firestore (${qi}): ${s}`,...r)}}function Li(s,...e){if(Os.logLevel<=Ke.WARN){const r=e.map(Sh);Os.warn(`Firestore (${qi}): ${s}`,...r)}}function Sh(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(s="Unexpected state"){const e=`FIRESTORE (${qi}) INTERNAL ASSERTION FAILED: `+s;throw Cr(e),new Error(e)}function Ze(s,e){s||Pe()}function Ve(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends $i{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r($t.UNAUTHENTICATED)))}shutdown(){}}class Jv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class Zv{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ze(this.o===void 0);let i=this.i;const a=v=>this.i!==i?(i=this.i,r(v)):Promise.resolve();let c=new is;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new is,e.enqueueRetryable((()=>a(this.currentUser)))};const d=()=>{const v=c;e.enqueueRetryable((async()=>{await v.promise,await a(this.currentUser)}))},g=v=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((v=>g(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new is)}}),0),d()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ze(typeof i.accessToken=="string"),new Cm(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string"),new $t(e)}}class e_{constructor(e,r,i){this.l=e,this.h=r,this.P=i,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class t_{constructor(e,r,i){this.l=e,this.h=r,this.P=i}getToken(){return Promise.resolve(new e_(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r($t.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class n_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r_{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Ze(this.o===void 0);const i=c=>{c.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,ye("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?r(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const a=c=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Ze(typeof r.token=="string"),this.R=r.token,new n_(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<s;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const a=s_(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<r&&(i+=e.charAt(a[c]%e.length))}return i}}function Ye(s,e){return s<e?-1:s>e?1:0}function Mi(s,e,r){return s.length===e.length&&s.every(((i,a)=>r(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Te(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Te(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Te(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*r));return new Tt(r,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.timestamp=e}static fromTimestamp(e){return new De(e)}static min(){return new De(new Tt(0,0))}static max(){return new De(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,r,i){r===void 0?r=0:r>e.length&&Pe(),i===void 0?i=e.length-r:i>e.length-r&&Pe(),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return Yo.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Yo?e.forEach((i=>{r.push(i)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let a=0;a<i;a++){const c=e.get(a),d=r.get(a);if(c<d)return-1;if(c>d)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class dt extends Yo{construct(e,r,i){return new dt(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new Te(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter((a=>a.length>0)))}return new dt(r)}static emptyPath(){return new dt([])}}const i_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends Yo{construct(e,r,i){return new Vt(e,r,i)}static isValidIdentifier(e){return i_.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vt(["__name__"])}static fromServerFormat(e){const r=[];let i="",a=0;const c=()=>{if(i.length===0)throw new Te(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let d=!1;for(;a<e.length;){const g=e[a];if(g==="\\"){if(a+1===e.length)throw new Te(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[a+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Te(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=v,a+=2}else g==="`"?(d=!d,a++):g!=="."||d?(i+=g,a++):(c(),a++)}if(c(),d)throw new Te(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(r)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(dt.fromString(e))}static fromName(e){return new Ie(dt.fromString(e).popFirst(5))}static empty(){return new Ie(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return dt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new dt(e.slice()))}}function o_(s,e){const r=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=De.fromTimestamp(i===1e9?new Tt(r+1,0):new Tt(r,i));return new as(a,Ie.empty(),e)}function a_(s){return new as(s.readTime,s.key,-1)}class as{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new as(De.min(),Ie.empty(),-1)}static max(){return new as(De.max(),Ie.empty(),-1)}}function l_(s,e){let r=s.readTime.compareTo(e.readTime);return r!==0?r:(r=Ie.comparator(s.documentKey,e.documentKey),r!==0?r:Ye(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==u_)throw s;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new X(((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(r,c).next(i,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof X?r:X.resolve(r)}catch(r){return X.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):X.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):X.reject(r)}static resolve(e){return new X(((r,i)=>{r(e)}))}static reject(e){return new X(((r,i)=>{i(e)}))}static waitFor(e){return new X(((r,i)=>{let a=0,c=0,d=!1;e.forEach((g=>{++a,g.next((()=>{++c,d&&c===a&&r()}),(v=>i(v)))})),d=!0,c===a&&r()}))}static or(e){let r=X.resolve(!1);for(const i of e)r=r.next((a=>a?X.resolve(a):i()));return r}static forEach(e,r){const i=[];return e.forEach(((a,c)=>{i.push(r.call(this,a,c))})),this.waitFor(i)}static mapArray(e,r){return new X(((i,a)=>{const c=e.length,d=new Array(c);let g=0;for(let v=0;v<c;v++){const x=v;r(e[x]).next((S=>{d[x]=S,++g,g===c&&i(d)}),(S=>a(S)))}}))}static doWhile(e,r){return new X(((i,a)=>{const c=()=>{e()===!0?r().next((()=>{c()}),a):i()};c()}))}}function h_(s){const e=s.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function ia(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}kh.oe=-1;function Gl(s){return s==null}function Ul(s){return s===0&&1/s==-1/0}function d_(s){return typeof s=="number"&&Number.isInteger(s)&&!Ul(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(s){let e=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e++;return e}function Hi(s,e){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e(r,s[r])}function Rm(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,r){this.comparator=e,this.root=r||Dt.EMPTY}insert(e,r){return new ct(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return r+i.left.size;a<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,i)=>(e(r,i),!1)))}toString(){const e=[];return this.inorderTraversal(((r,i)=>(e.push(`${r}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Al(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Al(this.root,e,this.comparator,!1)}getReverseIterator(){return new Al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Al(this.root,e,this.comparator,!0)}}class Al{constructor(e,r,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=r?i(e.key,r):1,r&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,r,i,a,c){this.key=e,this.value=r,this.color=i??Dt.RED,this.left=a??Dt.EMPTY,this.right=c??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,a,c){return new Dt(e??this.key,r??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,r,i),null):c===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return Dt.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,r,i,a,c){return this}insert(e,r,i){return new Dt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,i)=>(e(r),!1)))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Cp(this.data.getIterator())}getIteratorFrom(e){return new Cp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((i=>{r=r.add(i)})),r}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,c=i.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new Lt(this.comparator);return r.data=e,r}}class Cp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new Kn([])}unionWith(e){let r=new Lt(Vt.comparator);for(const i of this.fields)r=r.add(i);for(const i of e)r=r.add(i);return new Kn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Mi(this.fields,e.fields,((r,i)=>r.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Pm("Invalid base64 string: "+c):c}})(e);return new Mt(r)}static fromUint8Array(e){const r=(function(a){let c="";for(let d=0;d<a.length;++d)c+=String.fromCharCode(a[d]);return c})(e);return new Mt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const i=new Uint8Array(r.length);for(let a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const f_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ls(s){if(Ze(!!s),typeof s=="string"){let e=0;const r=f_.exec(s);if(Ze(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mt(s.seconds),nanos:mt(s.nanos)}}function mt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Fs(s){return typeof s=="string"?Mt.fromBase64String(s):Mt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(s){var e,r;return((r=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function bh(s){const e=s.mapValue.fields.__previous_value__;return Ih(e)?bh(e):e}function Xo(s){const e=ls(s.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,r,i,a,c,d,g,v,x){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=x}}class Jo{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Jo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Jo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl={mapValue:{}};function Us(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ih(s)?4:g_(s)?9007199254740991:m_(s)?10:11:Pe()}function lr(s,e){if(s===e)return!0;const r=Us(s);if(r!==Us(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Xo(s).isEqual(Xo(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const d=ls(a.timestampValue),g=ls(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,c){return Fs(a.bytesValue).isEqual(Fs(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,c){return mt(a.geoPointValue.latitude)===mt(c.geoPointValue.latitude)&&mt(a.geoPointValue.longitude)===mt(c.geoPointValue.longitude)})(s,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return mt(a.integerValue)===mt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const d=mt(a.doubleValue),g=mt(c.doubleValue);return d===g?Ul(d)===Ul(g):isNaN(d)&&isNaN(g)}return!1})(s,e);case 9:return Mi(s.arrayValue.values||[],e.arrayValue.values||[],lr);case 10:case 11:return(function(a,c){const d=a.mapValue.fields||{},g=c.mapValue.fields||{};if(Ap(d)!==Ap(g))return!1;for(const v in d)if(d.hasOwnProperty(v)&&(g[v]===void 0||!lr(d[v],g[v])))return!1;return!0})(s,e);default:return Pe()}}function Zo(s,e){return(s.values||[]).find((r=>lr(r,e)))!==void 0}function Oi(s,e){if(s===e)return 0;const r=Us(s),i=Us(e);if(r!==i)return Ye(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ye(s.booleanValue,e.booleanValue);case 2:return(function(c,d){const g=mt(c.integerValue||c.doubleValue),v=mt(d.integerValue||d.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1})(s,e);case 3:return Np(s.timestampValue,e.timestampValue);case 4:return Np(Xo(s),Xo(e));case 5:return Ye(s.stringValue,e.stringValue);case 6:return(function(c,d){const g=Fs(c),v=Fs(d);return g.compareTo(v)})(s.bytesValue,e.bytesValue);case 7:return(function(c,d){const g=c.split("/"),v=d.split("/");for(let x=0;x<g.length&&x<v.length;x++){const S=Ye(g[x],v[x]);if(S!==0)return S}return Ye(g.length,v.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,d){const g=Ye(mt(c.latitude),mt(d.latitude));return g!==0?g:Ye(mt(c.longitude),mt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Rp(s.arrayValue,e.arrayValue);case 10:return(function(c,d){var g,v,x,S;const N=c.fields||{},L=d.fields||{},z=(g=N.value)===null||g===void 0?void 0:g.arrayValue,W=(v=L.value)===null||v===void 0?void 0:v.arrayValue,q=Ye(((x=z==null?void 0:z.values)===null||x===void 0?void 0:x.length)||0,((S=W==null?void 0:W.values)===null||S===void 0?void 0:S.length)||0);return q!==0?q:Rp(z,W)})(s.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Cl.mapValue&&d===Cl.mapValue)return 0;if(c===Cl.mapValue)return 1;if(d===Cl.mapValue)return-1;const g=c.fields||{},v=Object.keys(g),x=d.fields||{},S=Object.keys(x);v.sort(),S.sort();for(let N=0;N<v.length&&N<S.length;++N){const L=Ye(v[N],S[N]);if(L!==0)return L;const z=Oi(g[v[N]],x[S[N]]);if(z!==0)return z}return Ye(v.length,S.length)})(s.mapValue,e.mapValue);default:throw Pe()}}function Np(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ye(s,e);const r=ls(s),i=ls(e),a=Ye(r.seconds,i.seconds);return a!==0?a:Ye(r.nanos,i.nanos)}function Rp(s,e){const r=s.values||[],i=e.values||[];for(let a=0;a<r.length&&a<i.length;++a){const c=Oi(r[a],i[a]);if(c)return c}return Ye(r.length,i.length)}function Fi(s){return ah(s)}function ah(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(r){const i=ls(r);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(r){return Fs(r).toBase64()})(s.bytesValue):"referenceValue"in s?(function(r){return Ie.fromName(r).toString()})(s.referenceValue):"geoPointValue"in s?(function(r){return`geo(${r.latitude},${r.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=ah(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const d of i)c?c=!1:a+=",",a+=`${d}:${ah(r.fields[d])}`;return a+"}"})(s.mapValue):Pe()}function lh(s){return!!s&&"integerValue"in s}function Ah(s){return!!s&&"arrayValue"in s}function Pp(s){return!!s&&"nullValue"in s}function jp(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function jl(s){return!!s&&"mapValue"in s}function m_(s){var e,r;return((r=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function $o(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Hi(s.mapValue.fields,((r,i)=>e.mapValue.fields[r]=$o(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=$o(s.arrayValue.values[r]);return e}return Object.assign({},s)}function g_(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!jl(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=$o(r)}setAll(e){let r=Vt.emptyPath(),i={},a=[];e.forEach(((d,g)=>{if(!r.isImmediateParentOf(g)){const v=this.getFieldsMap(r);this.applyChanges(v,i,a),i={},a=[],r=g.popLast()}d?i[g.lastSegment()]=$o(d):a.push(g.lastSegment())}));const c=this.getFieldsMap(r);this.applyChanges(c,i,a)}delete(e){const r=this.field(e.popLast());jl(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return lr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=r.mapValue.fields[e.get(i)];jl(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,i){Hi(r,((a,c)=>e[a]=c));for(const a of i)delete e[a]}clone(){return new Nn($o(this.value))}}function jm(s){const e=[];return Hi(s.fields,((r,i)=>{const a=new Vt([r]);if(jl(i)){const c=jm(i.mapValue).fields;if(c.length===0)e.push(a);else for(const d of c)e.push(a.child(d))}else e.push(a)})),new Kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,r,i,a,c,d,g){this.key=e,this.documentType=r,this.version=i,this.readTime=a,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new qt(e,0,De.min(),De.min(),De.min(),Nn.empty(),0)}static newFoundDocument(e,r,i,a){return new qt(e,1,r,De.min(),i,a,0)}static newNoDocument(e,r){return new qt(e,2,r,De.min(),De.min(),Nn.empty(),0)}static newUnknownDocument(e,r){return new qt(e,3,r,De.min(),De.min(),Nn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,r){this.position=e,this.inclusive=r}}function Dp(s,e,r){let i=0;for(let a=0;a<s.position.length;a++){const c=e[a],d=s.position[a];if(c.field.isKeyField()?i=Ie.comparator(Ie.fromName(d.referenceValue),r.key):i=Oi(d,r.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Vp(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!lr(s.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,r="asc"){this.field=e,this.dir=r}}function y_(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{}class Et extends Dm{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,i):new __(e,r,i):r==="array-contains"?new E_(e,i):r==="in"?new T_(e,i):r==="not-in"?new S_(e,i):r==="array-contains-any"?new k_(e,i):new Et(e,r,i)}static createKeyFieldInFilter(e,r,i){return r==="in"?new x_(e,i):new w_(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Oi(r,this.value)):r!==null&&Us(this.value)===Us(r)&&this.matchesComparison(Oi(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ur extends Dm{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new ur(e,r)}matches(e){return Vm(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Vm(s){return s.op==="and"}function Lm(s){return v_(s)&&Vm(s)}function v_(s){for(const e of s.filters)if(e instanceof ur)return!1;return!0}function uh(s){if(s instanceof Et)return s.field.canonicalString()+s.op.toString()+Fi(s.value);if(Lm(s))return s.filters.map((e=>uh(e))).join(",");{const e=s.filters.map((r=>uh(r))).join(",");return`${s.op}(${e})`}}function Mm(s,e){return s instanceof Et?(function(i,a){return a instanceof Et&&i.op===a.op&&i.field.isEqual(a.field)&&lr(i.value,a.value)})(s,e):s instanceof ur?(function(i,a){return a instanceof ur&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((c,d,g)=>c&&Mm(d,a.filters[g])),!0):!1})(s,e):void Pe()}function Om(s){return s instanceof Et?(function(r){return`${r.field.canonicalString()} ${r.op} ${Fi(r.value)}`})(s):s instanceof ur?(function(r){return r.op.toString()+" {"+r.getFilters().map(Om).join(" ,")+"}"})(s):"Filter"}class __ extends Et{constructor(e,r,i){super(e,r,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const r=Ie.comparator(e.key,this.key);return this.matchesComparison(r)}}class x_ extends Et{constructor(e,r){super(e,"in",r),this.keys=Fm("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class w_ extends Et{constructor(e,r){super(e,"not-in",r),this.keys=Fm("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function Fm(s,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((i=>Ie.fromName(i.referenceValue)))}class E_ extends Et{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Ah(r)&&Zo(r.arrayValue,this.value)}}class T_ extends Et{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Zo(this.value.arrayValue,r)}}class S_ extends Et{constructor(e,r){super(e,"not-in",r)}matches(e){if(Zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Zo(this.value.arrayValue,r)}}class k_ extends Et{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Ah(r)||!r.arrayValue.values)&&r.arrayValue.values.some((i=>Zo(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,r=null,i=[],a=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=d,this.endAt=g,this.ue=null}}function Lp(s,e=null,r=[],i=[],a=null,c=null,d=null){return new I_(s,e,r,i,a,c,d)}function Ch(s){const e=Ve(s);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((i=>uh(i))).join(","),r+="|ob:",r+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),Gl(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((i=>Fi(i))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((i=>Fi(i))).join(",")),e.ue=r}return e.ue}function Nh(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<s.orderBy.length;r++)if(!y_(s.orderBy[r],e.orderBy[r]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let r=0;r<s.filters.length;r++)if(!Mm(s.filters[r],e.filters[r]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Vp(s.startAt,e.startAt)&&Vp(s.endAt,e.endAt)}function ch(s){return Ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,r=null,i=[],a=[],c=null,d="F",g=null,v=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=v,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function b_(s,e,r,i,a,c,d,g){return new Yl(s,e,r,i,a,c,d,g)}function Xl(s){return new Yl(s)}function Mp(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function A_(s){return s.collectionGroup!==null}function qo(s){const e=Ve(s);if(e.ce===null){e.ce=[];const r=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),r.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Lt(Vt.comparator);return d.filters.forEach((v=>{v.getFlattenedFilters().forEach((x=>{x.isInequality()&&(g=g.add(x.field))}))})),g})(e).forEach((c=>{r.has(c.canonicalString())||c.isKeyField()||e.ce.push(new Bl(c,i))})),r.has(Vt.keyField().canonicalString())||e.ce.push(new Bl(Vt.keyField(),i))}return e.ce}function or(s){const e=Ve(s);return e.le||(e.le=C_(e,qo(s))),e.le}function C_(s,e){if(s.limitType==="F")return Lp(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new Bl(a.field,c)}));const r=s.endAt?new zl(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new zl(s.startAt.position,s.startAt.inclusive):null;return Lp(s.path,s.collectionGroup,e,s.filters,s.limit,r,i)}}function hh(s,e,r){return new Yl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,r,s.startAt,s.endAt)}function Jl(s,e){return Nh(or(s),or(e))&&s.limitType===e.limitType}function Um(s){return`${Ch(or(s))}|lt:${s.limitType}`}function Ri(s){return`Query(target=${(function(r){let i=r.path.canonicalString();return r.collectionGroup!==null&&(i+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(i+=`, filters: [${r.filters.map((a=>Om(a))).join(", ")}]`),Gl(r.limit)||(i+=", limit: "+r.limit),r.orderBy.length>0&&(i+=`, orderBy: [${r.orderBy.map((a=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(a))).join(", ")}]`),r.startAt&&(i+=", startAt: ",i+=r.startAt.inclusive?"b:":"a:",i+=r.startAt.position.map((a=>Fi(a))).join(",")),r.endAt&&(i+=", endAt: ",i+=r.endAt.inclusive?"a:":"b:",i+=r.endAt.position.map((a=>Fi(a))).join(",")),`Target(${i})`})(or(s))}; limitType=${s.limitType})`}function Zl(s,e){return e.isFoundDocument()&&(function(i,a){const c=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Ie.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,a){for(const c of qo(i))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,a){for(const c of i.filters)if(!c.matches(a))return!1;return!0})(s,e)&&(function(i,a){return!(i.startAt&&!(function(d,g,v){const x=Dp(d,g,v);return d.inclusive?x<=0:x<0})(i.startAt,qo(i),a)||i.endAt&&!(function(d,g,v){const x=Dp(d,g,v);return d.inclusive?x>=0:x>0})(i.endAt,qo(i),a))})(s,e)}function N_(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function zm(s){return(e,r)=>{let i=!1;for(const a of qo(s)){const c=R_(a,e,r);if(c!==0)return c;i=i||a.field.isKeyField()}return 0}}function R_(s,e,r){const i=s.field.isKeyField()?Ie.comparator(e.key,r.key):(function(c,d,g){const v=d.data.field(c),x=g.data.field(c);return v!==null&&x!==null?Oi(v,x):Pe()})(s.field,e,r);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[a,c]of i)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[r]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,((r,i)=>{for(const[a,c]of i)e(a,c)}))}isEmpty(){return Rm(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=new ct(Ie.comparator);function Nr(){return P_}const Bm=new ct(Ie.comparator);function Uo(...s){let e=Bm;for(const r of s)e=e.insert(r.key,r);return e}function $m(s){let e=Bm;return s.forEach(((r,i)=>e=e.insert(r,i.overlayedDocument))),e}function Ls(){return Ho()}function qm(){return Ho()}function Ho(){return new Wi((s=>s.toString()),((s,e)=>s.isEqual(e)))}const j_=new ct(Ie.comparator),D_=new Lt(Ie.comparator);function Be(...s){let e=D_;for(const r of s)e=e.add(r);return e}const V_=new Lt(Ye);function L_(){return V_}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ul(e)?"-0":e}}function Hm(s){return{integerValue:""+s}}function M_(s,e){return d_(e)?Hm(e):Rh(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this._=void 0}}function O_(s,e,r){return s instanceof $l?(function(a,c){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Ih(c)&&(c=bh(c)),c&&(d.fields.__previous_value__=c),{mapValue:d}})(r,e):s instanceof ea?Qm(s,e):s instanceof ta?Km(s,e):(function(a,c){const d=Wm(a,c),g=Op(d)+Op(a.Pe);return lh(d)&&lh(a.Pe)?Hm(g):Rh(a.serializer,g)})(s,e)}function F_(s,e,r){return s instanceof ea?Qm(s,e):s instanceof ta?Km(s,e):r}function Wm(s,e){return s instanceof ql?(function(i){return lh(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class $l extends eu{}class ea extends eu{constructor(e){super(),this.elements=e}}function Qm(s,e){const r=Gm(e);for(const i of s.elements)r.some((a=>lr(a,i)))||r.push(i);return{arrayValue:{values:r}}}class ta extends eu{constructor(e){super(),this.elements=e}}function Km(s,e){let r=Gm(e);for(const i of s.elements)r=r.filter((a=>!lr(a,i)));return{arrayValue:{values:r}}}class ql extends eu{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Op(s){return mt(s.integerValue||s.doubleValue)}function Gm(s){return Ah(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function U_(s,e){return s.field.isEqual(e.field)&&(function(i,a){return i instanceof ea&&a instanceof ea||i instanceof ta&&a instanceof ta?Mi(i.elements,a.elements,lr):i instanceof ql&&a instanceof ql?lr(i.Pe,a.Pe):i instanceof $l&&a instanceof $l})(s.transform,e.transform)}class z_{constructor(e,r){this.version=e,this.transformResults=r}}class br{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new br}static exists(e){return new br(void 0,e)}static updateTime(e){return new br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dl(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class tu{}function Ym(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Jm(s.key,br.none()):new oa(s.key,s.data,br.none());{const r=s.data,i=Nn.empty();let a=new Lt(Vt.comparator);for(let c of e.fields)if(!a.has(c)){let d=r.field(c);d===null&&c.length>1&&(c=c.popLast(),d=r.field(c)),d===null?i.delete(c):i.set(c,d),a=a.add(c)}return new zs(s.key,i,new Kn(a.toArray()),br.none())}}function B_(s,e,r){s instanceof oa?(function(a,c,d){const g=a.value.clone(),v=Up(a.fieldTransforms,c,d.transformResults);g.setAll(v),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,r):s instanceof zs?(function(a,c,d){if(!Dl(a.precondition,c))return void c.convertToUnknownDocument(d.version);const g=Up(a.fieldTransforms,c,d.transformResults),v=c.data;v.setAll(Xm(a)),v.setAll(g),c.convertToFoundDocument(d.version,v).setHasCommittedMutations()})(s,e,r):(function(a,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,r)}function Wo(s,e,r,i){return s instanceof oa?(function(c,d,g,v){if(!Dl(c.precondition,d))return g;const x=c.value.clone(),S=zp(c.fieldTransforms,v,d);return x.setAll(S),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),null})(s,e,r,i):s instanceof zs?(function(c,d,g,v){if(!Dl(c.precondition,d))return g;const x=zp(c.fieldTransforms,v,d),S=d.data;return S.setAll(Xm(c)),S.setAll(x),d.convertToFoundDocument(d.version,S).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((N=>N.field)))})(s,e,r,i):(function(c,d,g){return Dl(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(s,e,r)}function $_(s,e){let r=null;for(const i of s.fieldTransforms){const a=e.data.field(i.field),c=Wm(i.transform,a||null);c!=null&&(r===null&&(r=Nn.empty()),r.set(i.field,c))}return r||null}function Fp(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Mi(i,a,((c,d)=>U_(c,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class oa extends tu{constructor(e,r,i,a=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class zs extends tu{constructor(e,r,i,a,c=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Xm(s){const e=new Map;return s.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const i=s.data.field(r);e.set(r,i)}})),e}function Up(s,e,r){const i=new Map;Ze(s.length===r.length);for(let a=0;a<r.length;a++){const c=s[a],d=c.transform,g=e.data.field(c.field);i.set(c.field,F_(d,g,r[a]))}return i}function zp(s,e,r){const i=new Map;for(const a of s){const c=a.transform,d=r.data.field(a.field);i.set(a.field,O_(c,d,e))}return i}class Jm extends tu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class q_ extends tu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,r,i,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&B_(c,e,i[a])}}applyToLocalView(e,r){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(r=Wo(i,e,r,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(r=Wo(i,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const i=qm();return this.mutations.forEach((a=>{const c=e.get(a.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=r.has(a.key)?null:g;const v=Ym(d,g);v!==null&&i.set(a.key,v),d.isValidDocument()||d.convertToNoDocument(De.min())})),i}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Mi(this.mutations,e.mutations,((r,i)=>Fp(r,i)))&&Mi(this.baseMutations,e.baseMutations,((r,i)=>Fp(r,i)))}}class Ph{constructor(e,r,i,a){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=a}static from(e,r,i){Ze(e.mutations.length===i.length);let a=(function(){return j_})();const c=e.mutations;for(let d=0;d<c.length;d++)a=a.insert(c[d].key,i[d].version);return new Ph(e,r,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,He;function K_(s){switch(s){default:return Pe();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function Zm(s){if(s===void 0)return Cr("GRPC error has no .code"),Z.UNKNOWN;switch(s){case vt.OK:return Z.OK;case vt.CANCELLED:return Z.CANCELLED;case vt.UNKNOWN:return Z.UNKNOWN;case vt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case vt.INTERNAL:return Z.INTERNAL;case vt.UNAVAILABLE:return Z.UNAVAILABLE;case vt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case vt.NOT_FOUND:return Z.NOT_FOUND;case vt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case vt.ABORTED:return Z.ABORTED;case vt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case vt.DATA_LOSS:return Z.DATA_LOSS;default:return Pe()}}(He=vt||(vt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=new Ms([4294967295,4294967295],0);function Bp(s){const e=G_().encode(s),r=new Tm;return r.update(e),new Uint8Array(r.digest())}function $p(s){const e=new DataView(s.buffer),r=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ms([r,i],0),new Ms([a,c],0)]}class jh{constructor(e,r,i){if(this.bitmap=e,this.padding=r,this.hashCount=i,r<0||r>=8)throw new zo(`Invalid padding: ${r}`);if(i<0)throw new zo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new zo(`Invalid hash count: ${i}`);if(e.length===0&&r!==0)throw new zo(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Ms.fromNumber(this.Ie)}Ee(e,r,i){let a=e.add(r.multiply(Ms.fromNumber(i)));return a.compare(Y_)===1&&(a=new Ms([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Bp(e),[i,a]=$p(r);for(let c=0;c<this.hashCount;c++){const d=this.Ee(i,a,c);if(!this.de(d))return!1}return!0}static create(e,r,i){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new jh(c,a,r);return i.forEach((g=>d.insert(g))),d}insert(e){if(this.Ie===0)return;const r=Bp(e),[i,a]=$p(r);for(let c=0;c<this.hashCount;c++){const d=this.Ee(i,a,c);this.Ae(d)}}Ae(e){const r=Math.floor(e/8),i=e%8;this.bitmap[r]|=1<<i}}class zo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,r,i,a,c){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,r,i){const a=new Map;return a.set(e,aa.createSynthesizedTargetChangeForCurrentChange(e,r,i)),new nu(De.min(),a,new ct(Ye),Nr(),Be())}}class aa{constructor(e,r,i,a,c){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,r,i){return new aa(i,r,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,r,i,a){this.Re=e,this.removedTargetIds=r,this.key=i,this.Ve=a}}class eg{constructor(e,r){this.targetId=e,this.me=r}}class tg{constructor(e,r,i=Mt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=a}}class qp{constructor(){this.fe=0,this.ge=Wp(),this.pe=Mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Be(),r=Be(),i=Be();return this.ge.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:i=i.add(a);break;default:Pe()}})),new aa(this.pe,this.ye,e,r,i)}Ce(){this.we=!1,this.ge=Wp()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ze(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class X_{constructor(e){this.Le=e,this.Be=new Map,this.ke=Nr(),this.qe=Hp(),this.Qe=new ct(Ye)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const i=this.Ge(r);switch(e.state){case 0:this.ze(r)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),i.De(e.resumeToken));break;default:Pe()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((i,a)=>{this.ze(a)&&r(a)}))}He(e){const r=e.targetId,i=e.me.count,a=this.Je(r);if(a){const c=a.target;if(ch(c))if(i===0){const d=new Ie(c.path);this.Ue(r,d,qt.newNoDocument(d,De.min()))}else Ze(i===1);else{const d=this.Ye(r);if(d!==i){const g=this.Ze(e),v=g?this.Xe(g,e,d):1;if(v!==0){this.je(r);const x=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,x)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:c=0}=r;let d,g;try{d=Fs(i).toUint8Array()}catch(v){if(v instanceof Pm)return Li("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{g=new jh(d,a,c)}catch(v){return Li(v instanceof zo?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return g.Ie===0?null:g}Xe(e,r,i){return r.me.count===i-this.nt(e,r.targetId)?0:2}nt(e,r){const i=this.Le.getRemoteKeysForTarget(r);let a=0;return i.forEach((c=>{const d=this.Le.tt(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.Ue(r,c,null),a++)})),a}rt(e){const r=new Map;this.Be.forEach(((c,d)=>{const g=this.Je(d);if(g){if(c.current&&ch(g.target)){const v=new Ie(g.target.path);this.ke.get(v)!==null||this.it(d,v)||this.Ue(d,v,qt.newNoDocument(v,e))}c.be&&(r.set(d,c.ve()),c.Ce())}}));let i=Be();this.qe.forEach(((c,d)=>{let g=!0;d.forEachWhile((v=>{const x=this.Je(v);return!x||x.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(i=i.add(c))})),this.ke.forEach(((c,d)=>d.setReadTime(e)));const a=new nu(e,r,this.Qe,this.ke,i);return this.ke=Nr(),this.qe=Hp(),this.Qe=new ct(Ye),a}$e(e,r){if(!this.ze(e))return;const i=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,i),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,i){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),i&&(this.ke=this.ke.insert(r,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new qp,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Lt(Ye),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ye("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new qp),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Hp(){return new ct(Ie.comparator)}function Wp(){return new ct(Ie.comparator)}const J_={asc:"ASCENDING",desc:"DESCENDING"},Z_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ex={and:"AND",or:"OR"};class tx{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function dh(s,e){return s.useProto3Json||Gl(e)?e:{value:e}}function Hl(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ng(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function nx(s,e){return Hl(s,e.toTimestamp())}function ar(s){return Ze(!!s),De.fromTimestamp((function(r){const i=ls(r);return new Tt(i.seconds,i.nanos)})(s))}function Dh(s,e){return fh(s,e).canonicalString()}function fh(s,e){const r=(function(a){return new dt(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?r:r.child(e)}function rg(s){const e=dt.fromString(s);return Ze(lg(e)),e}function ph(s,e){return Dh(s.databaseId,e.path)}function Bc(s,e){const r=rg(e);if(r.get(1)!==s.databaseId.projectId)throw new Te(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new Te(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new Ie(ig(r))}function sg(s,e){return Dh(s.databaseId,e)}function rx(s){const e=rg(s);return e.length===4?dt.emptyPath():ig(e)}function mh(s){return new dt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function ig(s){return Ze(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function Qp(s,e,r){return{name:ph(s,e),fields:r.value.mapValue.fields}}function sx(s,e){let r;if("targetChange"in e){e.targetChange;const i=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Pe()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(x,S){return x.useProto3Json?(Ze(S===void 0||typeof S=="string"),Mt.fromBase64String(S||"")):(Ze(S===void 0||S instanceof Buffer||S instanceof Uint8Array),Mt.fromUint8Array(S||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(x){const S=x.code===void 0?Z.UNKNOWN:Zm(x.code);return new Te(S,x.message||"")})(d);r=new tg(i,a,c,g||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Bc(s,i.document.name),c=ar(i.document.updateTime),d=i.document.createTime?ar(i.document.createTime):De.min(),g=new Nn({mapValue:{fields:i.document.fields}}),v=qt.newFoundDocument(a,c,d,g),x=i.targetIds||[],S=i.removedTargetIds||[];r=new Vl(x,S,v.key,v)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Bc(s,i.document),c=i.readTime?ar(i.readTime):De.min(),d=qt.newNoDocument(a,c),g=i.removedTargetIds||[];r=new Vl([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Bc(s,i.document),c=i.removedTargetIds||[];r=new Vl([],c,a,null)}else{if(!("filter"in e))return Pe();{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:c}=i,d=new Q_(a,c),g=i.targetId;r=new eg(g,d)}}return r}function ix(s,e){let r;if(e instanceof oa)r={update:Qp(s,e.key,e.value)};else if(e instanceof Jm)r={delete:ph(s,e.key)};else if(e instanceof zs)r={update:Qp(s,e.key,e.data),updateMask:px(e.fieldMask)};else{if(!(e instanceof q_))return Pe();r={verify:ph(s,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const g=d.transform;if(g instanceof $l)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof ea)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof ta)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof ql)return{fieldPath:d.field.canonicalString(),increment:g.Pe};throw Pe()})(0,i)))),e.precondition.isNone||(r.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:nx(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Pe()})(s,e.precondition)),r}function ox(s,e){return s&&s.length>0?(Ze(e!==void 0),s.map((r=>(function(a,c){let d=a.updateTime?ar(a.updateTime):ar(c);return d.isEqual(De.min())&&(d=ar(c)),new z_(d,a.transformResults||[])})(r,e)))):[]}function ax(s,e){return{documents:[sg(s,e.path)]}}function lx(s,e){const r={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=sg(s,a);const c=(function(x){if(x.length!==0)return ag(ur.create(x,"and"))})(e.filters);c&&(r.structuredQuery.where=c);const d=(function(x){if(x.length!==0)return x.map((S=>(function(L){return{field:Pi(L.field),direction:hx(L.dir)}})(S)))})(e.orderBy);d&&(r.structuredQuery.orderBy=d);const g=dh(s,e.limit);return g!==null&&(r.structuredQuery.limit=g),e.startAt&&(r.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{_t:r,parent:a}}function ux(s){let e=rx(s.parent);const r=s.structuredQuery,i=r.from?r.from.length:0;let a=null;if(i>0){Ze(i===1);const S=r.from[0];S.allDescendants?a=S.collectionId:e=e.child(S.collectionId)}let c=[];r.where&&(c=(function(N){const L=og(N);return L instanceof ur&&Lm(L)?L.getFilters():[L]})(r.where));let d=[];r.orderBy&&(d=(function(N){return N.map((L=>(function(W){return new Bl(ji(W.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(L)))})(r.orderBy));let g=null;r.limit&&(g=(function(N){let L;return L=typeof N=="object"?N.value:N,Gl(L)?null:L})(r.limit));let v=null;r.startAt&&(v=(function(N){const L=!!N.before,z=N.values||[];return new zl(z,L)})(r.startAt));let x=null;return r.endAt&&(x=(function(N){const L=!N.before,z=N.values||[];return new zl(z,L)})(r.endAt)),b_(e,a,d,c,g,"F",v,x)}function cx(s,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function og(s){return s.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const i=ji(r.unaryFilter.field);return Et.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=ji(r.unaryFilter.field);return Et.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=ji(r.unaryFilter.field);return Et.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ji(r.unaryFilter.field);return Et.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}})(s):s.fieldFilter!==void 0?(function(r){return Et.create(ji(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}})(r.fieldFilter.op),r.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(r){return ur.create(r.compositeFilter.filters.map((i=>og(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Pe()}})(r.compositeFilter.op))})(s):Pe()}function hx(s){return J_[s]}function dx(s){return Z_[s]}function fx(s){return ex[s]}function Pi(s){return{fieldPath:s.canonicalString()}}function ji(s){return Vt.fromServerFormat(s.fieldPath)}function ag(s){return s instanceof Et?(function(r){if(r.op==="=="){if(jp(r.value))return{unaryFilter:{field:Pi(r.field),op:"IS_NAN"}};if(Pp(r.value))return{unaryFilter:{field:Pi(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(jp(r.value))return{unaryFilter:{field:Pi(r.field),op:"IS_NOT_NAN"}};if(Pp(r.value))return{unaryFilter:{field:Pi(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pi(r.field),op:dx(r.op),value:r.value}}})(s):s instanceof ur?(function(r){const i=r.getFilters().map((a=>ag(a)));return i.length===1?i[0]:{compositeFilter:{op:fx(r.op),filters:i}}})(s):Pe()}function px(s){const e=[];return s.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function lg(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,r,i,a,c=De.min(),d=De.min(),g=Mt.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this.ct=e}}function gx(s){const e=ux({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?hh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(){this.un=new vx}addToCollectionParentIndex(e,r){return this.un.add(r),X.resolve()}getCollectionParents(e,r){return X.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return X.resolve()}deleteFieldIndex(e,r){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,r){return X.resolve()}getDocumentsMatchingTarget(e,r){return X.resolve(null)}getIndexType(e,r){return X.resolve(0)}getFieldIndexes(e,r){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,r){return X.resolve(as.min())}getMinOffsetFromCollectionGroup(e,r){return X.resolve(as.min())}updateCollectionGroup(e,r,i){return X.resolve()}updateIndexEntries(e,r){return X.resolve()}}class vx{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),a=this.index[r]||new Lt(dt.comparator),c=!a.has(i);return this.index[r]=a.add(i),c}has(e){const r=e.lastSegment(),i=e.popLast(),a=this.index[r];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Lt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ui(0)}static kn(){return new Ui(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this.changes=new Wi((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?X.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,r,i,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,r){let i=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(i!==null&&Wo(i.mutation,a,Kn.empty(),Tt.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,r,i=Be()){const a=Ls();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,i).next((c=>{let d=Uo();return c.forEach(((g,v)=>{d=d.insert(g,v.overlayedDocument)})),d}))))}getOverlayedDocuments(e,r){const i=Ls();return this.populateOverlays(e,i,r).next((()=>this.computeViews(e,r,i,Be())))}populateOverlays(e,r,i){const a=[];return i.forEach((c=>{r.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((d,g)=>{r.set(d,g)}))}))}computeViews(e,r,i,a){let c=Nr();const d=Ho(),g=(function(){return Ho()})();return r.forEach(((v,x)=>{const S=i.get(x.key);a.has(x.key)&&(S===void 0||S.mutation instanceof zs)?c=c.insert(x.key,x):S!==void 0?(d.set(x.key,S.mutation.getFieldMask()),Wo(S.mutation,x,S.mutation.getFieldMask(),Tt.now())):d.set(x.key,Kn.empty())})),this.recalculateAndSaveOverlays(e,c).next((v=>(v.forEach(((x,S)=>d.set(x,S))),r.forEach(((x,S)=>{var N;return g.set(x,new xx(S,(N=d.get(x))!==null&&N!==void 0?N:null))})),g)))}recalculateAndSaveOverlays(e,r){const i=Ho();let a=new ct(((d,g)=>d-g)),c=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((d=>{for(const g of d)g.keys().forEach((v=>{const x=r.get(v);if(x===null)return;let S=i.get(v)||Kn.empty();S=g.applyToLocalView(x,S),i.set(v,S);const N=(a.get(g.batchId)||Be()).add(v);a=a.insert(g.batchId,N)}))})).next((()=>{const d=[],g=a.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),x=v.key,S=v.value,N=qm();S.forEach((L=>{if(!c.has(L)){const z=Ym(r.get(L),i.get(L));z!==null&&N.set(L,z),c=c.add(L)}})),d.push(this.documentOverlayCache.saveOverlays(e,x,N))}return X.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,r,i,a){return(function(d){return Ie.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):A_(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i,a):this.getDocumentsMatchingCollectionQuery(e,r,i,a)}getNextDocuments(e,r,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,a).next((c=>{const d=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,a-c.size):X.resolve(Ls());let g=-1,v=c;return d.next((x=>X.forEach(x,((S,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),c.get(S)?X.resolve():this.remoteDocumentCache.getEntry(e,S).next((L=>{v=v.insert(S,L)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,v,x,Be()))).next((S=>({batchId:g,changes:$m(S)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ie(r)).next((i=>{let a=Uo();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,i,a){const c=r.collectionGroup;let d=Uo();return this.indexManager.getCollectionParents(e,c).next((g=>X.forEach(g,(v=>{const x=(function(N,L){return new Yl(L,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)})(r,v.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,i,a).next((S=>{S.forEach(((N,L)=>{d=d.insert(N,L)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,r,i,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,i,c,a)))).next((d=>{c.forEach(((v,x)=>{const S=x.getKey();d.get(S)===null&&(d=d.insert(S,qt.newInvalidDocument(S)))}));let g=Uo();return d.forEach(((v,x)=>{const S=c.get(v);S!==void 0&&Wo(S.mutation,x,Kn.empty(),Tt.now()),Zl(r,x)&&(g=g.insert(v,x))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return X.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:ar(a.createTime)}})(r)),X.resolve()}getNamedQuery(e,r){return X.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(a){return{name:a.name,query:gx(a.bundledQuery),readTime:ar(a.readTime)}})(r)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.overlays=new ct(Ie.comparator),this.Ir=new Map}getOverlay(e,r){return X.resolve(this.overlays.get(r))}getOverlays(e,r){const i=Ls();return X.forEach(r,(a=>this.getOverlay(e,a).next((c=>{c!==null&&i.set(a,c)})))).next((()=>i))}saveOverlays(e,r,i){return i.forEach(((a,c)=>{this.ht(e,r,c)})),X.resolve()}removeOverlaysForBatchId(e,r,i){const a=this.Ir.get(i);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.Ir.delete(i)),X.resolve()}getOverlaysForCollection(e,r,i){const a=Ls(),c=r.length+1,d=new Ie(r.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const v=g.getNext().value,x=v.getKey();if(!r.isPrefixOf(x.path))break;x.path.length===c&&v.largestBatchId>i&&a.set(v.getKey(),v)}return X.resolve(a)}getOverlaysForCollectionGroup(e,r,i,a){let c=new ct(((x,S)=>x-S));const d=this.overlays.getIterator();for(;d.hasNext();){const x=d.getNext().value;if(x.getKey().getCollectionGroup()===r&&x.largestBatchId>i){let S=c.get(x.largestBatchId);S===null&&(S=Ls(),c=c.insert(x.largestBatchId,S)),S.set(x.getKey(),x)}}const g=Ls(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((x,S)=>g.set(x,S))),!(g.size()>=a)););return X.resolve(g)}ht(e,r,i){const a=this.overlays.get(i.key);if(a!==null){const d=this.Ir.get(a.largestBatchId).delete(i.key);this.Ir.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new W_(r,i));let c=this.Ir.get(r);c===void 0&&(c=Be(),this.Ir.set(r,c)),this.Ir.set(r,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(){this.Tr=new Lt(At.Er),this.dr=new Lt(At.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const i=new At(e,r);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,r){e.forEach((i=>this.addReference(i,r)))}removeReference(e,r){this.Vr(new At(e,r))}mr(e,r){e.forEach((i=>this.removeReference(i,r)))}gr(e){const r=new Ie(new dt([])),i=new At(r,e),a=new At(r,e+1),c=[];return this.dr.forEachInRange([i,a],(d=>{this.Vr(d),c.push(d.key)})),c}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Ie(new dt([])),i=new At(r,e),a=new At(r,e+1);let c=Be();return this.dr.forEachInRange([i,a],(d=>{c=c.add(d.key)})),c}containsKey(e){const r=new At(e,0),i=this.Tr.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class At{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Ie.comparator(e.key,r.key)||Ye(e.wr,r.wr)}static Ar(e,r){return Ye(e.wr,r.wr)||Ie.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Lt(At.Er)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,i,a){const c=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new H_(c,r,i,a);this.mutationQueue.push(d);for(const g of a)this.br=this.br.add(new At(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return X.resolve(d)}lookupMutationBatch(e,r){return X.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,a=this.vr(i),c=a<0?0:a;return X.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new At(r,0),a=new At(r,Number.POSITIVE_INFINITY),c=[];return this.br.forEachInRange([i,a],(d=>{const g=this.Dr(d.wr);c.push(g)})),X.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new Lt(Ye);return r.forEach((a=>{const c=new At(a,0),d=new At(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([c,d],(g=>{i=i.add(g.wr)}))})),X.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,a=i.length+1;let c=i;Ie.isDocumentKey(c)||(c=c.child(""));const d=new At(new Ie(c),0);let g=new Lt(Ye);return this.br.forEachWhile((v=>{const x=v.key.path;return!!i.isPrefixOf(x)&&(x.length===a&&(g=g.add(v.wr)),!0)}),d),X.resolve(this.Cr(g))}Cr(e){const r=[];return e.forEach((i=>{const a=this.Dr(i);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){Ze(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return X.forEach(r.mutations,(a=>{const c=new At(a.key,r.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,r){const i=new At(r,0),a=this.br.firstAfterOrEqual(i);return X.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.Mr=e,this.docs=(function(){return new ct(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,a=this.docs.get(i),c=a?a.size:0,d=this.Mr(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return X.resolve(i?i.document.mutableCopy():qt.newInvalidDocument(r))}getEntries(e,r){let i=Nr();return r.forEach((a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():qt.newInvalidDocument(a))})),X.resolve(i)}getDocumentsMatchingQuery(e,r,i,a){let c=Nr();const d=r.path,g=new Ie(d.child("")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:x,value:{document:S}}=v.getNext();if(!d.isPrefixOf(x.path))break;x.path.length>d.length+1||l_(a_(S),i)<=0||(a.has(S.key)||Zl(r,S))&&(c=c.insert(S.key,S.mutableCopy()))}return X.resolve(c)}getAllFromCollectionGroup(e,r,i,a){Pe()}Or(e,r){return X.forEach(this.docs,(i=>r(i)))}newChangeBuffer(e){return new bx(this)}getSize(e){return X.resolve(this.size)}}class bx extends _x{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(i)})),X.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.persistence=e,this.Nr=new Wi((r=>Ch(r)),Nh),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Vh,this.targetCount=0,this.kr=Ui.Bn()}forEachTarget(e,r){return this.Nr.forEach(((i,a)=>r(a))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.Lr&&(this.Lr=r),X.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Ui(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,X.resolve()}updateTargetData(e,r){return this.Kn(r),X.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,r,i){let a=0;const c=[];return this.Nr.forEach(((d,g)=>{g.sequenceNumber<=r&&i.get(g.targetId)===null&&(this.Nr.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)})),X.waitFor(c).next((()=>a))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,r){const i=this.Nr.get(r)||null;return X.resolve(i)}addMatchingKeys(e,r,i){return this.Br.Rr(r,i),X.resolve()}removeMatchingKeys(e,r,i){this.Br.mr(r,i);const a=this.persistence.referenceDelegate,c=[];return a&&r.forEach((d=>{c.push(a.markPotentiallyOrphaned(e,d))})),X.waitFor(c)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),X.resolve()}getMatchingKeysForTargetId(e,r){const i=this.Br.yr(r);return X.resolve(i)}containsKey(e,r){return X.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,r){this.qr={},this.overlays={},this.Qr=new kh(0),this.Kr=!1,this.Kr=!0,this.$r=new Sx,this.referenceDelegate=e(this),this.Ur=new Ax(this),this.indexManager=new yx,this.remoteDocumentCache=(function(a){return new Ix(a)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new mx(r),this.Gr=new Ex(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Tx,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this.qr[e.toKey()];return i||(i=new kx(r,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,i){ye("MemoryPersistence","Starting transaction:",e);const a=new Nx(this.Qr.next());return this.referenceDelegate.zr(),i(a).next((c=>this.referenceDelegate.jr(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Hr(e,r){return X.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,r))))}}class Nx extends c_{constructor(e){super(),this.currentSequenceNumber=e}}class Lh{constructor(e){this.persistence=e,this.Jr=new Vh,this.Yr=null}static Zr(e){return new Lh(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,r,i){return this.Jr.addReference(i,r),this.Xr.delete(i.toString()),X.resolve()}removeReference(e,r,i){return this.Jr.removeReference(i,r),this.Xr.add(i.toString()),X.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),X.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((a=>this.Xr.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((c=>this.Xr.add(c.toString())))})).next((()=>i.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Xr,(i=>{const a=Ie.fromPath(i);return this.ei(e,a).next((c=>{c||r.removeEntry(a,De.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((i=>{i?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return X.or([()=>X.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,r,i,a){this.targetId=e,this.fromCache=r,this.$i=i,this.Ui=a}static Wi(e,r){let i=Be(),a=Be();for(const c of r.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Mh(e,r.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return j0()?8:h_(R0())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,i,a){const c={result:null};return this.Yi(e,r).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.Zi(e,r,a,i).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new Rx;return this.Xi(e,r,d).next((g=>{if(c.result=g,this.zi)return this.es(e,r,d,g.size)}))})).next((()=>c.result))}es(e,r,i,a){return i.documentReadCount<this.ji?(Mo()<=Ke.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Ri(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),X.resolve()):(Mo()<=Ke.DEBUG&&ye("QueryEngine","Query:",Ri(r),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.Hi*a?(Mo()<=Ke.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Ri(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,or(r))):X.resolve())}Yi(e,r){if(Mp(r))return X.resolve(null);let i=or(r);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=hh(r,null,"F"),i=or(r)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const d=Be(...c);return this.Ji.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,i).next((v=>{const x=this.ts(r,g);return this.ns(r,x,d,v.readTime)?this.Yi(e,hh(r,null,"F")):this.rs(e,x,r,v)}))))})))))}Zi(e,r,i,a){return Mp(r)||a.isEqual(De.min())?X.resolve(null):this.Ji.getDocuments(e,i).next((c=>{const d=this.ts(r,c);return this.ns(r,d,i,a)?X.resolve(null):(Mo()<=Ke.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ri(r)),this.rs(e,d,r,o_(a,-1)).next((g=>g)))}))}ts(e,r){let i=new Lt(zm(e));return r.forEach(((a,c)=>{Zl(e,c)&&(i=i.add(c))})),i}ns(e,r,i,a){if(e.limit===null)return!1;if(i.size!==r.size)return!0;const c=e.limitType==="F"?r.last():r.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Xi(e,r,i){return Mo()<=Ke.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Ri(r)),this.Ji.getDocumentsMatchingQuery(e,r,as.min(),i)}rs(e,r,i,a){return this.Ji.getDocumentsMatchingQuery(e,i,a).next((c=>(r.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,r,i,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new ct(Ye),this._s=new Wi((c=>Ch(c)),Nh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wx(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function Dx(s,e,r,i){return new jx(s,e,r,i)}async function ug(s,e){const r=Ve(s);return await r.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return r.mutationQueue.getAllMutationBatches(i).next((c=>(a=c,r.ls(e),r.mutationQueue.getAllMutationBatches(i)))).next((c=>{const d=[],g=[];let v=Be();for(const x of a){d.push(x.batchId);for(const S of x.mutations)v=v.add(S.key)}for(const x of c){g.push(x.batchId);for(const S of x.mutations)v=v.add(S.key)}return r.localDocuments.getDocuments(i,v).next((x=>({hs:x,removedBatchIds:d,addedBatchIds:g})))}))}))}function Vx(s,e){const r=Ve(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),c=r.cs.newChangeBuffer({trackRemovals:!0});return(function(g,v,x,S){const N=x.batch,L=N.keys();let z=X.resolve();return L.forEach((W=>{z=z.next((()=>S.getEntry(v,W))).next((q=>{const B=x.docVersions.get(W);Ze(B!==null),q.version.compareTo(B)<0&&(N.applyToRemoteDocument(q,x),q.isValidDocument()&&(q.setReadTime(x.commitVersion),S.addEntry(q)))}))})),z.next((()=>g.mutationQueue.removeMutationBatch(v,N)))})(r,i,e,c).next((()=>c.apply(i))).next((()=>r.mutationQueue.performConsistencyCheck(i))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(g){let v=Be();for(let x=0;x<g.mutationResults.length;++x)g.mutationResults[x].transformResults.length>0&&(v=v.add(g.batch.mutations[x].key));return v})(e)))).next((()=>r.localDocuments.getDocuments(i,a)))}))}function cg(s){const e=Ve(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function Lx(s,e){const r=Ve(s),i=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const g=[];e.targetChanges.forEach(((S,N)=>{const L=a.get(N);if(!L)return;g.push(r.Ur.removeMatchingKeys(c,S.removedDocuments,N).next((()=>r.Ur.addMatchingKeys(c,S.addedDocuments,N))));let z=L.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(N)!==null?z=z.withResumeToken(Mt.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):S.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(S.resumeToken,i)),a=a.insert(N,z),(function(q,B,te){return q.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(L,z,S)&&g.push(r.Ur.updateTargetData(c,z))}));let v=Nr(),x=Be();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&g.push(r.persistence.referenceDelegate.updateLimboDocument(c,S))})),g.push(Mx(c,d,e.documentUpdates).next((S=>{v=S.Ps,x=S.Is}))),!i.isEqual(De.min())){const S=r.Ur.getLastRemoteSnapshotVersion(c).next((N=>r.Ur.setTargetsMetadata(c,c.currentSequenceNumber,i)));g.push(S)}return X.waitFor(g).next((()=>d.apply(c))).next((()=>r.localDocuments.getLocalViewOfDocuments(c,v,x))).next((()=>v))})).then((c=>(r.os=a,c)))}function Mx(s,e,r){let i=Be(),a=Be();return r.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let d=Nr();return r.forEach(((g,v)=>{const x=c.get(g);v.isFoundDocument()!==x.isFoundDocument()&&(a=a.add(g)),v.isNoDocument()&&v.version.isEqual(De.min())?(e.removeEntry(g,v.readTime),d=d.insert(g,v)):!x.isValidDocument()||v.version.compareTo(x.version)>0||v.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(v),d=d.insert(g,v)):ye("LocalStore","Ignoring outdated watch update for ",g,". Current version:",x.version," Watch version:",v.version)})),{Ps:d,Is:a}}))}function Ox(s,e){const r=Ve(s);return r.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Fx(s,e){const r=Ve(s);return r.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return r.Ur.getTargetData(i,e).next((c=>c?(a=c,X.resolve(a)):r.Ur.allocateTargetId(i).next((d=>(a=new ns(e,d,"TargetPurposeListen",i.currentSequenceNumber),r.Ur.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=r.os.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(i.targetId,i),r._s.set(e,i.targetId)),i}))}async function gh(s,e,r){const i=Ve(s),a=i.os.get(e),c=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",c,(d=>i.persistence.referenceDelegate.removeTarget(d,a)))}catch(d){if(!ia(d))throw d;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}i.os=i.os.remove(e),i._s.delete(a.target)}function Kp(s,e,r){const i=Ve(s);let a=De.min(),c=Be();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(v,x,S){const N=Ve(v),L=N._s.get(S);return L!==void 0?X.resolve(N.os.get(L)):N.Ur.getTargetData(x,S)})(i,d,or(e)).next((g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(d,g.targetId).next((v=>{c=v}))})).next((()=>i.ss.getDocumentsMatchingQuery(d,e,r?a:De.min(),r?c:Be()))).next((g=>(Ux(i,N_(e),g),{documents:g,Ts:c})))))}function Ux(s,e,r){let i=s.us.get(e)||De.min();r.forEach(((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.us.set(e,i)}class Gp{constructor(){this.activeTargetIds=L_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zx{constructor(){this.so=new Gp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,i){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Gp,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nl=null;function $c(){return Nl===null?Nl=(function(){return 268435456+Math.round(2147483648*Math.random())})():Nl++,"0x"+Nl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class Hx extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const i=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+r.host,this.vo=`projects/${a}/databases/${c}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${c}`}get Fo(){return!1}Mo(r,i,a,c,d){const g=$c(),v=this.xo(r,i.toUriEncodedString());ye("RestConnection",`Sending RPC '${r}' ${g}:`,v,a);const x={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(x,c,d),this.No(r,v,x,a).then((S=>(ye("RestConnection",`Received RPC '${r}' ${g}: `,S),S)),(S=>{throw Li("RestConnection",`RPC '${r}' ${g} failed with error: `,S,"url: ",v,"request:",a),S}))}Lo(r,i,a,c,d,g){return this.Mo(r,i,a,c,d)}Oo(r,i,a){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+qi})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((c,d)=>r[d]=c)),a&&a.headers.forEach(((c,d)=>r[d]=c))}xo(r,i){const a=$x[r];return`${this.Do}/v1/${i}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,i,a){const c=$c();return new Promise(((d,g)=>{const v=new Sm;v.setWithCredentials(!0),v.listenOnce(km.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Pl.NO_ERROR:const S=v.getResponseJson();ye(Bt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(S)),d(S);break;case Pl.TIMEOUT:ye(Bt,`RPC '${e}' ${c} timed out`),g(new Te(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Pl.HTTP_ERROR:const N=v.getStatus();if(ye(Bt,`RPC '${e}' ${c} failed with status:`,N,"response text:",v.getResponseText()),N>0){let L=v.getResponseJson();Array.isArray(L)&&(L=L[0]);const z=L==null?void 0:L.error;if(z&&z.status&&z.message){const W=(function(B){const te=B.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(te)>=0?te:Z.UNKNOWN})(z.status);g(new Te(W,z.message))}else g(new Te(Z.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new Te(Z.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{ye(Bt,`RPC '${e}' ${c} completed.`)}}));const x=JSON.stringify(a);ye(Bt,`RPC '${e}' ${c} sending request:`,a),v.send(r,"POST",x,i,15)}))}Bo(e,r,i){const a=$c(),c=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Am(),g=bm(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(v.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Oo(v.initMessageHeaders,r,i),v.encodeInitMessageHeaders=!0;const S=c.join("");ye(Bt,`Creating RPC '${e}' stream ${a}: ${S}`,v);const N=d.createWebChannel(S,v);let L=!1,z=!1;const W=new qx({Io:B=>{z?ye(Bt,`Not sending because RPC '${e}' stream ${a} is closed:`,B):(L||(ye(Bt,`Opening RPC '${e}' stream ${a} transport.`),N.open(),L=!0),ye(Bt,`RPC '${e}' stream ${a} sending:`,B),N.send(B))},To:()=>N.close()}),q=(B,te,ie)=>{B.listen(te,(he=>{try{ie(he)}catch(xe){setTimeout((()=>{throw xe}),0)}}))};return q(N,Fo.EventType.OPEN,(()=>{z||(ye(Bt,`RPC '${e}' stream ${a} transport opened.`),W.yo())})),q(N,Fo.EventType.CLOSE,(()=>{z||(z=!0,ye(Bt,`RPC '${e}' stream ${a} transport closed`),W.So())})),q(N,Fo.EventType.ERROR,(B=>{z||(z=!0,Li(Bt,`RPC '${e}' stream ${a} transport errored:`,B),W.So(new Te(Z.UNAVAILABLE,"The operation could not be completed")))})),q(N,Fo.EventType.MESSAGE,(B=>{var te;if(!z){const ie=B.data[0];Ze(!!ie);const he=ie,xe=he.error||((te=he[0])===null||te===void 0?void 0:te.error);if(xe){ye(Bt,`RPC '${e}' stream ${a} received error:`,xe);const Ee=xe.status;let me=(function(I){const b=vt[I];if(b!==void 0)return Zm(b)})(Ee),A=xe.message;me===void 0&&(me=Z.INTERNAL,A="Unknown error status: "+Ee+" with message "+xe.message),z=!0,W.So(new Te(me,A)),N.close()}else ye(Bt,`RPC '${e}' stream ${a} received:`,ie),W.bo(ie)}})),q(g,Im.STAT_EVENT,(B=>{B.stat===oh.PROXY?ye(Bt,`RPC '${e}' stream ${a} detected buffering proxy`):B.stat===oh.NOPROXY&&ye(Bt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{W.wo()}),0),W}}function qc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(s){return new tx(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,r,i=1e3,a=1.5,c=6e4){this.ui=e,this.timerId=r,this.ko=i,this.qo=a,this.Qo=c,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-i);a>0&&ye("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,r,i,a,c,d,g,v){this.ui=e,this.Ho=i,this.Jo=a,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hg(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Z.RESOURCE_EXHAUSTED?(Cr(r.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.Yo===r&&this.P_(i,a)}),(i=>{e((()=>{const a=new Te(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(a)}))}))}P_(e,r){const i=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{i((()=>this.I_(a)))})),this.stream.onMessage((a=>{i((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Wx extends dg{constructor(e,r,i,a,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,d),this.serializer=c}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=sx(this.serializer,e),i=(function(c){if(!("targetChange"in c))return De.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?De.min():d.readTime?ar(d.readTime):De.min()})(e);return this.listener.d_(r,i)}A_(e){const r={};r.database=mh(this.serializer),r.addTarget=(function(c,d){let g;const v=d.target;if(g=ch(v)?{documents:ax(c,v)}:{query:lx(c,v)._t},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=ng(c,d.resumeToken);const x=dh(c,d.expectedCount);x!==null&&(g.expectedCount=x)}else if(d.snapshotVersion.compareTo(De.min())>0){g.readTime=Hl(c,d.snapshotVersion.toTimestamp());const x=dh(c,d.expectedCount);x!==null&&(g.expectedCount=x)}return g})(this.serializer,e);const i=cx(this.serializer,e);i&&(r.labels=i),this.a_(r)}R_(e){const r={};r.database=mh(this.serializer),r.removeTarget=e,this.a_(r)}}class Qx extends dg{constructor(e,r,i,a,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,d),this.serializer=c}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Ze(!!e.streamToken),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=ox(e.writeResults,e.commitTime),i=ar(e.commitTime);return this.listener.g_(i,r)}p_(){const e={};e.database=mh(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((i=>ix(this.serializer,i)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx extends class{}{constructor(e,r,i,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=i,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new Te(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Mo(e,fh(r,i),a,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Te(Z.UNKNOWN,c.toString())}))}Lo(e,r,i,a,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Lo(e,fh(r,i),a,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Te(Z.UNKNOWN,d.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Gx{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Cr(r),this.D_=!1):ye("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,r,i,a,c){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=c,this.k_._o((d=>{i.enqueueAndForget((async()=>{Bs(this)&&(ye("RemoteStore","Restarting streams for network reachability change."),await(async function(v){const x=Ve(v);x.L_.add(4),await la(x),x.q_.set("Unknown"),x.L_.delete(4),await su(x)})(this))}))})),this.q_=new Gx(i,a)}}async function su(s){if(Bs(s))for(const e of s.B_)await e(!0)}async function la(s){for(const e of s.B_)await e(!1)}function fg(s,e){const r=Ve(s);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),zh(r)?Uh(r):Qi(r).r_()&&Fh(r,e))}function Oh(s,e){const r=Ve(s),i=Qi(r);r.N_.delete(e),i.r_()&&pg(r,e),r.N_.size===0&&(i.r_()?i.o_():Bs(r)&&r.q_.set("Unknown"))}function Fh(s,e){if(s.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const r=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Qi(s).A_(e)}function pg(s,e){s.Q_.xe(e),Qi(s).R_(e)}function Uh(s){s.Q_=new X_({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>s.N_.get(e)||null,tt:()=>s.datastore.serializer.databaseId}),Qi(s).start(),s.q_.v_()}function zh(s){return Bs(s)&&!Qi(s).n_()&&s.N_.size>0}function Bs(s){return Ve(s).L_.size===0}function mg(s){s.Q_=void 0}async function Xx(s){s.q_.set("Online")}async function Jx(s){s.N_.forEach(((e,r)=>{Fh(s,e)}))}async function Zx(s,e){mg(s),zh(s)?(s.q_.M_(e),Uh(s)):s.q_.set("Unknown")}async function ew(s,e,r){if(s.q_.set("Online"),e instanceof tg&&e.state===2&&e.cause)try{await(async function(a,c){const d=c.cause;for(const g of c.targetIds)a.N_.has(g)&&(await a.remoteSyncer.rejectListen(g,d),a.N_.delete(g),a.Q_.removeTarget(g))})(s,e)}catch(i){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Wl(s,i)}else if(e instanceof Vl?s.Q_.Ke(e):e instanceof eg?s.Q_.He(e):s.Q_.We(e),!r.isEqual(De.min()))try{const i=await cg(s.localStore);r.compareTo(i)>=0&&await(function(c,d){const g=c.Q_.rt(d);return g.targetChanges.forEach(((v,x)=>{if(v.resumeToken.approximateByteSize()>0){const S=c.N_.get(x);S&&c.N_.set(x,S.withResumeToken(v.resumeToken,d))}})),g.targetMismatches.forEach(((v,x)=>{const S=c.N_.get(v);if(!S)return;c.N_.set(v,S.withResumeToken(Mt.EMPTY_BYTE_STRING,S.snapshotVersion)),pg(c,v);const N=new ns(S.target,v,x,S.sequenceNumber);Fh(c,N)})),c.remoteSyncer.applyRemoteEvent(g)})(s,r)}catch(i){ye("RemoteStore","Failed to raise snapshot:",i),await Wl(s,i)}}async function Wl(s,e,r){if(!ia(e))throw e;s.L_.add(1),await la(s),s.q_.set("Offline"),r||(r=()=>cg(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ye("RemoteStore","Retrying IndexedDB access"),await r(),s.L_.delete(1),await su(s)}))}function gg(s,e){return e().catch((r=>Wl(s,r,e)))}async function iu(s){const e=Ve(s),r=us(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tw(e);)try{const a=await Ox(e.localStore,i);if(a===null){e.O_.length===0&&r.o_();break}i=a.batchId,nw(e,a)}catch(a){await Wl(e,a)}yg(e)&&vg(e)}function tw(s){return Bs(s)&&s.O_.length<10}function nw(s,e){s.O_.push(e);const r=us(s);r.r_()&&r.V_&&r.m_(e.mutations)}function yg(s){return Bs(s)&&!us(s).n_()&&s.O_.length>0}function vg(s){us(s).start()}async function rw(s){us(s).p_()}async function sw(s){const e=us(s);for(const r of s.O_)e.m_(r.mutations)}async function iw(s,e,r){const i=s.O_.shift(),a=Ph.from(i,e,r);await gg(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await iu(s)}async function ow(s,e){e&&us(s).V_&&await(async function(i,a){if((function(d){return K_(d)&&d!==Z.ABORTED})(a.code)){const c=i.O_.shift();us(i).s_(),await gg(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,a))),await iu(i)}})(s,e),yg(s)&&vg(s)}async function Xp(s,e){const r=Ve(s);r.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const i=Bs(r);r.L_.add(3),await la(r),i&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await su(r)}async function aw(s,e){const r=Ve(s);e?(r.L_.delete(2),await su(r)):e||(r.L_.add(2),await la(r),r.q_.set("Unknown"))}function Qi(s){return s.K_||(s.K_=(function(r,i,a){const c=Ve(r);return c.w_(),new Wx(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Eo:Xx.bind(null,s),Ro:Jx.bind(null,s),mo:Zx.bind(null,s),d_:ew.bind(null,s)}),s.B_.push((async e=>{e?(s.K_.s_(),zh(s)?Uh(s):s.q_.set("Unknown")):(await s.K_.stop(),mg(s))}))),s.K_}function us(s){return s.U_||(s.U_=(function(r,i,a){const c=Ve(r);return c.w_(),new Qx(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:rw.bind(null,s),mo:ow.bind(null,s),f_:sw.bind(null,s),g_:iw.bind(null,s)}),s.B_.push((async e=>{e?(s.U_.s_(),await iu(s)):(await s.U_.stop(),s.O_.length>0&&(ye("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))}))),s.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,r,i,a,c){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,i,a,c){const d=Date.now()+i,g=new Bh(e,r,d,a,c);return g.start(i),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $h(s,e){if(Cr("AsyncQueue",`${e}: ${s}`),ia(s))return new Te(Z.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.comparator=e?(r,i)=>e(r,i)||Ie.comparator(r.key,i.key):(r,i)=>Ie.comparator(r.key,i.key),this.keyedMap=Uo(),this.sortedSet=new ct(this.comparator)}static emptySet(e){return new Vi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,i)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Vi)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new Vi;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(){this.W_=new ct(Ie.comparator)}track(e){const r=e.doc.key,i=this.W_.get(r);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(r,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(r):e.type===1&&i.type===2?this.W_=this.W_.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,i)=>{e.push(i)})),e}}class zi{constructor(e,r,i,a,c,d,g,v,x){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=x}static fromInitialDocuments(e,r,i,a,c){const d=[];return r.forEach((g=>{d.push({type:0,doc:g})})),new zi(e,r,Vi.emptySet(r),d,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==i[a].type||!r[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class uw{constructor(){this.queries=Zp(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,i){const a=Ve(r),c=a.queries;a.queries=Zp(),c.forEach(((d,g)=>{for(const v of g.j_)v.onError(i)}))})(this,new Te(Z.ABORTED,"Firestore shutting down"))}}function Zp(){return new Wi((s=>Um(s)),Jl)}async function _g(s,e){const r=Ve(s);let i=3;const a=e.query;let c=r.queries.get(a);c?!c.H_()&&e.J_()&&(i=2):(c=new lw,i=e.J_()?0:1);try{switch(i){case 0:c.z_=await r.onListen(a,!0);break;case 1:c.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(d){const g=$h(d,`Initialization of query '${Ri(e.query)}' failed`);return void e.onError(g)}r.queries.set(a,c),c.j_.push(e),e.Z_(r.onlineState),c.z_&&e.X_(c.z_)&&qh(r)}async function xg(s,e){const r=Ve(s),i=e.query;let a=3;const c=r.queries.get(i);if(c){const d=c.j_.indexOf(e);d>=0&&(c.j_.splice(d,1),c.j_.length===0?a=e.J_()?0:1:!c.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function cw(s,e){const r=Ve(s);let i=!1;for(const a of e){const c=a.query,d=r.queries.get(c);if(d){for(const g of d.j_)g.X_(a)&&(i=!0);d.z_=a}}i&&qh(r)}function hw(s,e,r){const i=Ve(s),a=i.queries.get(e);if(a)for(const c of a.j_)c.onError(r);i.queries.delete(e)}function qh(s){s.Y_.forEach((e=>{e.next()}))}var yh,em;(em=yh||(yh={})).ea="default",em.Cache="cache";class wg{constructor(e,r,i){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new zi(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const i=r!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=zi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==yh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e){this.key=e}}class Tg{constructor(e){this.key=e}}class dw{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Be(),this.mutatedKeys=Be(),this.Aa=zm(e),this.Ra=new Vi(this.Aa)}get Va(){return this.Ta}ma(e,r){const i=r?r.fa:new Jp,a=r?r.Ra:this.Ra;let c=r?r.mutatedKeys:this.mutatedKeys,d=a,g=!1;const v=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,x=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((S,N)=>{const L=a.get(S),z=Zl(this.query,N)?N:null,W=!!L&&this.mutatedKeys.has(L.key),q=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let B=!1;L&&z?L.data.isEqual(z.data)?W!==q&&(i.track({type:3,doc:z}),B=!0):this.ga(L,z)||(i.track({type:2,doc:z}),B=!0,(v&&this.Aa(z,v)>0||x&&this.Aa(z,x)<0)&&(g=!0)):!L&&z?(i.track({type:0,doc:z}),B=!0):L&&!z&&(i.track({type:1,doc:L}),B=!0,(v||x)&&(g=!0)),B&&(z?(d=d.add(z),c=q?c.add(S):c.delete(S)):(d=d.delete(S),c=c.delete(S)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const S=this.query.limitType==="F"?d.last():d.first();d=d.delete(S.key),c=c.delete(S.key),i.track({type:1,doc:S})}return{Ra:d,fa:i,ns:g,mutatedKeys:c}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i,a){const c=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const d=e.fa.G_();d.sort(((S,N)=>(function(z,W){const q=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return q(z)-q(W)})(S.type,N.type)||this.Aa(S.doc,N.doc))),this.pa(i),a=a!=null&&a;const g=r&&!a?this.ya():[],v=this.da.size===0&&this.current&&!a?1:0,x=v!==this.Ea;return this.Ea=v,d.length!==0||x?{snapshot:new zi(this.query,e.Ra,c,d,e.mutatedKeys,v===0,x,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:g}:{wa:g}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Jp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Be(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const r=[];return e.forEach((i=>{this.da.has(i)||r.push(new Tg(i))})),this.da.forEach((i=>{e.has(i)||r.push(new Eg(i))})),r}ba(e){this.Ta=e.Ts,this.da=Be();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return zi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class fw{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class pw{constructor(e){this.key=e,this.va=!1}}class mw{constructor(e,r,i,a,c,d){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Ca={},this.Fa=new Wi((g=>Um(g)),Jl),this.Ma=new Map,this.xa=new Set,this.Oa=new ct(Ie.comparator),this.Na=new Map,this.La=new Vh,this.Ba={},this.ka=new Map,this.qa=Ui.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function gw(s,e,r=!0){const i=Cg(s);let a;const c=i.Fa.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Da()):a=await Sg(i,e,r,!0),a}async function yw(s,e){const r=Cg(s);await Sg(r,e,!0,!1)}async function Sg(s,e,r,i){const a=await Fx(s.localStore,or(e)),c=a.targetId,d=s.sharedClientState.addLocalQueryTarget(c,r);let g;return i&&(g=await vw(s,e,c,d==="current",a.resumeToken)),s.isPrimaryClient&&r&&fg(s.remoteStore,a),g}async function vw(s,e,r,i,a){s.Ka=(N,L,z)=>(async function(q,B,te,ie){let he=B.view.ma(te);he.ns&&(he=await Kp(q.localStore,B.query,!1).then((({documents:A})=>B.view.ma(A,he))));const xe=ie&&ie.targetChanges.get(B.targetId),Ee=ie&&ie.targetMismatches.get(B.targetId)!=null,me=B.view.applyChanges(he,q.isPrimaryClient,xe,Ee);return nm(q,B.targetId,me.wa),me.snapshot})(s,N,L,z);const c=await Kp(s.localStore,e,!0),d=new dw(e,c.Ts),g=d.ma(c.documents),v=aa.createSynthesizedTargetChangeForCurrentChange(r,i&&s.onlineState!=="Offline",a),x=d.applyChanges(g,s.isPrimaryClient,v);nm(s,r,x.wa);const S=new fw(e,r,d);return s.Fa.set(e,S),s.Ma.has(r)?s.Ma.get(r).push(e):s.Ma.set(r,[e]),x.snapshot}async function _w(s,e,r){const i=Ve(s),a=i.Fa.get(e),c=i.Ma.get(a.targetId);if(c.length>1)return i.Ma.set(a.targetId,c.filter((d=>!Jl(d,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await gh(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),r&&Oh(i.remoteStore,a.targetId),vh(i,a.targetId)})).catch(sa)):(vh(i,a.targetId),await gh(i.localStore,a.targetId,!0))}async function xw(s,e){const r=Ve(s),i=r.Fa.get(e),a=r.Ma.get(i.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),Oh(r.remoteStore,i.targetId))}async function ww(s,e,r){const i=Aw(s);try{const a=await(function(d,g){const v=Ve(d),x=Tt.now(),S=g.reduce(((z,W)=>z.add(W.key)),Be());let N,L;return v.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let W=Nr(),q=Be();return v.cs.getEntries(z,S).next((B=>{W=B,W.forEach(((te,ie)=>{ie.isValidDocument()||(q=q.add(te))}))})).next((()=>v.localDocuments.getOverlayedDocuments(z,W))).next((B=>{N=B;const te=[];for(const ie of g){const he=$_(ie,N.get(ie.key).overlayedDocument);he!=null&&te.push(new zs(ie.key,he,jm(he.value.mapValue),br.exists(!0)))}return v.mutationQueue.addMutationBatch(z,x,te,g)})).next((B=>{L=B;const te=B.applyToLocalDocumentSet(N,q);return v.documentOverlayCache.saveOverlays(z,B.batchId,te)}))})).then((()=>({batchId:L.batchId,changes:$m(N)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(d,g,v){let x=d.Ba[d.currentUser.toKey()];x||(x=new ct(Ye)),x=x.insert(g,v),d.Ba[d.currentUser.toKey()]=x})(i,a.batchId,r),await ua(i,a.changes),await iu(i.remoteStore)}catch(a){const c=$h(a,"Failed to persist write");r.reject(c)}}async function kg(s,e){const r=Ve(s);try{const i=await Lx(r.localStore,e);e.targetChanges.forEach(((a,c)=>{const d=r.Na.get(c);d&&(Ze(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?d.va=!0:a.modifiedDocuments.size>0?Ze(d.va):a.removedDocuments.size>0&&(Ze(d.va),d.va=!1))})),await ua(r,i,e)}catch(i){await sa(i)}}function tm(s,e,r){const i=Ve(s);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const a=[];i.Fa.forEach(((c,d)=>{const g=d.view.Z_(e);g.snapshot&&a.push(g.snapshot)})),(function(d,g){const v=Ve(d);v.onlineState=g;let x=!1;v.queries.forEach(((S,N)=>{for(const L of N.j_)L.Z_(g)&&(x=!0)})),x&&qh(v)})(i.eventManager,e),a.length&&i.Ca.d_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Ew(s,e,r){const i=Ve(s);i.sharedClientState.updateQueryState(e,"rejected",r);const a=i.Na.get(e),c=a&&a.key;if(c){let d=new ct(Ie.comparator);d=d.insert(c,qt.newNoDocument(c,De.min()));const g=Be().add(c),v=new nu(De.min(),new Map,new ct(Ye),d,g);await kg(i,v),i.Oa=i.Oa.remove(c),i.Na.delete(e),Hh(i)}else await gh(i.localStore,e,!1).then((()=>vh(i,e,r))).catch(sa)}async function Tw(s,e){const r=Ve(s),i=e.batch.batchId;try{const a=await Vx(r.localStore,e);bg(r,i,null),Ig(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await ua(r,a)}catch(a){await sa(a)}}async function Sw(s,e,r){const i=Ve(s);try{const a=await(function(d,g){const v=Ve(d);return v.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let S;return v.mutationQueue.lookupMutationBatch(x,g).next((N=>(Ze(N!==null),S=N.keys(),v.mutationQueue.removeMutationBatch(x,N)))).next((()=>v.mutationQueue.performConsistencyCheck(x))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(x,S,g))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,S))).next((()=>v.localDocuments.getDocuments(x,S)))}))})(i.localStore,e);bg(i,e,r),Ig(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await ua(i,a)}catch(a){await sa(a)}}function Ig(s,e){(s.ka.get(e)||[]).forEach((r=>{r.resolve()})),s.ka.delete(e)}function bg(s,e,r){const i=Ve(s);let a=i.Ba[i.currentUser.toKey()];if(a){const c=a.get(e);c&&(r?c.reject(r):c.resolve(),a=a.remove(e)),i.Ba[i.currentUser.toKey()]=a}}function vh(s,e,r=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Ma.get(e))s.Fa.delete(i),r&&s.Ca.$a(i,r);s.Ma.delete(e),s.isPrimaryClient&&s.La.gr(e).forEach((i=>{s.La.containsKey(i)||Ag(s,i)}))}function Ag(s,e){s.xa.delete(e.path.canonicalString());const r=s.Oa.get(e);r!==null&&(Oh(s.remoteStore,r),s.Oa=s.Oa.remove(e),s.Na.delete(r),Hh(s))}function nm(s,e,r){for(const i of r)i instanceof Eg?(s.La.addReference(i.key,e),kw(s,i)):i instanceof Tg?(ye("SyncEngine","Document no longer in limbo: "+i.key),s.La.removeReference(i.key,e),s.La.containsKey(i.key)||Ag(s,i.key)):Pe()}function kw(s,e){const r=e.key,i=r.path.canonicalString();s.Oa.get(r)||s.xa.has(i)||(ye("SyncEngine","New document in limbo: "+r),s.xa.add(i),Hh(s))}function Hh(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const e=s.xa.values().next().value;s.xa.delete(e);const r=new Ie(dt.fromString(e)),i=s.qa.next();s.Na.set(i,new pw(r)),s.Oa=s.Oa.insert(r,i),fg(s.remoteStore,new ns(or(Xl(r.path)),i,"TargetPurposeLimboResolution",kh.oe))}}async function ua(s,e,r){const i=Ve(s),a=[],c=[],d=[];i.Fa.isEmpty()||(i.Fa.forEach(((g,v)=>{d.push(i.Ka(v,e,r).then((x=>{var S;if((x||r)&&i.isPrimaryClient){const N=x?!x.fromCache:(S=r==null?void 0:r.targetChanges.get(v.targetId))===null||S===void 0?void 0:S.current;i.sharedClientState.updateQueryState(v.targetId,N?"current":"not-current")}if(x){a.push(x);const N=Mh.Wi(v.targetId,x);c.push(N)}})))})),await Promise.all(d),i.Ca.d_(a),await(async function(v,x){const S=Ve(v);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(N=>X.forEach(x,(L=>X.forEach(L.$i,(z=>S.persistence.referenceDelegate.addReference(N,L.targetId,z))).next((()=>X.forEach(L.Ui,(z=>S.persistence.referenceDelegate.removeReference(N,L.targetId,z)))))))))}catch(N){if(!ia(N))throw N;ye("LocalStore","Failed to update sequence numbers: "+N)}for(const N of x){const L=N.targetId;if(!N.fromCache){const z=S.os.get(L),W=z.snapshotVersion,q=z.withLastLimboFreeSnapshotVersion(W);S.os=S.os.insert(L,q)}}})(i.localStore,c))}async function Iw(s,e){const r=Ve(s);if(!r.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const i=await ug(r.localStore,e);r.currentUser=e,(function(c,d){c.ka.forEach((g=>{g.forEach((v=>{v.reject(new Te(Z.CANCELLED,d))}))})),c.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ua(r,i.hs)}}function bw(s,e){const r=Ve(s),i=r.Na.get(e);if(i&&i.va)return Be().add(i.key);{let a=Be();const c=r.Ma.get(e);if(!c)return a;for(const d of c){const g=r.Fa.get(d);a=a.unionWith(g.view.Va)}return a}}function Cg(s){const e=Ve(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=kg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ew.bind(null,e),e.Ca.d_=cw.bind(null,e.eventManager),e.Ca.$a=hw.bind(null,e.eventManager),e}function Aw(s){const e=Ve(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sw.bind(null,e),e}class Ql{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ru(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return Dx(this.persistence,new Px,e.initialUser,this.serializer)}Ga(e){return new Cx(Lh.Zr,this.serializer)}Wa(e){return new zx}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ql.provider={build:()=>new Ql};class _h{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>tm(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Iw.bind(null,this.syncEngine),await aw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new uw})()}createDatastore(e){const r=ru(e.databaseInfo.databaseId),i=(function(c){return new Hx(c)})(e.databaseInfo);return(function(c,d,g,v){return new Kx(c,d,g,v)})(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return(function(i,a,c,d,g){return new Yx(i,a,c,d,g)})(this.localStore,this.datastore,e.asyncQueue,(r=>tm(this.syncEngine,r,0)),(function(){return Yp.D()?new Yp:new Bx})())}createSyncEngine(e,r){return(function(a,c,d,g,v,x,S){const N=new mw(a,c,d,g,v,x);return S&&(N.Qa=!0),N})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(a){const c=Ve(a);ye("RemoteStore","RemoteStore shutting down."),c.L_.add(5),await la(c),c.k_.shutdown(),c.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}_h.provider={build:()=>new _h};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Cr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,r,i,a,c){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this.databaseInfo=a,this.user=$t.UNAUTHENTICATED,this.clientId=Nm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async d=>{ye("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ye("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=$h(r,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Hc(s,e){s.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const r=s.configuration;await e.initialize(r);let i=r.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await ug(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function rm(s,e){s.asyncQueue.verifyOperationInProgress();const r=await Nw(s);ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,s.configuration),s.setCredentialChangeListener((i=>Xp(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>Xp(e.remoteStore,a))),s._onlineComponents=e}async function Nw(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hc(s,s._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Z.FAILED_PRECONDITION||a.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;Li("Error using user provided cache. Falling back to memory cache: "+r),await Hc(s,new Ql)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),await Hc(s,new Ql);return s._offlineComponents}async function Rg(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),await rm(s,s._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),await rm(s,new _h))),s._onlineComponents}function Rw(s){return Rg(s).then((e=>e.syncEngine))}async function xh(s){const e=await Rg(s),r=e.eventManager;return r.onListen=gw.bind(null,e.syncEngine),r.onUnlisten=_w.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=yw.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=xw.bind(null,e.syncEngine),r}function Pw(s,e,r={}){const i=new is;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,v,x){const S=new Ng({next:L=>{S.Za(),d.enqueueAndForget((()=>xg(c,N)));const z=L.docs.has(g);!z&&L.fromCache?x.reject(new Te(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&L.fromCache&&v&&v.source==="server"?x.reject(new Te(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(L)},error:L=>x.reject(L)}),N=new wg(Xl(g.path),S,{includeMetadataChanges:!0,_a:!0});return _g(c,N)})(await xh(s),s.asyncQueue,e,r,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(s,e,r){if(!r)throw new Te(Z.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Dw(s,e,r,i){if(e===!0&&i===!0)throw new Te(Z.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function im(s){if(!Ie.isDocumentKey(s))throw new Te(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Wh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Pe()}function os(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Te(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Wh(s);throw new Te(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){var r,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Te(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Dw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pg((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new Te(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Te(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Te(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qh{constructor(e,r,i,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new om({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new om(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Xv;switch(i.type){case"firstParty":return new t_(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const i=sm.get(r);i&&(ye("ComponentProvider","Removing Datastore"),sm.delete(r),i.terminate())})(this),Promise.resolve()}}function Vw(s,e,r,i={}){var a;const c=(s=os(s,Qh))._getSettings(),d=`${e}:${r}`;if(c.host!=="firestore.googleapis.com"&&c.host!==d&&Li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),i.mockUserToken){let g,v;if(typeof i.mockUserToken=="string")g=i.mockUserToken,v=$t.MOCK_USER;else{g=N0(i.mockUserToken,(a=s._app)===null||a===void 0?void 0:a.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new Te(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new $t(x)}s._authCredentials=new Jv(new Cm(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ou(this.firestore,e,this._query)}}class gn{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}}class na extends ou{constructor(e,r,i){super(e,r,Xl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new Ie(e))}withConverter(e){return new na(this.firestore,e,this._path)}}function ca(s,e,...r){if(s=Qo(s),arguments.length===1&&(e=Nm.newId()),jw("doc","path",e),s instanceof Qh){const i=dt.fromString(e,...r);return im(i),new gn(s,null,new Ie(i))}{if(!(s instanceof gn||s instanceof na))throw new Te(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(dt.fromString(e,...r));return im(i),new gn(s.firestore,s instanceof na?s.converter:null,new Ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hg(this,"async_queue_retry"),this.Vu=()=>{const i=qc();i&&ye("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const r=qc();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=qc();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new is;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ia(e))throw e;ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const a=(function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),g})(i);throw Cr("INTERNAL UNHANDLED ERROR: ",a),i})).then((i=>(this.du=!1,i))))));return this.mu=r,r}enqueueAfterDelay(e,r,i){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=Bh.createAndSchedule(this,e,r,i,(c=>this.yu(c)));return this.Tu.push(a),a}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,i)=>r.targetTimeMs-i.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function lm(s){return(function(r,i){if(typeof r!="object"||r===null)return!1;const a=r;for(const c of i)if(c in a&&typeof a[c]=="function")return!0;return!1})(s,["next","error","complete"])}class ra extends Qh{constructor(e,r,i,a){super(e,r,i,a),this.type="firestore",this._queue=new am,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new am(e),this._firestoreClient=void 0,await e}}}function Lw(s,e){const r=typeof s=="object"?s:Fv(),i=typeof s=="string"?s:"(default)",a=Vv(r,"firestore").getImmediate({identifier:i});if(!a._initialized){const c=A0("firestore");c&&Vw(a,...c)}return a}function Kh(s){if(s._terminated)throw new Te(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||Mw(s),s._firestoreClient}function Mw(s){var e,r,i;const a=s._freezeSettings(),c=(function(g,v,x,S){return new p_(g,v,x,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,Pg(S.experimentalLongPollingOptions),S.useFetchStreams)})(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new Cw(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&(function(g){const v=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(v),_online:v}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bi(Mt.fromBase64String(e))}catch(r){throw new Te(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Bi(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Te(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Te(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Te(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==a[c])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=/^__.*__$/;class Fw{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,r,this.fieldTransforms):new oa(e,this.data,r,this.fieldTransforms)}}function Dg(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class Jh{constructor(e,r,i,a,c,d){this.settings=e,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=a,c===void 0&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Jh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:i,xu:!1});return a.Ou(e),a}Nu(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:i,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Kl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Dg(this.Cu)&&Ow.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Uw{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=i||ru(e)}Qu(e,r,i,a=!1){return new Jh({Cu:e,methodName:r,qu:i,path:Vt.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zw(s){const e=s._freezeSettings(),r=ru(s._databaseId);return new Uw(s._databaseId,!!e.ignoreUndefinedProperties,r)}function Bw(s,e,r,i,a,c={}){const d=s.Qu(c.merge||c.mergeFields?2:0,e,r,a);Og("Data must be an object, but it was:",d,i);const g=Lg(i,d);let v,x;if(c.merge)v=new Kn(d.fieldMask),x=d.fieldTransforms;else if(c.mergeFields){const S=[];for(const N of c.mergeFields){const L=$w(e,N,r);if(!d.contains(L))throw new Te(Z.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);Hw(S,L)||S.push(L)}v=new Kn(S),x=d.fieldTransforms.filter((N=>v.covers(N.field)))}else v=null,x=d.fieldTransforms;return new Fw(new Nn(g),v,x)}function Vg(s,e){if(Mg(s=Qo(s)))return Og("Unsupported field value:",e,s),Lg(s,e);if(s instanceof jg)return(function(i,a){if(!Dg(a.Cu))throw a.Bu(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,a){const c=[];let d=0;for(const g of i){let v=Vg(g,a.Lu(d));v==null&&(v={nullValue:"NULL_VALUE"}),c.push(v),d++}return{arrayValue:{values:c}}})(s,e)}return(function(i,a){if((i=Qo(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return M_(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Tt.fromDate(i);return{timestampValue:Hl(a.serializer,c)}}if(i instanceof Tt){const c=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hl(a.serializer,c)}}if(i instanceof Yh)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Bi)return{bytesValue:ng(a.serializer,i._byteString)};if(i instanceof gn){const c=a.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw a.Bu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Dh(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Xh)return(function(d,g){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map((v=>{if(typeof v!="number")throw g.Bu("VectorValues must only contain numeric values.");return Rh(g.serializer,v)}))}}}}}})(i,a);throw a.Bu(`Unsupported field value: ${Wh(i)}`)})(s,e)}function Lg(s,e){const r={};return Rm(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(s,((i,a)=>{const c=Vg(a,e.Mu(i));c!=null&&(r[i]=c)})),{mapValue:{fields:r}}}function Mg(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Tt||s instanceof Yh||s instanceof Bi||s instanceof gn||s instanceof jg||s instanceof Xh)}function Og(s,e,r){if(!Mg(r)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(r)){const i=Wh(r);throw i==="an object"?e.Bu(s+" a custom object"):e.Bu(s+" "+i)}}function $w(s,e,r){if((e=Qo(e))instanceof Gh)return e._internalPath;if(typeof e=="string")return Fg(s,e);throw Kl("Field path arguments must be of type string or ",s,!1,void 0,r)}const qw=new RegExp("[~\\*/\\[\\]]");function Fg(s,e,r){if(e.search(qw)>=0)throw Kl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new Gh(...e.split("."))._internalPath}catch{throw Kl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function Kl(s,e,r,i,a){const c=i&&!i.isEmpty(),d=a!==void 0;let g=`Function ${e}() called with invalid data`;r&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(c||d)&&(v+=" (found",c&&(v+=` in field ${i}`),d&&(v+=` in document ${a}`),v+=")"),new Te(Z.INVALID_ARGUMENT,g+s+v)}function Hw(s,e){return s.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,r,i,a,c){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ww(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(zg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Ww extends Ug{data(){return super.data()}}function zg(s,e){return typeof e=="string"?Fg(s,e):e instanceof Gh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Te(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kw{convertValue(e,r="none"){switch(Us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const i={};return Hi(e,((a,c)=>{i[a]=this.convertValue(c,r)})),i}convertVectorValue(e){var r,i,a;const c=(a=(i=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map((d=>mt(d.doubleValue)));return new Xh(c)}convertGeoPoint(e){return new Yh(mt(e.latitude),mt(e.longitude))}convertArray(e,r){return(e.values||[]).map((i=>this.convertValue(i,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const i=bh(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Xo(e));default:return null}}convertTimestamp(e){const r=ls(e);return new Tt(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=dt.fromString(e);Ze(lg(i));const a=new Jo(i.get(1),i.get(3)),c=new Ie(i.popFirst(5));return a.isEqual(r)||Cr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(s,e,r){let i;return i=s?r&&(r.merge||r.mergeFields)?s.toFirestore(e,r):s.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bg extends Ug{constructor(e,r,i,a,c,d){super(e,r,i,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ll(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(zg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}}class Ll extends Bg{data(e={}){return super.data(e)}}class Yw{constructor(e,r,i,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new Bo(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((i=>{e.call(r,new Ll(this._firestore,this._userDataWriter,i.key,i,new Bo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Te(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let d=0;return a._snapshot.docChanges.map((g=>{const v=new Ll(a._firestore,a._userDataWriter,g.doc.key,g.doc,new Bo(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);return g.doc,{type:"added",doc:v,oldIndex:-1,newIndex:d++}}))}{let d=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const v=new Ll(a._firestore,a._userDataWriter,g.doc.key,g.doc,new Bo(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);let x=-1,S=-1;return g.type!==0&&(x=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),S=d.indexOf(g.doc.key)),{type:Xw(g.type),doc:v,oldIndex:x,newIndex:S}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Xw(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(s){s=os(s,gn);const e=os(s.firestore,ra);return Pw(Kh(e),s._key).then((r=>Wg(e,s,r)))}class qg extends Kw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bi(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,r)}}function Hg(s,e,r){s=os(s,gn);const i=os(s.firestore,ra),a=Gw(s.converter,e,r);return Zw(i,[Bw(zw(i),"setDoc",s._key,a,s.converter!==null,r).toMutation(s._key,br.none())])}function Jw(s,...e){var r,i,a;s=Qo(s);let c={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||lm(e[d])||(c=e[d],d++);const g={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(lm(e[d])){const N=e[d];e[d]=(r=N.next)===null||r===void 0?void 0:r.bind(N),e[d+1]=(i=N.error)===null||i===void 0?void 0:i.bind(N),e[d+2]=(a=N.complete)===null||a===void 0?void 0:a.bind(N)}let v,x,S;if(s instanceof gn)x=os(s.firestore,ra),S=Xl(s._key.path),v={next:N=>{e[d]&&e[d](Wg(x,s,N))},error:e[d+1],complete:e[d+2]};else{const N=os(s,ou);x=os(N.firestore,ra),S=N._query;const L=new qg(x);v={next:z=>{e[d]&&e[d](new Yw(x,L,N,z))},error:e[d+1],complete:e[d+2]},Qw(s._query)}return(function(L,z,W,q){const B=new Ng(q),te=new wg(z,B,W);return L.asyncQueue.enqueueAndForget((async()=>_g(await xh(L),te))),()=>{B.Za(),L.asyncQueue.enqueueAndForget((async()=>xg(await xh(L),te)))}})(Kh(x),S,g,v)}function Zw(s,e){return(function(i,a){const c=new is;return i.asyncQueue.enqueueAndForget((async()=>ww(await Rw(i),a,c))),c.promise})(Kh(s),e)}function Wg(s,e,r){const i=r.docs.get(e._key),a=new qg(s);return new Bg(s,a,e._key,i,new Bo(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(a){qi=a})(Ov),Fl(new Ko("firestore",((i,{instanceIdentifier:a,options:c})=>{const d=i.getProvider("app").getImmediate(),g=new ra(new Zv(i.getProvider("auth-internal")),new r_(i.getProvider("app-check-internal")),(function(x,S){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new Te(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(x.options.projectId,S)})(d,a),d);return c=Object.assign({useFetchStreams:r},c),g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),Di(bp,"4.7.3",e),Di(bp,"4.7.3","esm2017")})();const eE={apiKey:"AIzaSyAmd-g8ytfN4AXCaFX_K9J_-blAEoyP_UU",authDomain:"integralstream-87a5c.firebaseapp.com",projectId:"integralstream-87a5c",storageBucket:"integralstream-87a5c.firebasestorage.app",messagingSenderId:"206989148445",appId:"1:206989148445:web:58069d7bfec108216ea1f4",measurementId:"G-BXCJFX7VEQ"},tE=xm(eE),ha=Lw(tE),Wc=async(s,e)=>{try{await Hg(ca(ha,"users",s),{...e,updatedAt:Date.now()},{merge:!0})}catch(r){console.error("Firebase saveUserData error:",r)}},um=async s=>{try{const e=await $g(ca(ha,"users",s));return e.exists()?e.data():null}catch(e){return console.error("Firebase loadUserData error:",e),null}},cm=async s=>{try{await Hg(ca(ha,"library","main"),{...s,updatedAt:Date.now()},{merge:!0})}catch(e){console.error("Firebase saveLibrary error:",e)}},nE=async()=>{try{const s=await $g(ca(ha,"library","main"));return s.exists()?s.data():null}catch(s){return console.error("Firebase loadLibrary error:",s),null}},rE=s=>Jw(ca(ha,"library","main"),e=>{e.exists()&&s(e.data())}),Qc=`integral_vault_v${Cn}`,Kc=`integral_version_v${Cn}`,Gc="integral_v411_auth",Yc=`integral_categories_v${Cn}`,Xc=`integral_cat_colors_v${Cn}`,Oo="integral_active_user_v6",Rl="integral_user_locked_v6",Jc="integral_user_node_id",Zc="integral_user_fav_map_v2",sE="ADMIN",iE=()=>["INT",Math.random().toString(36).substring(2,6).toUpperCase(),Math.floor(Math.random()*90+10)].join("-"),oE=["Meditation","Tribal","Dance","Integral Serenity","Permia Community","Spanish","Fav. Pick","Environment","Other"],aE={Meditation:"#10b981",Tribal:"#f97316",Dance:"#d946ef","Integral Serenity":"#3b82f6","Permia Community":"#fbbf24",Spanish:"#8b5cf6","Fav. Pick":"#ec4899",Environment:"#22c55e",Other:"#94a3b8"},hm=({className:s="w-10 h-10"})=>m.jsxs("svg",{viewBox:"0 0 100 100",className:`${s} transition-transform duration-1000 ease-in-out`,children:[m.jsx("path",{d:"M35 52 C20 45 10 30 10 15 C25 15 40 25 45 40 Z",fill:"#e11d48",transform:"rotate(-10, 50, 50)"}),m.jsx("path",{d:"M50 5 C58 20 58 40 50 52 C42 40 42 20 50 5Z",fill:"#0284c7"}),m.jsx("path",{d:"M65 52 C80 45 90 30 90 15 C75 15 60 25 55 40 Z",fill:"#f59e0b",transform:"rotate(10, 50, 50)"}),m.jsx("path",{d:"M15 55 C15 85 40 95 50 95",fill:"none",stroke:"#0ea5e9",strokeWidth:"9",strokeLinecap:"round"}),m.jsx("path",{d:"M85 55 C85 85 60 95 50 95",fill:"none",stroke:"#64748b",strokeWidth:"9",strokeLinecap:"round"}),m.jsx("circle",{cx:"50",cy:"78",r:"12",fill:"#64748b"})]}),lE=()=>{var Yt,hr;const[s,e]=H.useState(()=>localStorage.getItem(Gc)==="true"),[r,i]=H.useState(()=>localStorage.getItem("integral_profile_pic")||""),[a,c]=H.useState(()=>localStorage.getItem(Oo)||Lo),[d,g]=H.useState(()=>localStorage.getItem(Rl)==="true"),[v,x]=H.useState(()=>{const ee=localStorage.getItem(Jc);if(ee)return ee;const oe=iE();return localStorage.setItem(Jc,oe),oe}),[S,N]=H.useState(()=>{const ee=localStorage.getItem(Zc),oe=ee?JSON.parse(ee):{};return{...f0,...oe}}),[L,z]=H.useState(()=>!localStorage.getItem(Oo)),[W,q]=H.useState("none"),[B,te]=H.useState("Read"),[ie,he]=H.useState(!1),[xe,Ee]=H.useState("All"),[me,A]=H.useState(!1),[T,I]=H.useState(!1),[b,R]=H.useState(Cn),V=H.useRef(null),E=H.useRef(!1);H.useRef(null),H.useEffect(()=>{nE().then(oe=>{oe&&oe.videos&&oe.videos.length>0&&(Re(oe.videos),oe.categories&&ue(oe.categories),oe.categoryColors&&Ce(oe.categoryColors))}).catch(()=>{});const ee=rE(()=>{});return a&&a!==Lo&&um(a).then(oe=>{oe&&oe.favorites&&N(Q=>({...Q,[a]:oe.favorites}))}).catch(()=>{}),()=>ee()},[]),H.useEffect(()=>{r&&localStorage.setItem("integral_profile_pic",r)},[r]),H.useEffect(()=>{localStorage.setItem(Oo,a),localStorage.setItem(Rl,d?"true":"false"),localStorage.setItem(Jc,v)},[a,d,v]),H.useEffect(()=>{localStorage.setItem(Zc,JSON.stringify(S)),Object.entries(S).forEach(([ee,oe])=>{ee&&ee!==Lo&&Wc(ee,{favorites:oe,username:ee,lastSeen:Date.now()})})},[S]);const ae=(ee,oe)=>{const Q=ee.trim().toUpperCase().replace(/\s+/g,"_");return Q?(c(Q),g(!0),oe&&(localStorage.setItem(Oo,Q),localStorage.setItem(Rl,"true")),um(Q).then(Ae=>{Ae!=null&&Ae.favorites&&N(We=>({...We,[Q]:Ae.favorites})),Wc(Q,{username:Q,lastSeen:Date.now()})}),z(!1),!0):!1},be=()=>{c(Lo),g(!1),localStorage.removeItem(Oo),localStorage.removeItem(Rl),q("none"),z(!0)},Le=ee=>ee.startsWith("INT-")?(x(ee),g(!0),z(!1),!0):!1,Fe=(ee,oe)=>ee===sE?(e(!0),oe&&localStorage.setItem(Gc,"true"),z(!1),!0):!1,Y=H.useCallback(()=>{window.location.reload()},[]),fe=H.useCallback(()=>{A(!0),setTimeout(Y,1500)},[Y]),le=H.useCallback(()=>{A(!0),localStorage.removeItem(Qc),localStorage.removeItem(Yc),localStorage.removeItem(Xc),localStorage.removeItem(Kc),localStorage.removeItem(Zc),setTimeout(Y,2e3)},[Y]),j=H.useCallback(async(ee=!1)=>{var oe;if(!E.current){E.current=!0,I(!0);try{const Q=await fetch(`./index.html?cb=${Date.now()}`,{cache:"no-store"});if(Q.ok){const Ae=await Q.text(),Xe=(oe=new DOMParser().parseFromString(Ae,"text/html").querySelector('meta[name="version"]'))==null?void 0:oe.getAttribute("content");if(Xe){const ln=parseInt(Xe,10);R(ln),ln>Cn&&fe()}}}catch{}finally{I(!1),E.current=!1}}},[fe]);H.useEffect(()=>{j(!1);const ee=setInterval(()=>j(!1),6e4);return()=>clearInterval(ee)},[j]);const[D,ue]=H.useState(()=>{const ee=localStorage.getItem(Yc);return ee?JSON.parse(ee):oE}),[ve,Ce]=H.useState(()=>{const ee=localStorage.getItem(Xc);return ee?JSON.parse(ee):aE}),[we,Re]=H.useState(()=>{const ee=m0(),oe=new Map(ee.map(Xe=>[Xe.url,Xe])),Q=localStorage.getItem(Qc),Ae=localStorage.getItem(Kc),We=!Ae||parseInt(Ae,10)<Cn;if(!Q||We)return ee;try{const ln=JSON.parse(Q).map(Ct=>{const Pr=oe.get(Ct.url);return Pr?{...Pr,id:Ct.id,viewCount:Ct.viewCount,likeCount:Ct.likeCount,dislikeCount:Ct.dislikeCount,reviews:Ct.reviews||[]}:Ct}),dr=new Set(ln.map(Ct=>Ct.url));return[...ee.filter(Ct=>!dr.has(Ct.url)),...ln]}catch{return ee}}),[je,ze]=H.useState((Yt=we[0])==null?void 0:Yt.id);H.useEffect(()=>{localStorage.setItem(Qc,JSON.stringify(we)),localStorage.setItem(Kc,Cn.toString()),localStorage.setItem(Gc,s?"true":"false"),localStorage.setItem(Yc,JSON.stringify(D)),localStorage.setItem(Xc,JSON.stringify(ve)),cm({videos:we,categories:D,categoryColors:ve,version:Cn}).catch(()=>{})},[we,s,D,ve]);const et=H.useMemo(()=>S[a]||[],[S,a]),on=H.useMemo(()=>et.length,[et]),yn=H.useMemo(()=>we.reduce((ee,oe)=>{var Q;return ee+(((Q=oe.reviews)==null?void 0:Q.filter(Ae=>!Ae.isApproved).length)||0)},0),[we]),Ht=H.useCallback(ee=>{const oe=we.filter(Q=>Q.id!==ee);cm({videos:oe,categories:D,categoryColors:ve,version:Cn}).catch(Q=>console.error("Save failed:",Q)),Re(Q=>{const Ae=Q.filter(We=>We.id!==ee);return je===ee&&(he(!1),ze(Ae.length>0?Ae[0].id:void 0)),Ae}),N(Q=>{const Ae={...Q};return Object.keys(Ae).forEach(We=>{Ae[We]=(Ae[We]||[]).filter(Xe=>Xe!==ee)}),Ae}),q(Q=>Q==="vault"?"none":Q)},[je]),an=H.useCallback((ee,oe,Q)=>{const Ae={id:`m-${Date.now()}`,url:ee,prompt:oe,category:Q,isFavorite:!1,viewCount:0,likeCount:0,dislikeCount:0,status:"ready",timestamp:Date.now(),rating:0,isLiked:!1,isDisliked:!1,reviews:[]};Re(We=>[Ae,...We]),je||ze(Ae.id)},[je]),Rn=H.useCallback(()=>{Re([]),ze(void 0),he(!1),q("none"),N(ee=>({...ee,[a]:[]}))},[a]),vn=H.useCallback(ee=>{N(oe=>{const Q=oe[a]||[],We=Q.includes(ee)?Q.filter(Xe=>Xe!==ee):[...Q,ee];return Wc(a,{favorites:We}).catch(()=>{}),{...oe,[a]:We}})},[a]),cr=H.useCallback(ee=>{Re(oe=>oe.map(Q=>Q.id===ee?{...Q,isLiked:!Q.isLiked,likeCount:Q.isLiked?Q.likeCount-1:Q.likeCount+1,isDisliked:Q.isLiked?Q.isDisliked:!1,dislikeCount:Q.isLiked||!Q.isDisliked?Q.dislikeCount:Q.dislikeCount-1}:Q))},[]),Rr=H.useCallback(ee=>{Re(oe=>oe.map(Q=>Q.id===ee?{...Q,isDisliked:!Q.isDisliked,dislikeCount:Q.isDisliked?Q.dislikeCount-1:Q.dislikeCount+1,isLiked:Q.isDisliked?Q.isLiked:!1,likeCount:Q.isDisliked||!Q.isLiked?Q.likeCount:Q.likeCount-1}:Q))},[]);H.useCallback(ee=>{Re(oe=>oe.map(Q=>Q.id===ee?{...Q,viewCount:Q.viewCount+1}:Q))},[]);const Pn=H.useCallback(ee=>{je===ee.id?he(oe=>!oe):(ze(ee.id),he(!0))},[je]),re=(ee,oe)=>{D.includes(ee)||(ue(Q=>[...Q,ee]),Ce(Q=>({...Q,[ee]:oe||"#94a3b8"})))},Oe=ee=>{ue(oe=>oe.filter(Q=>Q!==ee)),xe===ee&&Ee("All")},Me=H.useMemo(()=>we.find(ee=>ee.id===je)||null,[we,je]);return m.jsxs("div",{className:"h-screen bg-transparent text-slate-100 flex flex-col font-sans relative selection:bg-blue-500/30 overflow-hidden",children:[m.jsx("div",{className:"fixed bottom-[-10%] right-[-10%] w-[40vw] h-[40vw] opacity-[0.03] pointer-events-none z-0 rotate-12 select-none",children:m.jsx(hm,{className:"w-full h-full"})}),me&&m.jsxs("div",{className:"fixed inset-0 z-[200] bg-black/90 flex flex-col items-center justify-center animate-fade-in backdrop-blur-3xl",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"w-24 h-24 border-4 border-blue-500/10 border-t-blue-500 rounded-full animate-spin"}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx("i",{className:"fa-brands fa-github text-blue-500 text-3xl animate-pulse"})})]}),m.jsxs("div",{className:"flex flex-col items-center mt-10",children:[m.jsx("h2",{className:"text-xl font-black uppercase tracking-[0.5em] text-white",children:"Neural Sync"}),m.jsx("p",{className:"text-[10px] font-bold text-blue-500 uppercase tracking-widest mt-4 max-w-xs text-center leading-relaxed",children:"Adjusting local matrix to source..."})]})]}),m.jsxs("header",{className:"h-20 flex-shrink-0 border-b border-white/5 bg-black/40 backdrop-blur-xl flex items-center justify-between px-8 z-50",children:[m.jsxs("div",{className:"flex items-center gap-4 cursor-pointer",onClick:()=>q("none"),children:[m.jsx(hm,{}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("h1",{className:"font-black text-xl uppercase tracking-tighter leading-none text-blue-600",children:"IntegralStream"}),m.jsx("div",{className:"flex items-center gap-2 mt-1",children:m.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Personalized Archive"})})]})]}),m.jsxs("div",{className:"flex gap-4 items-center",children:[m.jsxs("div",{className:"flex items-center gap-2 relative group",children:[m.jsxs("button",{onClick:()=>d?q(ee=>ee==="userDashboard"?"none":"userDashboard"):z(!0),className:`px-4 h-11 rounded-xl border flex items-center gap-3 transition-all cursor-pointer ${W==="userDashboard"?"bg-blue-600 border-blue-500 text-white shadow-[0_0_20px_rgba(59,130,246,0.3)]":"bg-blue-600/10 border-blue-500/20 text-blue-400 hover:bg-blue-600/20"}`,children:[m.jsxs("div",{className:"flex flex-col items-end",children:[m.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest opacity-60",children:d?"My Archive":"Identify"}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:a.replace(/_/g," ")})]}),m.jsxs("div",{className:"relative w-8 h-8 rounded-full overflow-hidden border border-blue-500/40 flex-shrink-0",children:[r?m.jsx("img",{src:r,className:"w-full h-full object-cover",alt:"profile"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-blue-600/20",children:m.jsx("i",{className:"fa-solid fa-user-astronaut text-[11px] text-blue-400"})}),m.jsxs("label",{className:"absolute inset-0 cursor-pointer opacity-0 hover:opacity-100 bg-black/50 flex items-center justify-center transition-opacity",children:[m.jsx("i",{className:"fa-solid fa-camera text-white text-[10px]"}),m.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ee=>{var Q;const oe=(Q=ee.target.files)==null?void 0:Q[0];if(oe){const Ae=new FileReader;Ae.onload=We=>{var Xe;return i((Xe=We.target)==null?void 0:Xe.result)},Ae.readAsDataURL(oe)}}})]})]})]}),d&&m.jsx("button",{onClick:be,className:"w-9 h-9 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-slate-600 hover:text-red-400 hover:border-red-500/30 hover:bg-red-500/10 transition-all",title:"Sign out",children:m.jsx("i",{className:"fa-solid fa-arrow-right-from-bracket text-[11px]"})})]}),s&&m.jsxs("button",{onClick:()=>q(ee=>ee==="moderation"?"none":"moderation"),className:`h-11 px-4 rounded-xl flex items-center gap-2 border transition-all relative font-black text-[10px] tracking-widest uppercase ${W==="moderation"?"bg-white text-black shadow-lg":"bg-white/5 border-white/10 text-slate-400 hover:text-white hover:border-white/20"}`,children:[m.jsx("i",{className:"fa-solid fa-terminal text-base"}),m.jsx("span",{children:"Console"}),yn>0&&m.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-600 rounded-full text-[10px] font-black flex items-center justify-center border-2 border-black shadow-lg",children:yn})]}),m.jsx("button",{onClick:()=>s?e(!1):z(!0),className:`w-11 h-11 rounded-xl flex items-center justify-center border transition-all cursor-pointer ${s?"bg-blue-600/10 border-blue-500/20 text-blue-400":"bg-white/5 border-white/10 text-slate-500 hover:text-white"}`,children:m.jsx("i",{className:`fa-solid ${s?"fa-unlock":"fa-lock"}`})})]})]}),m.jsxs("div",{className:"flex-1 flex overflow-hidden relative z-10",children:[m.jsx("aside",{className:"w-[490px] flex-shrink-0 min-w-0 border-r border-white/5 bg-black/20 overflow-y-auto custom-scrollbar",children:m.jsx(u0,{videos:we,categories:D,categoryColors:ve,currentVideo:Me,onSelect:Pn,onRemove:Ht,onToggleFavorite:vn,userFavorites:et,onAddRandom:()=>{const ee=g0();Re(oe=>[ee,...oe]),ze(ee.id)},onAddManualVideo:an,onMoveVideo:()=>{},onPurgeAll:Rn,activeTab:xe,setActiveTab:Ee,isAuthorized:s,onAddCategory:re,onRemoveCategory:Oe,onUpdateCategoryColor:()=>{}})}),m.jsx("section",{className:"flex-1 flex flex-col bg-transparent overflow-y-auto min-w-0 custom-scrollbar",children:m.jsxs("div",{className:"w-full flex flex-col pt-8 gap-0",children:[m.jsx("div",{className:"flex items-center justify-between px-8 mb-6",children:m.jsxs("h2",{className:"text-blue-600 font-black uppercase text-[10px] tracking-[0.4em] flex items-center gap-3",children:[m.jsx("span",{className:"w-1 h-4 bg-blue-600 rounded-full"}),Me?"Current Video Stream":"Select Video"]})}),m.jsx("div",{className:"px-8 w-full",ref:V,children:m.jsx("div",{className:"w-full max-h-[calc(100vh-240px)] aspect-video bg-black rounded-[2rem] overflow-hidden border border-white/10 shadow-2xl relative mx-auto",children:Me?m.jsx(l0,{video:Me,isFavorite:et.includes(Me.id),isPlaying:ie,onPlayStateChange:he,onToggleLike:()=>cr(Me.id),onToggleDislike:()=>Rr(Me.id),onToggleFavorite:()=>vn(Me.id),onWriteReview:()=>{te("Write"),q("reviews")}},Me.id):m.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-600 uppercase font-black text-xs gap-4 bg-slate-950",children:[m.jsx("i",{className:"fa-solid fa-cloud fa-3x animate-pulse text-slate-900"})," Select Video"]})})}),Me&&m.jsx("div",{className:"w-full animate-fade-in mt-6 px-8",children:m.jsx("div",{className:"bg-white/5 border border-white/5 rounded-3xl flex flex-wrap items-center justify-between px-8 py-4 w-full gap-4",children:m.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[m.jsx("span",{className:"px-3 py-1 border text-[10px] font-black uppercase rounded-full tracking-widest shrink-0",style:{color:ve[Me.category],borderColor:`${ve[Me.category]}60`,background:`${ve[Me.category]}20`},children:Me.category}),m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-[10px] font-black text-orange-400 uppercase tracking-widest",children:"Views::"}),m.jsx("span",{className:"text-[13px] font-black text-white",children:Me.viewCount.toLocaleString()})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest",children:"Likes::"}),m.jsx("span",{className:"text-[13px] font-black text-white",children:Me.likeCount.toLocaleString()})]}),m.jsxs("button",{onClick:()=>{te("Read"),q("reviews")},className:"text-[10px] font-black uppercase tracking-widest text-purple-400 hover:text-purple-300 flex items-center gap-2 transition-colors",children:[m.jsx("i",{className:"fa-solid fa-message text-[11px]"}),m.jsx("span",{children:"Reviews::"}),m.jsx("span",{className:"text-[13px] font-black text-white ml-0.5",children:(((hr=Me.reviews)==null?void 0:hr.length)||0).toLocaleString()})]}),m.jsxs("button",{onClick:()=>q(ee=>ee==="vault"?"none":"vault"),className:"text-[10px] font-black uppercase tracking-widest text-blue-400 hover:text-blue-300 flex items-center gap-2 transition-colors",children:[m.jsx("i",{className:"fa-solid fa-vault text-[11px]"}),m.jsxs("span",{children:[a.replace(/_/g," "),"'S VAULT::"]}),m.jsx("span",{className:"text-[13px] font-black text-white ml-0.5",children:on.toLocaleString()})]})]})]})})}),m.jsxs("div",{className:"px-8 w-full mt-4 pb-20",children:[W==="moderation"&&m.jsx(y0,{videos:we,categories:D,categoryColors:ve,onApprove:(ee,oe)=>Re(Q=>Q.map(Ae=>{var We;return Ae.id===ee?{...Ae,reviews:(We=Ae.reviews)==null?void 0:We.map(Xe=>Xe.id===oe?{...Xe,isApproved:!0}:Xe)}:Ae})),onReject:(ee,oe)=>Re(Q=>Q.map(Ae=>{var We;return Ae.id===ee?{...Ae,reviews:(We=Ae.reviews)==null?void 0:We.filter(Xe=>Xe.id!==oe)}:Ae})),onAddVideo:an,onRemoveVideo:Ht,onResetStats:()=>{},onClearCategories:()=>{},onClose:()=>q("none"),onSimulateSync:fe,isCheckingSync:T,cloudVersion:b,onCheckVersion:()=>j(!0),onHardSync:le,currentUser:a,userFavMap:S}),W==="vault"&&m.jsx(h0,{videos:we.filter(ee=>et.includes(ee.id)),categoryColors:ve,currentVideo:Me,onSelect:ee=>{ze(ee.id),q("none")},onRemove:Ht,onToggleFavorite:vn,isOpen:!0,onClose:()=>q("none"),isAuthorized:s,onMoveVideo:()=>{},currentUser:a}),W==="reviews"&&Me&&m.jsx(d0,{video:Me,isOpen:!0,initialTab:B,onClose:()=>q("none"),onSubmitReview:(ee,oe)=>{const Q={id:`r-${Date.now()}`,rating:ee,text:oe,user:a,timestamp:Date.now(),isApproved:!1};Re(Ae=>Ae.map(We=>We.id===Me.id?{...We,reviews:[Q,...We.reviews||[]]}:We))}}),W==="userDashboard"&&m.jsx(v0,{currentUser:a,nodeId:v,videos:we,categories:D,categoryColors:ve,userFavorites:et,onAddVideo:an,onRemoveVideo:Ht,onToggleFavorite:vn,onSelectVideo:ee=>{ze(ee.id),he(!0),q("none")},onClose:()=>q("none"),isAuthorized:s})]})]})})]}),L&&m.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-6 backdrop-blur-3xl",children:m.jsx(c0,{onLogin:Fe,onIdentify:ae,onRestore:Le,isIdentityLocked:d,onClose:()=>d&&z(!1),defaultName:a!==Lo?a:""})})]})},Qg=document.getElementById("root");if(!Qg)throw new Error("Could not find root element to mount to");const uE=a0.createRoot(Qg);uE.render(m.jsx(e0.StrictMode,{children:m.jsx(lE,{})}));
